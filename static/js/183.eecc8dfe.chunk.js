(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[183],{375:function(e,t,a){"use strict";var s=a(0),n=a.n(s),c=a(1),r=a.n(c);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a,s,n={},c=Object.keys(e);for(s=0;s<c.length;s++)a=c[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(s=0;s<c.length;s++)a=c[s],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var o=Object(s.forwardRef)((function(e,t){var a=e.color,s=void 0===a?"currentColor":a,c=e.size,r=void 0===c?24:c,o=l(e,["color","size"]);return n.a.createElement("svg",i({ref:t,xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),n.a.createElement("ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}),n.a.createElement("path",{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"}),n.a.createElement("path",{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"}))}));o.propTypes={color:r.a.string,size:r.a.oneOfType([r.a.string,r.a.number])},o.displayName="Database",t.a=o},378:function(e,t,a){"use strict";var s=a(4),n=a(5),c=a(294),r=a(0),i=a.n(r),l=a(1),o=a.n(l),d=a(11),u=a.n(d),m=a(12),j=a(306);function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={children:o.a.node,className:o.a.string,closeClassName:o.a.string,closeAriaLabel:o.a.string,cssModule:o.a.object,color:o.a.string,fade:o.a.bool,isOpen:o.a.bool,toggle:o.a.func,tag:m.q,transition:o.a.shape(j.a.propTypes),innerRef:o.a.oneOfType([o.a.object,o.a.string,o.a.func])},x={color:"success",isOpen:!0,tag:"div",closeAriaLabel:"Close",fade:!0,transition:p(p({},j.a.defaultProps),{},{unmountOnExit:!0})};function f(e){var t=e.className,a=e.closeClassName,c=e.closeAriaLabel,r=e.cssModule,l=e.tag,o=e.color,d=e.isOpen,b=e.toggle,h=e.children,x=e.transition,f=e.fade,O=e.innerRef,v=Object(n.a)(e,["className","closeClassName","closeAriaLabel","cssModule","tag","color","isOpen","toggle","children","transition","fade","innerRef"]),g=Object(m.m)(u()(t,"alert","alert-"+o,{"alert-dismissible":b}),r),N=Object(m.m)(u()("close",a),r),_=p(p(p({},j.a.defaultProps),x),{},{baseClass:f?x.baseClass:"",timeout:f?x.timeout:0});return i.a.createElement(j.a,Object(s.a)({},v,_,{tag:l,className:g,in:d,role:"alert",innerRef:O}),b?i.a.createElement("button",{type:"button",className:N,"aria-label":c,onClick:b},i.a.createElement("span",{"aria-hidden":"true"},"\xd7")):null,h)}f.propTypes=h,f.defaultProps=x,t.a=f},404:function(e,t,a){"use strict";var s=a(4),n=a(5),c=a(0),r=a.n(c),i=a(1),l=a.n(i),o=a(11),d=a.n(o),u=a(12),m={tag:u.q,wrapTag:u.q,toggle:l.a.func,className:l.a.string,cssModule:l.a.object,children:l.a.node,closeAriaLabel:l.a.string,charCode:l.a.oneOfType([l.a.string,l.a.number]),close:l.a.object},j=function(e){var t,a=e.className,c=e.cssModule,i=e.children,l=e.toggle,o=e.tag,m=e.wrapTag,j=e.closeAriaLabel,b=e.charCode,p=e.close,h=Object(n.a)(e,["className","cssModule","children","toggle","tag","wrapTag","closeAriaLabel","charCode","close"]),x=Object(u.m)(d()(a,"modal-header"),c);if(!p&&l){var f="number"===typeof b?String.fromCharCode(b):b;t=r.a.createElement("button",{type:"button",onClick:l,className:Object(u.m)("close",c),"aria-label":j},r.a.createElement("span",{"aria-hidden":"true"},f))}return r.a.createElement(m,Object(s.a)({},h,{className:x}),r.a.createElement(o,{className:Object(u.m)("modal-title",c)},i),p||t)};j.propTypes=m,j.defaultProps={tag:"h5",wrapTag:"div",closeAriaLabel:"Close",charCode:215},t.a=j},405:function(e,t,a){"use strict";var s=a(4),n=a(5),c=a(0),r=a.n(c),i=a(1),l=a.n(i),o=a(11),d=a.n(o),u=a(12),m={tag:u.q,className:l.a.string,cssModule:l.a.object},j=function(e){var t=e.className,a=e.cssModule,c=e.tag,i=Object(n.a)(e,["className","cssModule","tag"]),l=Object(u.m)(d()(t,"modal-body"),a);return r.a.createElement(c,Object(s.a)({},i,{className:l}))};j.propTypes=m,j.defaultProps={tag:"div"},t.a=j},406:function(e,t,a){"use strict";var s=a(4),n=a(5),c=a(0),r=a.n(c),i=a(1),l=a.n(i),o=a(11),d=a.n(o),u=a(12),m={tag:u.q,className:l.a.string,cssModule:l.a.object},j=function(e){var t=e.className,a=e.cssModule,c=e.tag,i=Object(n.a)(e,["className","cssModule","tag"]),l=Object(u.m)(d()(t,"modal-footer"),a);return r.a.createElement(c,Object(s.a)({},i,{className:l}))};j.propTypes=m,j.defaultProps={tag:"div"},t.a=j},414:function(e,t,a){"use strict";var s=a(294),n=a(4),c=a(21),r=a(19),i=a(0),l=a.n(i),o=a(1),d=a.n(o),u=a(11),m=a.n(u),j=a(9),b=a.n(j),p=a(12),h={children:d.a.node.isRequired,node:d.a.any},x=function(e){function t(){return e.apply(this,arguments)||this}Object(r.a)(t,e);var a=t.prototype;return a.componentWillUnmount=function(){this.defaultNode&&document.body.removeChild(this.defaultNode),this.defaultNode=null},a.render=function(){return p.f?(this.props.node||this.defaultNode||(this.defaultNode=document.createElement("div"),document.body.appendChild(this.defaultNode)),b.a.createPortal(this.props.children,this.props.node||this.defaultNode)):null},t}(l.a.Component);x.propTypes=h;var f=x,O=a(306);function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(Object(a),!0).forEach((function(t){Object(s.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function N(){}var _=d.a.shape(O.a.propTypes),y={isOpen:d.a.bool,autoFocus:d.a.bool,centered:d.a.bool,scrollable:d.a.bool,size:d.a.string,toggle:d.a.func,keyboard:d.a.bool,role:d.a.string,labelledBy:d.a.string,backdrop:d.a.oneOfType([d.a.bool,d.a.oneOf(["static"])]),onEnter:d.a.func,onExit:d.a.func,onOpened:d.a.func,onClosed:d.a.func,children:d.a.node,className:d.a.string,wrapClassName:d.a.string,modalClassName:d.a.string,backdropClassName:d.a.string,contentClassName:d.a.string,external:d.a.node,fade:d.a.bool,cssModule:d.a.object,zIndex:d.a.oneOfType([d.a.number,d.a.string]),backdropTransition:_,modalTransition:_,innerRef:d.a.oneOfType([d.a.object,d.a.string,d.a.func]),unmountOnClose:d.a.bool,returnFocusAfterClose:d.a.bool,container:p.r},k=Object.keys(y),w={isOpen:!1,autoFocus:!0,centered:!1,scrollable:!1,role:"dialog",backdrop:!0,keyboard:!0,zIndex:1050,fade:!0,onOpened:N,onClosed:N,modalTransition:{timeout:p.e.Modal},backdropTransition:{mountOnEnter:!0,timeout:p.e.Fade},unmountOnClose:!0,returnFocusAfterClose:!0,container:"body"},A=function(e){function t(t){var a;return(a=e.call(this,t)||this)._element=null,a._originalBodyPadding=null,a.getFocusableChildren=a.getFocusableChildren.bind(Object(c.a)(a)),a.handleBackdropClick=a.handleBackdropClick.bind(Object(c.a)(a)),a.handleBackdropMouseDown=a.handleBackdropMouseDown.bind(Object(c.a)(a)),a.handleEscape=a.handleEscape.bind(Object(c.a)(a)),a.handleStaticBackdropAnimation=a.handleStaticBackdropAnimation.bind(Object(c.a)(a)),a.handleTab=a.handleTab.bind(Object(c.a)(a)),a.onOpened=a.onOpened.bind(Object(c.a)(a)),a.onClosed=a.onClosed.bind(Object(c.a)(a)),a.manageFocusAfterClose=a.manageFocusAfterClose.bind(Object(c.a)(a)),a.clearBackdropAnimationTimeout=a.clearBackdropAnimationTimeout.bind(Object(c.a)(a)),a.state={isOpen:!1,showStaticBackdropAnimation:!1},a}Object(r.a)(t,e);var a=t.prototype;return a.componentDidMount=function(){var e=this.props,t=e.isOpen,a=e.autoFocus,s=e.onEnter;t&&(this.init(),this.setState({isOpen:!0}),a&&this.setFocus()),s&&s(),this._isMounted=!0},a.componentDidUpdate=function(e,t){if(this.props.isOpen&&!e.isOpen)return this.init(),void this.setState({isOpen:!0});this.props.autoFocus&&this.state.isOpen&&!t.isOpen&&this.setFocus(),this._element&&e.zIndex!==this.props.zIndex&&(this._element.style.zIndex=this.props.zIndex)},a.componentWillUnmount=function(){this.clearBackdropAnimationTimeout(),this.props.onExit&&this.props.onExit(),this._element&&(this.destroy(),(this.props.isOpen||this.state.isOpen)&&this.close()),this._isMounted=!1},a.onOpened=function(e,t){this.props.onOpened(),(this.props.modalTransition.onEntered||N)(e,t)},a.onClosed=function(e){var t=this.props.unmountOnClose;this.props.onClosed(),(this.props.modalTransition.onExited||N)(e),t&&this.destroy(),this.close(),this._isMounted&&this.setState({isOpen:!1})},a.setFocus=function(){this._dialog&&this._dialog.parentNode&&"function"===typeof this._dialog.parentNode.focus&&this._dialog.parentNode.focus()},a.getFocusableChildren=function(){return this._element.querySelectorAll(p.h.join(", "))},a.getFocusedChild=function(){var e,t=this.getFocusableChildren();try{e=document.activeElement}catch(a){e=t[0]}return e},a.handleBackdropClick=function(e){if(e.target===this._mouseDownElement){e.stopPropagation();var t=this._dialog?this._dialog.parentNode:null;if(t&&e.target===t&&"static"===this.props.backdrop&&this.handleStaticBackdropAnimation(),!this.props.isOpen||!0!==this.props.backdrop)return;t&&e.target===t&&this.props.toggle&&this.props.toggle(e)}},a.handleTab=function(e){if(9===e.which){var t=this.getFocusableChildren(),a=t.length;if(0!==a){for(var s=this.getFocusedChild(),n=0,c=0;c<a;c+=1)if(t[c]===s){n=c;break}e.shiftKey&&0===n?(e.preventDefault(),t[a-1].focus()):e.shiftKey||n!==a-1||(e.preventDefault(),t[0].focus())}}},a.handleBackdropMouseDown=function(e){this._mouseDownElement=e.target},a.handleEscape=function(e){this.props.isOpen&&e.keyCode===p.l.esc&&this.props.toggle&&(this.props.keyboard?(e.preventDefault(),e.stopPropagation(),this.props.toggle(e)):"static"===this.props.backdrop&&(e.preventDefault(),e.stopPropagation(),this.handleStaticBackdropAnimation()))},a.handleStaticBackdropAnimation=function(){var e=this;this.clearBackdropAnimationTimeout(),this.setState({showStaticBackdropAnimation:!0}),this._backdropAnimationTimeout=setTimeout((function(){e.setState({showStaticBackdropAnimation:!1})}),100)},a.init=function(){try{this._triggeringElement=document.activeElement}catch(e){this._triggeringElement=null}this._element||(this._element=document.createElement("div"),this._element.setAttribute("tabindex","-1"),this._element.style.position="relative",this._element.style.zIndex=this.props.zIndex,this._mountContainer=Object(p.j)(this.props.container),this._mountContainer.appendChild(this._element)),this._originalBodyPadding=Object(p.i)(),Object(p.g)(),0===t.openCount&&(document.body.className=m()(document.body.className,Object(p.m)("modal-open",this.props.cssModule))),t.openCount+=1},a.destroy=function(){this._element&&(this._mountContainer.removeChild(this._element),this._element=null),this.manageFocusAfterClose()},a.manageFocusAfterClose=function(){if(this._triggeringElement){var e=this.props.returnFocusAfterClose;this._triggeringElement.focus&&e&&this._triggeringElement.focus(),this._triggeringElement=null}},a.close=function(){if(t.openCount<=1){var e=Object(p.m)("modal-open",this.props.cssModule),a=new RegExp("(^| )"+e+"( |$)");document.body.className=document.body.className.replace(a," ").trim()}this.manageFocusAfterClose(),t.openCount=Math.max(0,t.openCount-1),Object(p.p)(this._originalBodyPadding)},a.renderModalDialog=function(){var e,t=this,a=Object(p.n)(this.props,k),s="modal-dialog";return l.a.createElement("div",Object(n.a)({},a,{className:Object(p.m)(m()(s,this.props.className,(e={},e["modal-"+this.props.size]=this.props.size,e["modal-dialog-centered"]=this.props.centered,e["modal-dialog-scrollable"]=this.props.scrollable,e)),this.props.cssModule),role:"document",ref:function(e){t._dialog=e}}),l.a.createElement("div",{className:Object(p.m)(m()("modal-content",this.props.contentClassName),this.props.cssModule)},this.props.children))},a.render=function(){var e=this.props.unmountOnClose;if(this._element&&(this.state.isOpen||!e)){var t=!!this._element&&!this.state.isOpen&&!e;this._element.style.display=t?"none":"block";var a=this.props,s=a.wrapClassName,c=a.modalClassName,r=a.backdropClassName,i=a.cssModule,o=a.isOpen,d=a.backdrop,u=a.role,j=a.labelledBy,b=a.external,h=a.innerRef,x={onClick:this.handleBackdropClick,onMouseDown:this.handleBackdropMouseDown,onKeyUp:this.handleEscape,onKeyDown:this.handleTab,style:{display:"block"},"aria-labelledby":j,role:u,tabIndex:"-1"},v=this.props.fade,N=g(g(g({},O.a.defaultProps),this.props.modalTransition),{},{baseClass:v?this.props.modalTransition.baseClass:"",timeout:v?this.props.modalTransition.timeout:0}),_=g(g(g({},O.a.defaultProps),this.props.backdropTransition),{},{baseClass:v?this.props.backdropTransition.baseClass:"",timeout:v?this.props.backdropTransition.timeout:0}),y=d&&(v?l.a.createElement(O.a,Object(n.a)({},_,{in:o&&!!d,cssModule:i,className:Object(p.m)(m()("modal-backdrop",r),i)})):l.a.createElement("div",{className:Object(p.m)(m()("modal-backdrop","show",r),i)}));return l.a.createElement(f,{node:this._element},l.a.createElement("div",{className:Object(p.m)(s)},l.a.createElement(O.a,Object(n.a)({},x,N,{in:o,onEntered:this.onOpened,onExited:this.onClosed,cssModule:i,className:Object(p.m)(m()("modal",c,this.state.showStaticBackdropAnimation&&"modal-static"),i),innerRef:h}),b,this.renderModalDialog()),y))}return null},a.clearBackdropAnimationTimeout=function(){this._backdropAnimationTimeout&&(clearTimeout(this._backdropAnimationTimeout),this._backdropAnimationTimeout=void 0)},t}(l.a.Component);A.propTypes=y,A.defaultProps=w,A.openCount=0;t.a=A},980:function(e,t,a){"use strict";a.r(t);var s=a(64),n=a.n(s),c=a(65),r=a(8),i=a(0),l=a(944),o=a(935),d=a(55),u=a(303),m=a(952),j=a(955),b=a(378),p=a(301),h=a(953),x=a(414),f=a(404),O=a(405),v=a(323),g=a(321),N=a(406),_=a(562),y=a(606),k=a(643),w=a(629),A=a(627),C=a(605),S=a(791),P=a(564),T=a(798),E=a(761),z=a(429),M=a(547),q=a(375),F=a(803),D=a(170),B=a(840),R=a(587),I=a(316),L=a(543),W=a(293),K=a(322),U=a(3);t.default=function(){var e,t,a,s,G,J,Q,H,V,$,X,Y,Z,ee,te=Object(i.useState)(null),ae=Object(r.a)(te,2),se=ae[0],ne=ae[1],ce=Object(i.useState)(!1),re=Object(r.a)(ce,2),ie=re[0],le=re[1],oe=Object(i.useState)(!1),de=Object(r.a)(oe,2),ue=de[0],me=de[1],je=Object(i.useState)(""),be=Object(r.a)(je,2),pe=be[0],he=be[1],xe=Object(i.useState)(""),fe=Object(r.a)(xe,2),Oe=fe[0],ve=fe[1],ge=Object(i.useState)(!1),Ne=Object(r.a)(ge,2),_e=Ne[0],ye=Ne[1],ke=Object(i.useState)(null),we=Object(r.a)(ke,2),Ae=we[0],Ce=we[1],Se=Object(i.useState)(!1),Pe=Object(r.a)(Se,2),Te=Pe[0],Ee=Pe[1],ze=Object(i.useState)({canProceed:!0,message:""}),Me=Object(r.a)(ze,2),qe=Me[0],Fe=Me[1],De=Object(i.useState)(""),Be=Object(r.a)(De,2),Re=Be[0],Ie=Be[1],Le=Object(i.useState)("all"),We=Object(r.a)(Le,2),Ke=We[0],Ue=We[1],Ge=Object(i.useState)(null),Je=Object(r.a)(Ge,2),Qe=Je[0],He=Je[1],Ve=Object(i.useState)(""),$e=Object(r.a)(Ve,2),Xe=$e[0],Ye=$e[1],Ze=Object(i.useState)(""),et=Object(r.a)(Ze,2),tt=et[0],at=et[1],st=Object(i.useState)([]),nt=Object(r.a)(st,2),ct=(nt[0],nt[1]);Object(i.useEffect)((function(){Ee(Object(L.c)())}),[]);var rt=function(){var e=Object(c.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.a.autocomplete("");case 3:t=e.sent,a=t.map((function(e){return{value:e.id,label:"".concat(e.name," (").concat(e.email,")")}})),ct(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error loading users:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){Te&&rt()}),[Te]);var it=function(e){var t,a,s;if(!e)return{stockAvailAfter:0,storeAvailAfter:0,totalAfter:0};var n=(null===(t=e.product)||void 0===t?void 0:t.current_stock)||0,c=(null===(a=e.product)||void 0===a?void 0:a.current_stock_available)||0,r=(null===(s=e.product)||void 0===s?void 0:s.current_store_available)||0,i=e.quantity,l=c,o=r,d=n;if(e.is_transfer)"stock_available"===e.transfer_from_location?(l=Math.max(0,c-i),o=r+i):(l=c+i,o=Math.max(0,r-i)),d=n;else if("increase"===e.adjustment_type)"total"===e.adjustment_location?(l=c,o=r+i,d=n+i):"stock_available"===e.adjustment_location?(l=c+i,o=r,d=n+i):(l=c,o=r+i,d=n+i);else if("total"===e.adjustment_location){if(r>=i)l=c,o=r-i;else{var u=i-r;l=Math.max(0,c-u),o=0}d=Math.max(0,n-i)}else"stock_available"===e.adjustment_location?(l=Math.max(0,c-i),o=r,d=Math.max(0,n-i)):(l=c,o=Math.max(0,r-i),d=Math.max(0,n-i));return{stockAvailAfter:l,storeAvailAfter:o,totalAfter:d}},lt=function(e){if(!e||!e.product)return{canProceed:!1,message:"Product not found"};var t=e.product.current_stock||0,a=e.product.current_stock_available||0,s=e.product.current_store_available||0,n=e.quantity;if("decrease"===e.adjustment_type){var c=0,r="";switch(e.adjustment_location){case"total":c=a+s,r="total available stock";break;case"stock_available":c=a,r="stock available";break;case"store_available":c=s,r="store available";break;default:return{canProceed:!1,message:"Invalid adjustment location"}}if(n>c)return{canProceed:!1,message:"Cannot decrease ".concat(n," units from ").concat(r,". Only ").concat(c," units available."),maxAllowed:c};if("total"===e.adjustment_location){var i=t-n;if(i<=5)return{canProceed:!0,message:"Warning: This will reduce total stock to ".concat(i," units."),warning:!0}}}if("transfer"===e.adjustment_type){var l=0,o="";if("stock_available"===e.transfer_from_location)l=a,o="stock available";else{if("store_available"!==e.transfer_from_location)return{canProceed:!1,message:"Invalid transfer source location"};l=s,o="store available"}if(n>l)return{canProceed:!1,message:"Cannot transfer ".concat(n," units from ").concat(o,". Only ").concat(l," units available."),maxAllowed:l};var d=l-n;if(d<=2)return{canProceed:!0,message:"Warning: ".concat(o," will have only ").concat(d," units remaining after transfer."),warning:!0}}return{canProceed:!0}},ot=function(){var e=Object(c.a)(n.a.mark((function e(){var t,a,s,c,r,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(se){e.next=2;break}return e.abrupt("return");case 2:if((t=lt(se)).canProceed){e.next=6;break}return Object(W.d)(t.message),e.abrupt("return");case 6:if(!t.warning){e.next=10;break}if(window.confirm("".concat(t.message,"\n\nDo you want to proceed with this adjustment?"))){e.next=10;break}return e.abrupt("return");case 10:if("decrease"!==se.adjustment_type){e.next=18;break}if(a=se.product.current_stock||0,s=se.quantity,!((c=a-s)<=3)){e.next=18;break}if(window.confirm("\u26a0\ufe0f WARNING: This adjustment will reduce total stock to ".concat(c," units.\n\n")+"Are you sure you want to approve this?")){e.next=18;break}return e.abrupt("return");case 18:return e.prev=18,ye(!0),Ce(se.id),e.next=23,R.a.approve(se.id,Oe||"");case 23:Object(W.f)("Adjustment approved successfully!"),me(!1),ve(""),ne(null),Fe({canProceed:!0,message:""}),e.next=33;break;case 30:e.prev=30,e.t0=e.catch(18),Object(W.d)("Failed to approve adjustment: ".concat((null===(r=e.t0.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.message)||e.t0.message));case 33:return e.prev=33,ye(!1),Ce(null),e.finish(33);case 37:case"end":return e.stop()}}),e,null,[[18,30,33,37]])})));return function(){return e.apply(this,arguments)}}(),dt=function(){var e=Object(c.a)(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(se){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,ye(!0),Ce(se.id),e.next=7,R.a.reject(se.id,pe);case 7:Object(W.f)("Adjustment rejected"),le(!1),he(""),ne(null),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),Object(W.d)("Failed to reject adjustment: ".concat((null===(t=e.t0.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||e.t0.message));case 16:return e.prev=16,ye(!1),Ce(null),e.finish(16);case 20:case"end":return e.stop()}}),e,null,[[2,13,16,20]])})));return function(){return e.apply(this,arguments)}}(),ut=function(e){if(!e)return"N/A";var t=new Date(e);return"".concat(t.toLocaleDateString()," ").concat(t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},mt=[{name:"Name",selector:function(e){var t;return null===(t=e.product)||void 0===t?void 0:t.name},sortable:!0,minWidth:"400px",cell:function(e){var t,a,s,n=(null===(t=e.product)||void 0===t?void 0:t.name)||"N/A",c=null===(a=e.product)||void 0===a?void 0:a.image;null===(s=e.product)||void 0===s||s.link;return Object(U.jsxs)("div",{className:"d-flex align-items-center",children:[Object(U.jsx)(K.a,{img:c,className:"mr-2",imgHeight:32,imgWidth:32,onError:function(e){e.target.src="/static/images/placeholder.png"}}),Object(U.jsx)("a",{className:"text-dark",href:"".concat("http://localhost:3000","/product/").concat(n.replace(/\s+/g,"-").toLowerCase()),target:"_blank",rel:"noopener noreferrer",children:n})]})}},{name:"Requested By",selector:function(e){var t;return null===(t=e.user)||void 0===t?void 0:t.name},sortable:!0,minWidth:"180px",cell:function(e){var t,a;return Object(U.jsxs)("div",{children:[Object(U.jsxs)("div",{className:"d-flex align-items-center",children:[Object(U.jsx)(S.a,{size:14,className:"me-1 text-muted"}),Object(U.jsx)("span",{className:"text-truncate d-inline-block",style:{maxWidth:"140px"},children:(null===(t=e.user)||void 0===t?void 0:t.name)||"N/A"})]}),Object(U.jsx)("small",{className:"text-muted d-block text-truncate",style:{maxWidth:"180px"},children:(null===(a=e.user)||void 0===a?void 0:a.email)||""})]})}},{name:"Type",selector:function(e){return e.adjustment_type},sortable:!0,width:"120px",cell:function(e){return function(e,t){var a="type-badge-".concat(e,"-").concat(t);return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)(l.a,{id:a,color:"increase"===e?"success":"decrease"===e?"danger":"info",className:"text-uppercase",pill:!0,children:["increase"===e?Object(U.jsx)(w.a,{size:10}):"decrease"===e?Object(U.jsx)(A.a,{size:10}):Object(U.jsx)(C.a,{size:10}),Object(U.jsx)("span",{className:"ms-1",children:e})]}),Object(U.jsx)(o.a,{placement:"top",target:a,children:"increase"===e?"Increase stock":"decrease"===e?"Decrease stock":"Transfer stock"})]})}(e.adjustment_type,e.id)}},{name:"Location",width:"140px",cell:function(e){return e.is_transfer?Object(U.jsxs)("div",{className:"small",children:[Object(U.jsx)("div",{children:"Transfer"}),Object(U.jsx)("div",{className:"text-muted",children:"stock_available"===e.transfer_from_location?"Stock \u2192 Store":"Store \u2192 Stock"})]}):function(e){var t={total:{color:"primary",text:"Total"},stock_available:{color:"info",text:"Stock Available"},store_available:{color:"warning",text:"Store Available"},transfer:{color:"secondary",text:"Transfer"}}[e]||{color:"secondary",text:e};return Object(U.jsx)(l.a,{color:t.color,className:"text-capitalize",children:t.text})}(e.adjustment_location)}},{name:"Quantity",selector:function(e){return e.quantity},sortable:!0,width:"100px",cell:function(e){return Object(U.jsx)("div",{className:"fw-bold text-center",children:e.quantity})}},{name:"Stock Impact",minWidth:"200px",cell:function(e){if("approved"===e.status||"rejected"===e.status)return Object(U.jsxs)("div",{className:"small",children:[Object(U.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(U.jsx)("span",{className:"text-muted",children:"Stock Avail:"}),Object(U.jsx)("span",{children:"N/A"!==e.historical_stock_available_before?"".concat(e.historical_stock_available_before," \u2192 ").concat(e.historical_stock_available_after):"N/A \u2192 N/A"})]}),Object(U.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(U.jsx)("span",{className:"text-muted",children:"Store Avail:"}),Object(U.jsx)("span",{children:"N/A"!==e.historical_store_available_before?"".concat(e.historical_store_available_before," \u2192 ").concat(e.historical_store_available_after):"N/A \u2192 N/A"})]}),Object(U.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(U.jsx)("span",{className:"text-muted",children:"Total:"}),Object(U.jsx)("span",{className:"fw-bold",children:"N/A"!==e.historical_stock_before?"".concat(e.historical_stock_before," \u2192 ").concat(e.historical_stock_after):"N/A \u2192 N/A"})]})]});var t,a,s,n,c,r,i,l=it(e),o=lt(e);return Object(U.jsxs)("div",{className:"small",children:[Object(U.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(U.jsx)("span",{className:"text-muted",children:"Stock Avail:"}),Object(U.jsxs)("span",{className:"decrease"===e.adjustment_type&&"stock_available"===e.adjustment_location&&e.quantity>((null===(t=e.product)||void 0===t?void 0:t.current_stock_available)||0)?"text-danger fw-bold":"",children:[(null===(a=e.product)||void 0===a?void 0:a.current_stock_available)||0," \u2192 ",l.stockAvailAfter,"decrease"===e.adjustment_type&&"stock_available"===e.adjustment_location&&e.quantity>((null===(s=e.product)||void 0===s?void 0:s.current_stock_available)||0)&&Object(U.jsx)("span",{className:"ms-1",children:"\u26a0\ufe0f"})]})]}),Object(U.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(U.jsx)("span",{className:"text-muted",children:"Store Avail:"}),Object(U.jsxs)("span",{className:"decrease"===e.adjustment_type&&"store_available"===e.adjustment_location&&e.quantity>((null===(n=e.product)||void 0===n?void 0:n.current_store_available)||0)?"text-danger fw-bold":"",children:[(null===(c=e.product)||void 0===c?void 0:c.current_store_available)||0," \u2192 ",l.storeAvailAfter,"decrease"===e.adjustment_type&&"store_available"===e.adjustment_location&&e.quantity>((null===(r=e.product)||void 0===r?void 0:r.current_store_available)||0)&&Object(U.jsx)("span",{className:"ms-1",children:"\u26a0\ufe0f"})]})]}),Object(U.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(U.jsx)("span",{className:"text-muted",children:"Total:"}),Object(U.jsxs)("span",{className:o.canProceed?"fw-bold":"text-danger fw-bold",children:[(null===(i=e.product)||void 0===i?void 0:i.current_stock)||0," \u2192 ",l.totalAfter,!o.canProceed&&Object(U.jsx)("span",{className:"ms-1",children:"\u26a0\ufe0f"})]})]})]})}},{name:"Current Stock",minWidth:"150px",cell:function(e){var t,a,s,n,c,r=lt(e);return Object(U.jsxs)("div",{className:"small",children:[Object(U.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(U.jsx)("span",{className:"text-muted",children:"Stock Avail:"}),Object(U.jsx)("span",{className:"".concat("decrease"===e.adjustment_type&&"stock_available"===e.adjustment_location&&e.quantity>((null===(t=e.product)||void 0===t?void 0:t.current_stock_available)||0)?"text-danger fw-bold":"text-info fw-medium"),children:(null===(a=e.product)||void 0===a?void 0:a.current_stock_available)||0})]}),Object(U.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(U.jsx)("span",{className:"text-muted",children:"Store Avail:"}),Object(U.jsx)("span",{className:"".concat("decrease"===e.adjustment_type&&"store_available"===e.adjustment_location&&e.quantity>((null===(s=e.product)||void 0===s?void 0:s.current_store_available)||0)?"text-danger fw-bold":"text-warning fw-medium"),children:(null===(n=e.product)||void 0===n?void 0:n.current_store_available)||0})]}),Object(U.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(U.jsx)("span",{className:"text-muted",children:"Total:"}),Object(U.jsx)("span",{className:"".concat(r.canProceed?"fw-bold":"text-danger fw-bold"),children:(null===(c=e.product)||void 0===c?void 0:c.current_stock)||0})]})]})}},{name:"Status",selector:function(e){return e.status},sortable:!0,width:"130px",cell:function(e){return function(e,t){var a={pending:{color:"warning",icon:Object(U.jsx)(_.a,{size:12}),text:"Pending",tooltip:"Awaiting approval"},approved:{color:"success",icon:Object(U.jsx)(y.a,{size:12}),text:"Approved",tooltip:"Approved and processed"},rejected:{color:"danger",icon:Object(U.jsx)(k.a,{size:12}),text:"Rejected",tooltip:"Request was rejected"}}[e]||{color:"secondary",icon:null,text:e,tooltip:e},s="status-badge-".concat(e,"-").concat(t);return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)(l.a,{id:s,color:a.color,className:"d-flex align-items-center gap-1",pill:!0,children:[a.icon,Object(U.jsx)("span",{children:a.text})]}),Object(U.jsx)(o.a,{placement:"top",target:s,children:a.tooltip})]})}(e.status,e.id)}},{name:"Date",selector:function(e){return e.created_at},sortable:!0,width:"150px",cell:function(e){return Object(U.jsx)("div",{style:{whiteSpace:"nowrap"},children:Object(U.jsxs)("div",{className:"small d-flex align-items-center",children:[Object(U.jsx)(P.a,{size:10,className:"me-1 text-muted"}),ut(e.created_at)]})})}},{name:"Actions",minWidth:"fit-content",cell:function(e){var t=lt(e);return Object(U.jsx)("div",{className:"d-flex gap-1",children:"pending"===e.status?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(d.a,{id:"approve-btn-".concat(e.id),color:t.canProceed?"success":"secondary",size:"sm",onClick:function(){return function(e){ne(e);var t=lt(e);Fe(t),me(!0)}(e)},disabled:_e&&Ae===e.id,className:"d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px"},children:_e&&Ae===e.id?Object(U.jsx)(u.a,{size:"sm"}):Object(U.jsx)(U.Fragment,{children:t.canProceed?Object(U.jsx)(T.a,{size:14}):Object(U.jsx)(_.a,{size:14})})}),Object(U.jsx)(o.a,{placement:"top",target:"approve-btn-".concat(e.id),children:t.canProceed?"Approve this request":"Cannot approve - insufficient stock"}),Object(U.jsx)(d.a,{id:"reject-btn-".concat(e.id),color:"danger",size:"sm",onClick:function(){return ne(e),void le(!0)},disabled:_e&&Ae===e.id,className:"d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px"},children:_e&&Ae===e.id?Object(U.jsx)(u.a,{size:"sm"}):Object(U.jsx)(E.a,{size:14})}),Object(U.jsx)(o.a,{placement:"top",target:"reject-btn-".concat(e.id),children:"Reject this request"})]}):Object(U.jsx)(d.a,{color:"light",size:"sm",disabled:!0,className:"text-muted",children:"approved"===e.status?"Approved":"Rejected"})})}}],jt=function(){Ie(""),He(null),Ye(""),at(""),Ue("all")},bt=[{value:"all",label:"All Status"},{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"}];if(!Te)return Object(U.jsx)(m.a,{children:Object(U.jsxs)(j.a,{className:"text-center py-5",children:[Object(U.jsxs)(b.a,{color:"danger",className:"mb-4",children:[Object(U.jsx)(_.a,{size:24,className:"me-2"}),Object(U.jsx)("h4",{children:"Access Denied"}),Object(U.jsx)("p",{children:"Only administrators, super users, and stock managers can access this page."})]}),Object(U.jsx)(d.a,{color:"primary",href:"/stock-adjustments/request",children:"Go to Request Page"})]})});var pt=function(){return Object(U.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-3",children:[Object(U.jsx)("select",{className:"form-select form-select-sm",style:{width:"120px"},value:Ke,onChange:function(e){return Ue(e.target.value)},children:bt.map((function(e){return Object(U.jsx)("option",{value:e.value,children:e.label},e.value)}))}),Object(U.jsx)(p.a,{type:"date",value:Xe||"",onChange:function(e){return Ye(e.target.value)},className:"form-control-sm",style:{width:"130px"},placeholder:"Start date"}),Object(U.jsx)(p.a,{type:"date",value:tt||"",onChange:function(e){return at(e.target.value)},className:"form-control-sm",style:{width:"130px"},placeholder:"End date"}),(Re||Qe||Xe||tt||"all"!==Ke)&&Object(U.jsx)(d.a,{color:"secondary",size:"sm",onClick:jt,className:"d-flex align-items-center",children:Object(U.jsx)(z.a,{size:14})})]})};return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)(m.a,{children:[Object(U.jsx)(h.a,{children:Object(U.jsx)("h4",{className:"mb-0",children:"Stock Adjustment Approvals"})}),Object(U.jsxs)(j.a,{children:[Object(U.jsx)(pt,{}),Object(U.jsx)(D.a,{useDatatable:B.a,columns:mt,title:"",hasSearch:!0,conditions:{status:Ke,user_id:(null===Qe||void 0===Qe?void 0:Qe.value)||""},dateRange:{startDate:Xe,endDate:tt},isSticky:!0,initialOrder:{column:"created_at",dir:"desc"}})]})]}),Object(U.jsxs)(x.a,{isOpen:ue,toggle:function(){return!_e&&me(!1)},children:[Object(U.jsxs)(f.a,{toggle:function(){return!_e&&me(!1)},children:[Object(U.jsx)(y.a,{size:20,className:"me-2 text-success"}),"Approve Stock Adjustment"]}),Object(U.jsx)(O.a,{children:se&&Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)("div",{className:"mb-3",children:[Object(U.jsx)("h6",{children:"Adjustment Details"}),Object(U.jsxs)(v.a,{className:"mb-2 align-items-center",children:[Object(U.jsx)(g.a,{sm:"3",className:"text-muted",children:"Product:"}),Object(U.jsx)(g.a,{sm:"9",children:Object(U.jsxs)("div",{className:"d-flex align-items-center",children:[(null===(e=se.product)||void 0===e?void 0:e.image)?Object(U.jsx)("img",{src:se.product.image,alt:(null===(t=se.product)||void 0===t?void 0:t.name)||"Product",height:"50",width:"50",className:"rounded me-3",style:{objectFit:"cover"},onError:function(e){e.target.src="/static/images/placeholder.png",e.target.onerror=null}}):Object(U.jsx)("div",{className:"rounded me-3 d-flex align-items-center justify-content-center",style:{height:"50px",width:"50px",backgroundColor:"#f8f9fa",color:"#6c757d"},children:Object(U.jsx)(M.a,{size:24})}),Object(U.jsxs)("div",{children:[Object(U.jsx)("strong",{className:"d-block",children:(null===(a=se.product)||void 0===a?void 0:a.name)||"N/A"}),Object(U.jsxs)("div",{className:"small text-muted",children:["SKU: ",(null===(s=se.product)||void 0===s?void 0:s.sku)||"N/A"]}),void 0!==(null===(G=se.product)||void 0===G?void 0:G.current_stock)&&Object(U.jsxs)("div",{className:"small text-muted",children:["Current Total Stock: ",Object(U.jsx)("span",{className:"fw-bold",children:se.product.current_stock})]})]})]})})]}),Object(U.jsxs)(v.a,{className:"mb-2",children:[Object(U.jsx)(g.a,{sm:"4",className:"text-muted",children:"Requested By:"}),Object(U.jsxs)(g.a,{sm:"8",children:[Object(U.jsx)("div",{children:(null===(J=se.user)||void 0===J?void 0:J.name)||"N/A"}),Object(U.jsx)("div",{className:"small text-muted",children:(null===(Q=se.user)||void 0===Q?void 0:Q.email)||""})]})]}),Object(U.jsxs)(v.a,{className:"mb-2",children:[Object(U.jsx)(g.a,{sm:"4",className:"text-muted",children:"Adjustment:"}),Object(U.jsxs)(g.a,{sm:"8",children:[Object(U.jsxs)(l.a,{color:"increase"===se.adjustment_type?"success":"decrease"===se.adjustment_type?"danger":"info",children:[se.adjustment_type," ",se.quantity," units"]}),se.is_transfer&&Object(U.jsx)("div",{className:"small text-muted mt-1",children:"stock_available"===se.transfer_from_location?"Stock \u2192 Store":"Store \u2192 Stock"})]})]}),Object(U.jsx)("hr",{className:"my-2"}),Object(U.jsx)("h6",{className:"mt-3",children:"Stock Changes"}),Object(U.jsxs)(v.a,{className:"mb-2",children:[Object(U.jsx)(g.a,{sm:"4",className:"text-muted",children:"Current Stock:"}),Object(U.jsxs)(g.a,{sm:"8",children:[Object(U.jsx)("div",{className:"mb-1",children:Object(U.jsxs)("div",{className:"d-flex align-items-center",children:[Object(U.jsx)("div",{className:"rounded-circle bg-info",style:{width:"8px",height:"8px",marginRight:"8px"}}),Object(U.jsx)(q.a,{size:12,className:"me-1 text-info"}),Object(U.jsx)("span",{className:"text-muted small",children:"Stock Available:"}),Object(U.jsx)("span",{className:"fw-medium ms-2 small text-info",children:(null===(H=se.product)||void 0===H?void 0:H.current_stock_available)||0})]})}),Object(U.jsx)("div",{className:"mb-1",children:Object(U.jsxs)("div",{className:"d-flex align-items-center",children:[Object(U.jsx)("div",{className:"rounded-circle bg-warning",style:{width:"8px",height:"8px",marginRight:"8px"}}),Object(U.jsx)(F.a,{size:12,className:"me-1 text-warning"}),Object(U.jsx)("span",{className:"text-muted small",children:"Store Available:"}),Object(U.jsx)("span",{className:"fw-medium ms-2 small text-warning",children:(null===(V=se.product)||void 0===V?void 0:V.current_store_available)||0})]})}),Object(U.jsx)("div",{children:Object(U.jsxs)("div",{className:"d-flex align-items-center",children:[Object(U.jsx)("div",{className:"rounded-circle bg-primary",style:{width:"8px",height:"8px",marginRight:"8px"}}),Object(U.jsx)(M.a,{size:12,className:"me-1 text-primary"}),Object(U.jsx)("span",{className:"text-muted small",children:"Total:"}),Object(U.jsx)("span",{className:"fw-bold ms-2 small",children:(null===($=se.product)||void 0===$?void 0:$.current_stock)||0})]})})]})]}),Object(U.jsxs)(v.a,{className:"mb-2",children:[Object(U.jsx)(g.a,{sm:"4",className:"text-muted",children:"After Adjustment:"}),Object(U.jsx)(g.a,{sm:"8",children:function(){var e,t,a,s,n,c,r=it(se),i="increase"===se.adjustment_type,l="decrease"===se.adjustment_type,o="transfer"===se.adjustment_type,u=function(e){if(!e||!e.product)return(null===e||void 0===e?void 0:e.quantity)||0;var t=e.product.current_stock_available||0,a=e.product.current_store_available||0,s=e.quantity;if("decrease"===e.adjustment_type){var n=0;switch(e.adjustment_location){case"total":n=t+a;break;case"stock_available":n=t;break;case"store_available":n=a;break;default:return s}return Math.min(s,n)}if("transfer"===e.adjustment_type){var c=0;return"stock_available"===e.transfer_from_location?c=t:"store_available"===e.transfer_from_location&&(c=a),Math.min(s,c)}return s}(se),m=se.quantity>u;return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("div",{className:"mb-1",children:Object(U.jsxs)("div",{className:"d-flex align-items-center",children:[Object(U.jsx)("div",{className:"rounded-circle bg-info",style:{width:"8px",height:"8px",marginRight:"8px"}}),Object(U.jsx)(q.a,{size:12,className:"me-1 text-info"}),Object(U.jsx)("span",{className:"text-muted small",children:"Stock Available:"}),Object(U.jsxs)("span",{className:"fw-bold ms-2 small ".concat(m&&"decrease"===se.adjustment_type&&"stock_available"===se.adjustment_location?"text-danger":i?"text-success":l?"text-danger":o?"text-info":""),children:[r.stockAvailAfter,r.stockAvailAfter!==(null===(e=se.product)||void 0===e?void 0:e.current_stock_available)&&Object(U.jsxs)("span",{className:"ms-1",children:["(",i?"+":l?"-":"",Math.abs(r.stockAvailAfter-((null===(t=se.product)||void 0===t?void 0:t.current_stock_available)||0)),")"]}),m&&"decrease"===se.adjustment_type&&"stock_available"===se.adjustment_location&&Object(U.jsx)("span",{className:"ms-1",children:"\u26a0\ufe0f"})]})]})}),Object(U.jsx)("div",{className:"mb-1",children:Object(U.jsxs)("div",{className:"d-flex align-items-center",children:[Object(U.jsx)("div",{className:"rounded-circle bg-warning",style:{width:"8px",height:"8px",marginRight:"8px"}}),Object(U.jsx)(F.a,{size:12,className:"me-1 text-warning"}),Object(U.jsx)("span",{className:"text-muted small",children:"Store Available:"}),Object(U.jsxs)("span",{className:"fw-bold ms-2 small ".concat(m&&"decrease"===se.adjustment_type&&"store_available"===se.adjustment_location?"text-danger":i?"text-success":l?"text-danger":o?"text-info":""),children:[r.storeAvailAfter,r.storeAvailAfter!==(null===(a=se.product)||void 0===a?void 0:a.current_store_available)&&Object(U.jsxs)("span",{className:"ms-1",children:["(",i?"+":l?"-":"",Math.abs(r.storeAvailAfter-((null===(s=se.product)||void 0===s?void 0:s.current_store_available)||0)),")"]}),m&&"decrease"===se.adjustment_type&&"store_available"===se.adjustment_location&&Object(U.jsx)("span",{className:"ms-1",children:"\u26a0\ufe0f"})]})]})}),Object(U.jsx)("div",{children:Object(U.jsxs)("div",{className:"d-flex align-items-center",children:[Object(U.jsx)("div",{className:"rounded-circle bg-primary",style:{width:"8px",height:"8px",marginRight:"8px"}}),Object(U.jsx)(M.a,{size:12,className:"me-1 text-primary"}),Object(U.jsx)("span",{className:"text-muted small",children:"Total:"}),Object(U.jsxs)("span",{className:"fw-bold ms-2 small ".concat(m?"text-danger":i?"text-success":l?"text-danger":o?"text-info":""),children:[r.totalAfter,r.totalAfter!==(null===(n=se.product)||void 0===n?void 0:n.current_stock)&&Object(U.jsxs)("span",{className:"ms-1",children:["(",i?"+":l?"-":"",Math.abs(r.totalAfter-((null===(c=se.product)||void 0===c?void 0:c.current_stock)||0)),")"]}),m&&Object(U.jsx)("span",{className:"ms-1",children:"\u26a0\ufe0f"})]})]})}),!1===qe.canProceed&&Object(U.jsx)(b.a,{color:"danger",className:"mt-3",children:Object(U.jsxs)("div",{className:"d-flex align-items-start",children:[Object(U.jsx)(_.a,{size:16,className:"me-2 mt-1"}),Object(U.jsxs)("div",{children:[Object(U.jsx)("strong",{children:"\u26a0\ufe0f Cannot Approve:"})," ",qe.message,Object(U.jsx)("div",{className:"mt-2",children:Object(U.jsxs)("small",{children:[Object(U.jsxs)("div",{children:["Maximum allowed: ",Object(U.jsx)("strong",{children:qe.maxAllowed})," units"]}),Object(U.jsxs)("div",{children:["Requested: ",Object(U.jsx)("strong",{children:se.quantity})," units"]}),Object(U.jsx)("div",{className:"mt-1 text-danger",children:Object(U.jsx)("em",{children:"This adjustment cannot be approved with the current stock levels."})})]})})]})]})}),qe.canProceed&&qe.warning&&Object(U.jsx)(b.a,{color:"warning",className:"mt-3",children:Object(U.jsxs)("div",{className:"d-flex align-items-start",children:[Object(U.jsx)(_.a,{size:16,className:"me-2 mt-1"}),Object(U.jsxs)("div",{children:[Object(U.jsx)("strong",{children:"\u26a0\ufe0f Warning:"})," ",qe.message,Object(U.jsx)("div",{className:"mt-2",children:Object(U.jsx)("small",{children:Object(U.jsx)("em",{children:"This adjustment may leave stock at critically low levels. Please verify before approving."})})})]})]})}),"decrease"===se.adjustment_type&&qe.canProceed&&!qe.warning&&function(){var e,t=((null===(e=se.product)||void 0===e?void 0:e.current_stock)||0)-se.quantity;return t<=5?Object(U.jsx)(b.a,{color:"warning",className:"mt-3",children:Object(U.jsxs)("div",{className:"d-flex align-items-start",children:[Object(U.jsx)(_.a,{size:16,className:"me-2 mt-1"}),Object(U.jsxs)("div",{children:[Object(U.jsx)("strong",{children:"\u26a0\ufe0f Low Stock Warning:"})," After this adjustment, total stock will be reduced to ",Object(U.jsx)("strong",{children:t})," units.",Object(U.jsx)("div",{className:"mt-2",children:Object(U.jsx)("small",{children:Object(U.jsx)("em",{children:"Consider if this is acceptable for your inventory levels."})})})]})]})}):null}(),o&&Object(U.jsx)("div",{className:"mt-2 p-2 bg-light rounded",children:Object(U.jsxs)("div",{className:"small text-center",children:[Object(U.jsx)(C.a,{size:12,className:"me-1"}),"Transferring ",se.quantity," units from"," ","stock_available"===se.transfer_from_location?"Stock Available":"Store Available"," to"," ","stock_available"===se.transfer_to_location?"Stock Available":"Store Available"]})}),m&&qe.maxAllowed&&qe.maxAllowed>0&&Object(U.jsx)("div",{className:"mt-2",children:Object(U.jsxs)(d.a,{color:"info",size:"sm",className:"d-flex align-items-center",onClick:function(){Object(W.e)("Maximum safe quantity: ".concat(qe.maxAllowed," units\n\nPlease reject this request and ask the user to resubmit with a valid quantity."),{position:"top-center",autoClose:5e3})},children:[Object(U.jsx)(z.a,{size:14,className:"me-1"}),"Show Safe Quantity Limit"]})})]})}()})]}),se.reason&&Object(U.jsxs)(v.a,{className:"mt-3",children:[Object(U.jsx)(g.a,{sm:"4",className:"text-muted",children:"Reason:"}),Object(U.jsx)(g.a,{sm:"8",children:Object(U.jsx)("div",{className:"bg-light p-2 rounded small",children:se.reason})})]})]})})}),Object(U.jsxs)(N.a,{children:[Object(U.jsx)(d.a,{color:qe.canProceed?"success":"secondary",onClick:ot,disabled:_e||!qe.canProceed,className:"d-flex align-items-center",children:_e?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(u.a,{size:"sm",className:"me-2"}),"Processing..."]}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(T.a,{size:14,className:"me-1"}),qe.canProceed?"Approve Adjustment":"Cannot Approve"]})}),Object(U.jsx)(d.a,{color:"secondary",onClick:function(){me(!1),Fe({canProceed:!0,message:""})},disabled:_e,children:"Cancel"})]})]}),Object(U.jsxs)(x.a,{isOpen:ie,toggle:function(){return!_e&&le(!1)},children:[Object(U.jsxs)(f.a,{toggle:function(){return!_e&&le(!1)},children:[Object(U.jsx)(k.a,{size:20,className:"me-2 text-danger"}),"Reject Stock Adjustment"]}),Object(U.jsx)(O.a,{children:se&&Object(U.jsx)(U.Fragment,{children:Object(U.jsxs)("div",{className:"mb-3",children:[Object(U.jsx)("h6",{children:"Adjustment Details"}),Object(U.jsxs)(v.a,{className:"mb-2",children:[Object(U.jsx)(g.a,{sm:"4",className:"text-muted",children:"Product:"}),Object(U.jsxs)(g.a,{sm:"8",children:[Object(U.jsx)("strong",{children:(null===(X=se.product)||void 0===X?void 0:X.name)||"N/A"}),Object(U.jsxs)("div",{className:"small text-muted",children:["SKU: ",(null===(Y=se.product)||void 0===Y?void 0:Y.sku)||"N/A"]})]})]}),Object(U.jsxs)(v.a,{className:"mb-2",children:[Object(U.jsx)(g.a,{sm:"4",className:"text-muted",children:"Requested By:"}),Object(U.jsxs)(g.a,{sm:"8",children:[Object(U.jsx)("div",{children:(null===(Z=se.user)||void 0===Z?void 0:Z.name)||"N/A"}),Object(U.jsx)("div",{className:"small text-muted",children:(null===(ee=se.user)||void 0===ee?void 0:ee.email)||""})]})]}),Object(U.jsxs)(v.a,{className:"mb-2",children:[Object(U.jsx)(g.a,{sm:"4",className:"text-muted",children:"Adjustment:"}),Object(U.jsxs)(g.a,{sm:"8",children:[Object(U.jsxs)(l.a,{color:"increase"===se.adjustment_type?"success":"decrease"===se.adjustment_type?"danger":"info",children:[se.adjustment_type," ",se.quantity," units"]}),se.is_transfer&&Object(U.jsx)("div",{className:"small text-muted mt-1",children:"stock_available"===se.transfer_from_location?"Stock \u2192 Store":"Store \u2192 Stock"})]})]}),function(){var e=lt(se);return e.canProceed?null:Object(U.jsx)(b.a,{color:"info",className:"mt-3",children:Object(U.jsxs)("div",{className:"d-flex align-items-start",children:[Object(U.jsx)(_.a,{size:16,className:"me-2 mt-1"}),Object(U.jsxs)("div",{children:[Object(U.jsx)("strong",{children:"Stock Issue Detected:"})," This request cannot be approved due to insufficient stock.",Object(U.jsx)("div",{className:"mt-1",children:Object(U.jsxs)("small",{children:['Consider rejecting with reason: "Insufficient stock - only ',e.maxAllowed,' units available"']})})]})]})})}()]})})}),Object(U.jsxs)(N.a,{children:[Object(U.jsx)(d.a,{color:"danger",onClick:dt,disabled:_e,className:"d-flex align-items-center",children:_e?Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(u.a,{size:"sm",className:"me-2"}),"Processing..."]}):Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(E.a,{size:14,className:"me-1"}),"Reject Adjustment"]})}),Object(U.jsx)(d.a,{color:"secondary",onClick:function(){return le(!1)},disabled:_e,children:"Cancel"})]})]})]})}}}]);
//# sourceMappingURL=183.eecc8dfe.chunk.js.map
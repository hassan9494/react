(this["webpackJsonpvuexy-react-admin-dashboard"]=this["webpackJsonpvuexy-react-admin-dashboard"]||[]).push([[165],{169:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return u}));var n=a(64),r=a.n(n),c=a(65),s=a(305),o=a.n(s),i=a(179),l=a.n(i)()(o.a),d=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.fire({title:"Are you sure?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, do it!",customClass:{confirmButton:"btn btn-primary",cancelButton:"btn btn-outline-danger ml-1"},buttonsStyling:!1}).then((function(e){e.value&&t()}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.fire({title:"Are you sure want to delete?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",customClass:{confirmButton:"btn btn-danger",cancelButton:"btn btn-outline-danger ml-1"},buttonsStyling:!1}).then((function(e){e.value&&t()}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},301:function(e,t,a){"use strict";var n=a(4),r=a(5),c=a(21),s=a(19),o=a(0),i=a.n(o),l=a(1),d=a.n(l),u=a(11),b=a.n(u),f=a(12),j={children:d.a.node,type:d.a.string,size:d.a.oneOfType([d.a.number,d.a.string]),bsSize:d.a.string,valid:d.a.bool,invalid:d.a.bool,tag:f.q,innerRef:d.a.oneOfType([d.a.object,d.a.func,d.a.string]),plaintext:d.a.bool,addon:d.a.bool,className:d.a.string,cssModule:d.a.object},m=function(e){function t(t){var a;return(a=e.call(this,t)||this).getRef=a.getRef.bind(Object(c.a)(a)),a.focus=a.focus.bind(Object(c.a)(a)),a}Object(s.a)(t,e);var a=t.prototype;return a.getRef=function(e){this.props.innerRef&&this.props.innerRef(e),this.ref=e},a.focus=function(){this.ref&&this.ref.focus()},a.render=function(){var e=this.props,t=e.className,a=e.cssModule,c=e.type,s=e.bsSize,o=e.valid,l=e.invalid,d=e.tag,u=e.addon,j=e.plaintext,m=e.innerRef,p=Object(r.a)(e,["className","cssModule","type","bsSize","valid","invalid","tag","addon","plaintext","innerRef"]),h=["radio","checkbox"].indexOf(c)>-1,v=new RegExp("\\D","g"),x=d||("select"===c||"textarea"===c?c:"input"),O="form-control";j?(O+="-plaintext",x=d||"input"):"file"===c?O+="-file":"range"===c?O+="-range":h&&(O=u?null:"form-check-input"),p.size&&v.test(p.size)&&(Object(f.t)('Please use the prop "bsSize" instead of the "size" to bootstrap\'s input sizing.'),s=p.size,delete p.size);var g=Object(f.m)(b()(t,l&&"is-invalid",o&&"is-valid",!!s&&"form-control-"+s,O),a);return("input"===x||d&&"function"===typeof d)&&(p.type=c),p.children&&!j&&"select"!==c&&"string"===typeof x&&"select"!==x&&(Object(f.t)('Input with a type of "'+c+'" cannot have children. Please use "value"/"defaultValue" instead.'),delete p.children),i.a.createElement(x,Object(n.a)({},p,{ref:m,className:g,"aria-invalid":l}))},t}(i.a.Component);m.propTypes=j,m.defaultProps={type:"text"},t.a=m},307:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"d",(function(){return u})),a.d(t,"b",(function(){return b})),a.d(t,"c",(function(){return f})),a.d(t,"f",(function(){return j})),a.d(t,"e",(function(){return m}));var n=a(2),r=a(64),c=a.n(r),s=a(65),o=a(85),i=a(77),l=function(e){return i.a.get(e).then((function(e){var t;return null===(t=e.data)||void 0===t?void 0:t.data}))},d={create:function(){var e=Object(s.a)(c.a.mark((function e(t){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("product",t);case 2:return a=e.sent,n=a.data,e.abrupt("return",null===n||void 0===n?void 0:n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(){var e=Object(s.a)(c.a.mark((function e(t,a){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.put("product/".concat(t),a);case 2:return n=e.sent,r=n.data,e.abrupt("return",null===r||void 0===r?void 0:r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),show:function(){var e=Object(s.a)(c.a.mark((function e(t){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("product/".concat(t));case 2:return a=e.sent,n=a.data,e.abrupt("return",null===n||void 0===n?void 0:n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),delete:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.delete("product/".concat(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),restore:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("restore_product/".concat(t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),autocomplete:function(){var e=Object(s.a)(c.a.mark((function e(t){var a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.get("product/autocomplete?q=".concat(t));case 2:return a=e.sent,n=a.data,e.abrupt("return",null===n||void 0===n?void 0:n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),stock:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("product/stock",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sku:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("product/sku",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),stock2:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("product/stock2",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),stock3:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.a.post("product/stock3",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function u(e){var t=Object(o.a)("product/".concat(e),l,{revalidateOnFocus:!1}),a=t.data,n=t.mutate,r=t.error;return{loading:!a&&!r,error:r,data:a,mutate:n,update:function(){var t=Object(s.a)(c.a.mark((function t(a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.update(e,a);case 2:return t.next=4,n();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}function b(e){var t=e.page,a=e.limit,r=e.search,i=e.order,u=void 0===i?{}:i,b=e.conditions,f=void 0===b?{}:b,j="product/datatable?page=".concat(t,"&limit=").concat(a,"&search=").concat(r,"&order=").concat(JSON.stringify(u),"&conditions=").concat(JSON.stringify(f)),m=Object(o.a)(j,l),p=m.data,h=m.mutate,v=m.error,x=!p&&!v,O={delete:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.delete(t);case 2:h(Object(n.a)({},p));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};return{loading:x,error:v,data:(null===p||void 0===p?void 0:p.items)||[],total:(null===p||void 0===p?void 0:p.total)||0,mutates:O}}function f(e){var t=e.page,a=e.limit,r=e.search,i=e.order,u=void 0===i?{}:i,b="deletedProduct/datatable?page=".concat(t,"&limit=").concat(a,"&search=").concat(r,"&order=").concat(JSON.stringify(u)),f=Object(o.a)(b,l),j=f.data,m=f.mutate,p=f.error,h=!j&&!p,v={delete:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.delete(t);case 2:m(Object(n.a)({},j));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};return{loading:h,error:p,data:(null===j||void 0===j?void 0:j.items)||[],total:(null===j||void 0===j?void 0:j.total)||0,mutates:v}}function j(e){var t=e.page,a=e.limit,r=e.search,i=e.order,u=void 0===i?{}:i,b=e.conditions,f=void 0===b?{}:b,j="product/datatable?page=".concat(t,"&limit=").concat(a,"&search=").concat(r,"&order=").concat(JSON.stringify(u),"&conditions=").concat(JSON.stringify(f)),m=Object(o.a)(j,l),p=m.data,h=m.mutate,v=m.error,x=!p&&!v,O={delete:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.delete(t);case 2:h(Object(n.a)({},p));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};return{loading:x,error:v,data:(null===p||void 0===p?void 0:p.items)||[],total:(null===p||void 0===p?void 0:p.total)||0,mutates:O}}function m(e){var t=e.page,a=e.limit,n=e.search,r=e.order,c="product/datatable?page=".concat(t,"&limit=").concat(a,"&search=").concat(n,"&order=").concat(null===r||void 0===r?void 0:r.column,"&dir=").concat(null===r||void 0===r?void 0:r.direction),s=Object(o.a)(c,l),i=s.data,d=s.error;return{loading:!i&&!d,error:d,data:(null===i||void 0===i?void 0:i.items)||[],total:(null===i||void 0===i?void 0:i.total)||0}}},308:function(e,t,a){"use strict";var n=a(4),r=a(294),c=a(349),s=a(350),o=a(351),i=a(352),l=a(353),d=(a(370),a(0)),u=a.n(d),b=(a(9),a(358),a(357)),f=a(348),j=a(355),m=(a(371),a(359),a(372));function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Object(l.a)(e);if(t){var r=Object(l.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(i.a)(this,a)}}var x={cacheOptions:!1,defaultOptions:!1,filterOption:null,isLoading:!1},O=function(e){var t,a;return a=t=function(t){Object(o.a)(i,t);var a=v(i);function i(e){var t;return Object(c.a)(this,i),(t=a.call(this)).select=void 0,t.lastRequest=void 0,t.mounted=!1,t.handleInputChange=function(e,a){var n=t.props,c=n.cacheOptions,s=n.onInputChange,o=Object(b.e)(e,a,s);if(!o)return delete t.lastRequest,void t.setState({inputValue:"",loadedInputValue:"",loadedOptions:[],isLoading:!1,passEmptyOptions:!1});if(c&&t.state.optionsCache[o])t.setState({inputValue:o,loadedInputValue:o,loadedOptions:t.state.optionsCache[o],isLoading:!1,passEmptyOptions:!1});else{var i=t.lastRequest={};t.setState({inputValue:o,isLoading:!0,passEmptyOptions:!t.state.loadedInputValue},(function(){t.loadOptions(o,(function(e){t.mounted&&i===t.lastRequest&&(delete t.lastRequest,t.setState((function(t){return{isLoading:!1,loadedInputValue:o,loadedOptions:e||[],passEmptyOptions:!1,optionsCache:e?h(h({},t.optionsCache),{},Object(r.a)({},o,e)):t.optionsCache}})))}))}))}return o},t.state={defaultOptions:Array.isArray(e.defaultOptions)?e.defaultOptions:void 0,inputValue:"undefined"!==typeof e.inputValue?e.inputValue:"",isLoading:!0===e.defaultOptions,loadedOptions:[],passEmptyOptions:!1,optionsCache:{},prevDefaultOptions:void 0,prevCacheOptions:void 0},t}return Object(s.a)(i,[{key:"componentDidMount",value:function(){var e=this;this.mounted=!0;var t=this.props.defaultOptions,a=this.state.inputValue;!0===t&&this.loadOptions(a,(function(t){if(e.mounted){var a=!!e.lastRequest;e.setState({defaultOptions:t||[],isLoading:a})}}))}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"loadOptions",value:function(e,t){var a=this.props.loadOptions;if(!a)return t();var n=a(e,t);n&&"function"===typeof n.then&&n.then(t,(function(){return t()}))}},{key:"render",value:function(){var t=this,a=this.props,r=(a.loadOptions,a.isLoading),c=Object(j.a)(a,["loadOptions","isLoading"]),s=this.state,o=s.defaultOptions,i=s.inputValue,l=s.isLoading,d=s.loadedInputValue,b=s.loadedOptions,f=s.passEmptyOptions?[]:i&&d?b:o||[];return u.a.createElement(e,Object(n.a)({},c,{ref:function(e){t.select=e},options:f,isLoading:l||r,onInputChange:this.handleInputChange}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.cacheOptions!==t.prevCacheOptions?{prevCacheOptions:e.cacheOptions,optionsCache:{}}:{},n=e.defaultOptions!==t.prevDefaultOptions?{prevDefaultOptions:e.defaultOptions,defaultOptions:Array.isArray(e.defaultOptions)?e.defaultOptions:void 0}:{};return h(h({},a),n)}}]),i}(d.Component),t.defaultProps=x,a}(Object(m.a)(f.a));t.a=O},354:function(e,t,a){"use strict";var n=a(4),r=a(5),c=a(0),s=a.n(c),o=a(1),i=a.n(o),l=a(11),d=a.n(l),u=a(12),b=i.a.oneOfType([i.a.number,i.a.string]),f=i.a.oneOfType([i.a.bool,i.a.string,i.a.number,i.a.shape({size:b,order:b,offset:b})]),j={children:i.a.node,hidden:i.a.bool,check:i.a.bool,size:i.a.string,for:i.a.string,tag:u.q,className:i.a.string,cssModule:i.a.object,xs:f,sm:f,md:f,lg:f,xl:f,widths:i.a.array},m={tag:"label",widths:["xs","sm","md","lg","xl"]},p=function(e,t,a){return!0===a||""===a?e?"col":"col-"+t:"auto"===a?e?"col-auto":"col-"+t+"-auto":e?"col-"+a:"col-"+t+"-"+a},h=function(e){var t=e.className,a=e.cssModule,c=e.hidden,o=e.widths,i=e.tag,l=e.check,b=e.size,f=e.for,j=Object(r.a)(e,["className","cssModule","hidden","widths","tag","check","size","for"]),m=[];o.forEach((function(t,n){var r=e[t];if(delete j[t],r||""===r){var c,s=!n;if(Object(u.k)(r)){var o,i=s?"-":"-"+t+"-";c=p(s,t,r.size),m.push(Object(u.m)(d()(((o={})[c]=r.size||""===r.size,o["order"+i+r.order]=r.order||0===r.order,o["offset"+i+r.offset]=r.offset||0===r.offset,o))),a)}else c=p(s,t,r),m.push(c)}}));var h=Object(u.m)(d()(t,!!c&&"sr-only",!!l&&"form-check-label",!!b&&"col-form-label-"+b,m,!!m.length&&"col-form-label"),a);return s.a.createElement(i,Object(n.a)({htmlFor:f},j,{className:h}))};h.propTypes=j,h.defaultProps=m,t.a=h},416:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(1),s=a.n(c);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=Object(n.forwardRef)((function(e,t){var a=e.color,n=void 0===a?"currentColor":a,c=e.size,s=void 0===c?24:c,l=i(e,["color","size"]);return r.a.createElement("svg",o({ref:t,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),r.a.createElement("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),r.a.createElement("polyline",{points:"17 21 17 13 7 13 7 21"}),r.a.createElement("polyline",{points:"7 3 7 8 15 8"}))}));l.propTypes={color:s.a.string,size:s.a.oneOfType([s.a.string,s.a.number])},l.displayName="Save",t.a=l},563:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(1),s=a.n(c);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=Object(n.forwardRef)((function(e,t){var a=e.color,n=void 0===a?"currentColor":a,c=e.size,s=void 0===c?24:c,l=i(e,["color","size"]);return r.a.createElement("svg",o({ref:t,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),r.a.createElement("line",{x1:"18",y1:"20",x2:"18",y2:"10"}),r.a.createElement("line",{x1:"12",y1:"20",x2:"12",y2:"4"}),r.a.createElement("line",{x1:"6",y1:"20",x2:"6",y2:"14"}))}));l.propTypes={color:s.a.string,size:s.a.oneOfType([s.a.string,s.a.number])},l.displayName="BarChart2",t.a=l},585:function(e,t,a){"use strict";var n=a(64),r=a.n(n),c=a(65),s=a(8),o=(a(944),a(952)),i=a(955),l=a(943),d=a(55),u=a(414),b=a(404),f=a(405),j=a(406),m=a(111),p=a(0),h=a(22),v=a(169),x=a(69),O=a(622),g=a(606),k=a(429),y=a(77),N=a(3);t.a=function(e){var t=e.form,a=e.transferOrder,n=e.isEditMode,_=e.onStatusToggle,w=e.refetch,S=Object(p.useState)(null),A=Object(s.a)(S,2),C=A[0],D=A[1],z=Object(p.useState)(!1),P=Object(s.a)(z,2),E=P[0],T=P[1],I=Object(p.useState)(""),R=Object(s.a)(I,2),q=R[0],L=R[1],B=Object(p.useState)(!1),F=Object(s.a)(B,2),V=F[0],M=F[1],G=Object(p.useState)(""),U=Object(s.a)(G,2),W=U[0],J=U[1];Object(p.useEffect)((function(){a&&(D(a.status||"PENDING"),t&&t.setValue("status",a.status||"PENDING"))}),[a,t]);var Q=[{label:Object(N.jsxs)("div",{className:"d-flex align-items-center",children:[Object(N.jsx)(O.a,{size:16,className:"mr-2 text-warning"}),Object(N.jsx)("span",{children:"Pending"})]}),value:"PENDING"},{label:Object(N.jsxs)("div",{className:"d-flex align-items-center",children:[Object(N.jsx)(g.a,{size:16,className:"mr-2 text-success"}),Object(N.jsx)("span",{children:"Completed"})]}),value:"COMPLETED"}],Y=function(e){if(e){var n=e.value,r=(null===a||void 0===a?void 0:a.status)||"PENDING";n!==r&&(t&&t.setValue("status",n),D(n),"PENDING"===r&&"COMPLETED"===n?(L("complete"),T(!0)):"COMPLETED"===r&&"PENDING"===n&&(L("revert"),T(!0)))}},H=function(){var e=Object(c.a)(r.a.mark((function e(){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C){e.next=3;break}return h.b.error("Please select a status"),e.abrupt("return");case 3:if(s=(null===a||void 0===a?void 0:a.status)||"PENDING",C!==s){e.next=7;break}return h.b.info("Status is already set to ".concat(C)),e.abrupt("return");case 7:t&&n?Object(v.a)({title:"Update Status",text:"Are you sure you want to change status to ".concat(C,"?"),icon:"warning",confirmButtonText:"Yes, update it!",cancelButtonText:"Cancel"},Object(c.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!_){e.next=4;break}return e.next=4,_(C);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),h.b.error((null===(t=e.t0.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"An error occurred");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))):"PENDING"===s&&"COMPLETED"===C?(L("complete"),T(!0)):"COMPLETED"===s&&"PENDING"===C&&(L("revert"),T(!0));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(c.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),e.prev=1,e.next=4,y.a.post("/transfer-orders/".concat(a.id,"/toggle-status"),{notes:W||void 0});case 4:if(h.b.success("complete"===q?"Transfer order completed successfully":"Transfer order reverted to pending successfully"),T(!1),J(""),!_){e.next=10;break}return e.next=10,_();case 10:if(!w){e.next=13;break}return e.next=13,w();case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.error("Toggle status error:",e.t0),h.b.error((null===(t=e.t0.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to update transfer order status");case 19:return e.prev=19,M(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[1,15,19,22]])})));return function(){return e.apply(this,arguments)}}();return Object(N.jsxs)(o.a,{className:"invoice-action-wrapper",children:[Object(N.jsxs)(i.a,{children:[n&&Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(l.a,{children:t?Object(N.jsx)(x.a,{control:t.control,defaultValue:C,name:"status",render:function(e){var t=e.field,a=t.onChange,n=t.value,r=(t.name,t.ref);return Object(N.jsx)(m.a,{className:"react-select",classNamePrefix:"select",value:Q.find((function(e){return e.value===(n||C)})),options:Q,onChange:function(e){a((null===e||void 0===e?void 0:e.value)||null),Y(e)},ref:r})}}):Object(N.jsx)(m.a,{className:"react-select",classNamePrefix:"select",value:Q.find((function(e){return e.value===C})),options:Q,onChange:Y})}),Object(N.jsx)(d.a.Ripple,{color:"primary",block:!0,onClick:H,disabled:!C||C===(null===a||void 0===a?void 0:a.status),children:"Update Status"})]}),!n&&Object(N.jsxs)("div",{className:"mt-3",children:[(null===a||void 0===a?void 0:a.can_complete)&&Object(N.jsxs)(d.a.Ripple,{color:"success",className:"mt-2",block:!0,onClick:function(){L("complete"),T(!0)},children:[Object(N.jsx)(g.a,{size:14,className:"mr-1"}),"Complete Transfer"]}),(null===a||void 0===a?void 0:a.can_revert)&&Object(N.jsxs)(d.a.Ripple,{color:"warning",className:"mt-2",block:!0,onClick:function(){L("revert"),T(!0)},children:[Object(N.jsx)(k.a,{size:14,className:"mr-1"}),"Revert to Pending"]})]})]}),Object(N.jsxs)(u.a,{isOpen:E,toggle:function(){return T(!1)},children:[Object(N.jsx)(b.a,{toggle:function(){return T(!1)},children:"complete"===q?"Complete Transfer Order":"Revert to Pending"}),Object(N.jsx)(f.a,{children:"complete"===q?Object(N.jsx)(N.Fragment,{children:Object(N.jsx)("p",{children:"Are you sure you want to complete this transfer order?"})}):Object(N.jsx)(N.Fragment,{children:Object(N.jsx)("p",{children:"Are you sure you want to revert this transfer order to pending?"})})}),Object(N.jsxs)(j.a,{children:[Object(N.jsx)(d.a,{color:"secondary",onClick:function(){return T(!1)},children:"Cancel"}),Object(N.jsx)(d.a,{color:"complete"===q?"success":"warning",onClick:K,disabled:V,children:V?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("span",{className:"spinner-border spinner-border-sm mr-2"}),"Processing..."]}):"complete"===q?"Complete Transfer":"Revert to Pending"})]})]})]})}},586:function(e,t,a){"use strict";var n=a(2),r=a(8),c=a(0),s=a(944),o=a(560),i=a(323),l=a(321),d=a(801),u=a(831),b=a(403),f=a(606),j=a(622),m=a(605),p=a(547),h=a(428),v=a(3);t.a=function(e){var t=e.product,a=(e.transferOrderStatus,e.showLabels),x=void 0===a||a,O=e.compact,g=void 0!==O&&O,k=e.showTooltip,y=void 0===k||k,N=e.className,_=void 0===N?"":N,w=e.style,S=void 0===w?{}:w,A=Object(c.useState)(!1),C=Object(r.a)(A,2),D=C[0],z=C[1],P=(null===t||void 0===t?void 0:t.has_stock_history)||null!==(null===t||void 0===t?void 0:t.stock_before)&&void 0!==(null===t||void 0===t?void 0:t.stock_before)?{type:"historical",stockAvailBefore:t.stock_available_before||0,stockAvailAfter:t.stock_available_after||0,storeAvailBefore:t.store_available_before||0,storeAvailAfter:t.store_available_after||0,totalBefore:t.stock_before||0,totalAfter:t.stock_after||0,stockDiff:t.stock_available_difference||0,storeDiff:t.store_available_difference||0,totalDiff:t.stock_difference||0}:{type:"pending",stockAvailBefore:t.current_stock_available||0,stockAvailAfter:t.current_stock_available||0,storeAvailBefore:t.current_store_available||0,storeAvailAfter:t.current_store_available||0,totalBefore:(t.current_stock_available||0)+(t.current_store_available||0),totalAfter:(t.current_stock_available||0)+(t.current_store_available||0),stockDiff:0,storeDiff:0,totalDiff:0},E="historical"===P.type,T=function(e){return e>0?"success":e<0?"danger":"secondary"},I=function(e){return e>0?Object(v.jsx)(d.a,{size:10,className:"mr-1"}):e<0?Object(v.jsx)(u.a,{size:10,className:"mr-1"}):Object(v.jsx)(b.a,{size:10,className:"mr-1"})},R=function(e){return e>0?"+".concat(e):e<0?"".concat(e):"No change"};return g?Object(v.jsxs)("div",{className:"stock-impact-compact ".concat(_),style:S,id:"stock-impact-".concat((null===t||void 0===t?void 0:t.id)||"unknown"),children:[Object(v.jsxs)("div",{className:"d-flex flex-column",children:[Object(v.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[Object(v.jsx)("small",{className:"text-muted",children:"Stock:"}),Object(v.jsxs)("div",{className:"d-flex align-items-center",children:[Object(v.jsx)("span",{className:"font-weight-bold",children:P.stockAvailBefore}),E&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(m.a,{size:8,className:"mx-1 text-muted"}),Object(v.jsx)("span",{className:"font-weight-bold ".concat(P.stockDiff>0?"text-success":P.stockDiff<0?"text-danger":""),children:P.stockAvailAfter}),0!==P.stockDiff&&Object(v.jsx)(s.a,{color:T(P.stockDiff),className:"ml-1",pill:!0,style:{fontSize:"9px",padding:"2px 4px"},children:R(P.stockDiff)})]})]})]}),Object(v.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[Object(v.jsx)("small",{className:"text-muted",children:"Store:"}),Object(v.jsxs)("div",{className:"d-flex align-items-center",children:[Object(v.jsx)("span",{className:"font-weight-bold",children:P.storeAvailBefore}),E&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(m.a,{size:8,className:"mx-1 text-muted"}),Object(v.jsx)("span",{className:"font-weight-bold ".concat(P.storeDiff>0?"text-success":P.storeDiff<0?"text-danger":""),children:P.storeAvailAfter}),0!==P.storeDiff&&Object(v.jsx)(s.a,{color:T(P.storeDiff),className:"ml-1",pill:!0,style:{fontSize:"9px",padding:"2px 4px"},children:R(P.storeDiff)})]})]})]}),Object(v.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(v.jsx)("small",{className:"text-muted",children:"\u03a3:"}),Object(v.jsxs)("div",{className:"d-flex align-items-center",children:[Object(v.jsx)("span",{className:"font-weight-bold",children:P.totalBefore}),E&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(m.a,{size:8,className:"mx-1 text-muted"}),Object(v.jsx)("span",{className:"font-weight-bold ".concat(P.totalDiff>0?"text-success":P.totalDiff<0?"text-danger":""),children:P.totalAfter})]})]})]})]}),y&&Object(v.jsx)(o.a,{placement:"top",isOpen:D,target:"stock-impact-".concat((null===t||void 0===t?void 0:t.id)||"unknown"),toggle:function(){return z(!D)},children:E?"Actual stock changes after transfer completion":"Pending - No stock changes yet"})]}):Object(v.jsxs)("div",{className:"stock-impact-detailed p-3 ".concat(_),style:Object(n.a)({backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #e9ecef"},S),children:[x&&Object(v.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(v.jsxs)("div",{className:"d-flex align-items-center",children:[Object(v.jsx)(p.a,{size:16,className:"mr-2 text-primary"}),Object(v.jsx)("h6",{className:"mb-0",children:E?"Actual Stock Impact":"Current Stock Status"}),E?Object(v.jsxs)(s.a,{color:"success",className:"ml-2",pill:!0,children:[Object(v.jsx)(f.a,{size:10,className:"mr-1"}),"Completed"]}):Object(v.jsxs)(s.a,{color:"warning",className:"ml-2",pill:!0,children:[Object(v.jsx)(j.a,{size:10,className:"mr-1"}),"Pending"]})]}),y&&Object(v.jsx)(h.a,{size:14,className:"text-muted cursor-pointer",id:"stock-impact-info-".concat((null===t||void 0===t?void 0:t.id)||"unknown")})]}),Object(v.jsx)("div",{className:"stock-impact-row mb-2",children:Object(v.jsxs)(i.a,{className:"align-items-center",children:[Object(v.jsx)(l.a,{xs:4,children:Object(v.jsxs)("div",{className:"d-flex align-items-center",children:[Object(v.jsx)(p.a,{size:12,className:"mr-2 text-info"}),Object(v.jsx)("span",{className:"font-weight-bold",children:"Stock"})]})}),Object(v.jsx)(l.a,{xs:8,children:Object(v.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(v.jsxs)("div",{className:"d-flex align-items-center",children:[Object(v.jsx)("span",{className:"text-muted mr-2",children:"Before:"}),Object(v.jsx)("span",{className:"font-weight-bold",children:P.stockAvailBefore})]}),E&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(m.a,{size:12,className:"mx-2 text-muted"}),Object(v.jsxs)("div",{className:"d-flex align-items-center",children:[Object(v.jsx)("span",{className:"font-weight-bold ".concat(P.stockDiff>0?"text-success":P.stockDiff<0?"text-danger":""),children:P.stockAvailAfter}),0!==P.stockDiff&&Object(v.jsxs)(s.a,{color:T(P.stockDiff),className:"ml-2 d-flex align-items-center",pill:!0,children:[I(P.stockDiff),R(P.stockDiff)]})]})]})]})})]})}),Object(v.jsx)("div",{className:"stock-impact-row mb-2",children:Object(v.jsxs)(i.a,{className:"align-items-center",children:[Object(v.jsx)(l.a,{xs:4,children:Object(v.jsxs)("div",{className:"d-flex align-items-center",children:[Object(v.jsx)(p.a,{size:12,className:"mr-2 text-warning"}),Object(v.jsx)("span",{className:"font-weight-bold",children:"Store"})]})}),Object(v.jsx)(l.a,{xs:8,children:Object(v.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(v.jsxs)("div",{className:"d-flex align-items-center",children:[Object(v.jsx)("span",{className:"text-muted mr-2",children:"Before:"}),Object(v.jsx)("span",{className:"font-weight-bold",children:P.storeAvailBefore})]}),E&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(m.a,{size:12,className:"mx-2 text-muted"}),Object(v.jsxs)("div",{className:"d-flex align-items-center",children:[Object(v.jsx)("span",{className:"font-weight-bold ".concat(P.storeDiff>0?"text-success":P.storeDiff<0?"text-danger":""),children:P.storeAvailAfter}),0!==P.storeDiff&&Object(v.jsxs)(s.a,{color:T(P.storeDiff),className:"ml-2 d-flex align-items-center",pill:!0,children:[I(P.storeDiff),R(P.storeDiff)]})]})]})]})})]})}),Object(v.jsx)("div",{className:"stock-impact-row pt-2 border-top",children:Object(v.jsxs)(i.a,{className:"align-items-center",children:[Object(v.jsx)(l.a,{xs:4,children:Object(v.jsxs)("div",{className:"d-flex align-items-center",children:[Object(v.jsx)(p.a,{size:12,className:"mr-2 text-primary"}),Object(v.jsx)("span",{className:"font-weight-bold",children:"Total"})]})}),Object(v.jsx)(l.a,{xs:8,children:Object(v.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(v.jsxs)("div",{className:"d-flex align-items-center",children:[Object(v.jsx)("span",{className:"text-muted mr-2",children:"Before:"}),Object(v.jsx)("span",{className:"font-weight-bold",children:P.totalBefore})]}),E&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(m.a,{size:12,className:"mx-2 text-muted"}),Object(v.jsxs)("div",{className:"d-flex align-items-center",children:[Object(v.jsx)("span",{className:"font-weight-bold ".concat(P.totalDiff>0?"text-success":P.totalDiff<0?"text-danger":""),children:P.totalAfter}),0!==P.totalDiff&&Object(v.jsxs)(s.a,{color:T(P.totalDiff),className:"ml-2 d-flex align-items-center",pill:!0,children:[I(P.totalDiff),R(P.totalDiff)]})]})]})]})})]})}),Object(v.jsx)("div",{className:"mt-3 pt-3 border-top",children:Object(v.jsxs)("div",{className:"small text-muted",children:[Object(v.jsxs)("div",{className:"d-flex justify-content-between mb-1",children:[Object(v.jsx)("span",{children:"Quantity:"}),Object(v.jsx)("strong",{children:(null===t||void 0===t?void 0:t.quantity)||0})]}),Object(v.jsxs)("div",{className:"d-flex justify-content-between mb-1",children:[Object(v.jsx)("span",{children:"From:"}),Object(v.jsx)("span",{className:"text-capitalize",children:(null===t||void 0===t?void 0:t.from_location_label)||(null===t||void 0===t?void 0:t.from_location)||"stock_available"})]}),Object(v.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(v.jsx)("span",{children:"To:"}),Object(v.jsx)("span",{className:"text-capitalize",children:(null===t||void 0===t?void 0:t.to_location_label)||(null===t||void 0===t?void 0:t.to_location)||"store_available"})]})]})}),y&&Object(v.jsx)(o.a,{placement:"top",target:"stock-impact-info-".concat((null===t||void 0===t?void 0:t.id)||"unknown"),children:E?"Shows actual stock changes after transfer completion":"Shows current stock status (no changes yet)"})]})}},609:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(1),s=a.n(c);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=Object(n.forwardRef)((function(e,t){var a=e.color,n=void 0===a?"currentColor":a,c=e.size,s=void 0===c?24:c,l=i(e,["color","size"]);return r.a.createElement("svg",o({ref:t,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},l),r.a.createElement("polyline",{points:"3 6 5 6 21 6"}),r.a.createElement("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),r.a.createElement("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),r.a.createElement("line",{x1:"14",y1:"11",x2:"14",y2:"17"}))}));l.propTypes={color:s.a.string,size:s.a.oneOfType([s.a.string,s.a.number])},l.displayName="Trash2",t.a=l},84:function(e,t,a){"use strict";var n=a(76),r=a(172),c=a(173),s=a(3);t.a=function(e){var t=e.breadCrumbTitle,a=e.breadCrumbParent,o=e.breadCrumbParent2,i=e.breadCrumbParent3,l=e.breadCrumbActive,d=e.right;return Object(s.jsxs)("div",{className:"content-header row",children:[Object(s.jsx)("div",{className:"content-header-left col-9 mb-2",children:Object(s.jsx)("div",{className:"row breadcrumbs-top",children:Object(s.jsxs)("div",{className:"col-12",children:[t?Object(s.jsx)("h2",{className:"content-header-title float-left mb-0",children:t}):"",Object(s.jsx)("div",{className:"breadcrumb-wrapper vs-breadcrumbs d-sm-block d-none col-12",children:Object(s.jsxs)(r.a,{children:[Object(s.jsx)(c.a,{tag:"li",children:Object(s.jsx)(n.b,{to:"/",children:"Home"})}),a&&Object(s.jsx)(c.a,{tag:"li",className:"text-primary",children:a}),o?Object(s.jsx)(c.a,{tag:"li",className:"text-primary",children:o}):"",i?Object(s.jsx)(c.a,{tag:"li",className:"text-primary",children:i}):"",Object(s.jsx)(c.a,{tag:"li",active:!0,children:l})]})})]})})}),d?Object(s.jsx)("div",{className:"content-header-right text-md-right col-3",children:Object(s.jsx)("div",{className:"form-group breadcrum-right dropdown",children:d})}):""]})}},976:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return G}));var n=a(110),r=a(64),c=a.n(r),s=a(2),o=a(65),i=a(8),l=a(0),d=a(84),u=a(952),b=a(955),f=a(55),j=a(323),m=a(321),p=a(943),h=a(354),v=a(953),x=a(944),O=a(956),g=a(301),k=a(407),y=a(303),N=a(378),_=a(376),w=a(22),S=a(623),A=a(547),C=a(415),D=a(605),z=a(609),P=a(416),E=a(563),T=a(622),I=a(606),R=a(308),q=a(20),L=(a(585),a(77)),B=a(307),F=a(293),V=a(586),M=a(3);function G(){var e=Object(_.g)(),t=Object(l.useState)(!1),a=Object(i.a)(t,2),r=a[0],G=a[1],U=Object(l.useState)([]),W=Object(i.a)(U,2),J=W[0],Q=W[1],Y=Object(l.useState)(""),H=Object(i.a)(Y,2),K=H[0],X=H[1],Z=Object(l.useState)(null),$=Object(i.a)(Z,2),ee=$[0],te=$[1],ae=Object(l.useState)(!1),ne=Object(i.a)(ae,2),re=ne[0],ce=ne[1],se=Object(l.useState)({}),oe=Object(i.a)(se,2),ie=oe[0],le=oe[1],de=Object(l.useState)([]),ue=Object(i.a)(de,2),be=ue[0],fe=ue[1],je=Object(l.useRef)(new Map),me=Object(l.useState)(!0),pe=Object(i.a)(me,2),he=pe[0],ve=pe[1],xe=Object(l.useState)("stock_available"),Oe=Object(i.a)(xe,2),ge=Oe[0],ke=Oe[1],ye=Object(l.useState)("store_available"),Ne=Object(i.a)(ye,2),_e=Ne[0],we=Ne[1],Se=q.a.can("read","transfer_order_create"),Ae=(q.a.can("read","transfer_order_complete"),q.a.can("read","transfer_order_cancel"),(new Date).toISOString(),(new Date).toISOString(),function(){var e=Object(o.a)(c.a.mark((function e(){var t,a,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="initial",!je.current.has(t)){e.next=4;break}return fe(je.current.get(t)),e.abrupt("return");case 4:return e.prev=4,e.next=7,B.a.autocomplete("");case 7:a=e.sent,n=a.map((function(e){var t=e.stock||e.current_stock||e.quantity||0,a=e.stock_available||e.current_stock_available||0,n=e.store_available||e.current_store_available||0,r=e.sku||"N/A",c=e.name||"Unknown Product",o=e.image||"/static/images/placeholder.png";return{label:Object(M.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(M.jsx)("img",{src:o,alt:c,height:"32",width:"32",style:{marginRight:"10px",borderRadius:"4px"}}),Object(M.jsxs)("div",{children:[Object(M.jsx)("div",{style:{fontWeight:"bold"},children:c}),Object(M.jsxs)("div",{style:{fontSize:"12px",color:"#666"},children:["SKU: ",r," | Stock: ",t," | Stock Avail: ",a]})]})]}),value:e.id,item:Object(s.a)(Object(s.a)({},e),{},{id:e.id,stock:t,stock_available:a,store_available:n,name:c,sku:r,image:o,location:e.location||"N/A",stock_location:e.stock_location||"N/A"})}})),je.current.set(t,n),fe(n),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(4),console.error("Failed to load initial options:",e.t0),fe([]);case 17:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(){return e.apply(this,arguments)}}()),Ce=function(){var e=Object(o.a)(c.a.mark((function e(t){var a,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t||"empty",!je.current.has(a)){e.next=3;break}return e.abrupt("return",je.current.get(a));case 3:return e.prev=3,ce(!0),e.next=7,B.a.autocomplete(t);case 7:return n=e.sent,r=n.map((function(e){var t=e.stock||e.current_stock||e.quantity||0,a=e.stock_available||e.current_stock_available||0,n=e.store_available||e.current_store_available||0,r=e.sku||"N/A",c=e.name||"Unknown Product",o=e.image||"/static/images/placeholder.png";return{label:Object(M.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(M.jsx)("img",{src:o,alt:c,height:"32",width:"32",style:{marginRight:"10px",borderRadius:"4px"}}),Object(M.jsxs)("div",{children:[Object(M.jsx)("div",{style:{fontWeight:"bold"},children:c}),Object(M.jsxs)("div",{style:{fontSize:"12px",color:"#666"},children:["SKU: ",r," | Stock: ",t," | Stock Avail: ",a]})]})]}),value:e.id,item:Object(s.a)(Object(s.a)({},e),{},{id:e.id,stock:t,stock_available:a,store_available:n,name:c,sku:r,image:o,location:e.location||"N/A",stock_location:e.stock_location||"N/A"})}})),je.current.set(a,r),e.abrupt("return",r);case 13:return e.prev=13,e.t0=e.catch(3),console.error("Failed to load options:",e.t0),e.abrupt("return",[]);case 17:return e.prev=17,ce(!1),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[3,13,17,20]])})));return function(t){return e.apply(this,arguments)}}(),De=function(){var e=Object(o.a)(c.a.mark((function e(t){var a,n,r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.show(t);case 3:if(a=e.sent,n=a.stock_available,r=a.store_available,null!==n&&void 0!==n&&null!==r&&void 0!==r){e.next=19;break}return e.prev=7,e.next=10,L.a.get("/products/".concat(t,"/stock"));case 10:(o=e.sent).data&&o.data.data&&(n=o.data.data.stock_available||0,r=o.data.data.store_available||0),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(7),console.log("No separate stock endpoint, using fallback values"),n=a.stock_available||a.stock||0,r=a.store_available||0;case 19:return e.abrupt("return",Object(s.a)(Object(s.a)({},a),{},{id:a.id,stock:a.stock||0,stock_available:n,store_available:r,name:a.name||"Unknown Product",sku:a.sku||"N/A",image:a.image||"/static/images/placeholder.png",location:a.location||"N/A",stock_location:a.stock_location||"N/A"}));case 22:throw e.prev=22,e.t1=e.catch(0),console.error("Error getting product details:",e.t1),e.t1;case 26:case"end":return e.stop()}}),e,null,[[0,22],[7,14]])})));return function(t){return e.apply(this,arguments)}}(),ze=function(e){var t={};return e.forEach((function(e,a){if(e.product){var n="stock_available"===e.from_location?e.product.stock_available||0:e.product.store_available||0;parseInt(e.quantity||0)>n&&(t[a]="Insufficient stock. Available: ".concat(n))}})),le(t),0===Object.keys(t).length},Pe=function(){var e=Object(o.a)(c.a.mark((function e(t){var a,r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=26;break}if(!J.find((function(e){return e.product_id===t.value}))){e.next=6;break}return Object(F.d)("Product already added to transfer list"),te(null),e.abrupt("return");case 6:return e.prev=6,e.next=9,De(t.value);case 9:a=e.sent,r={product_id:t.value,product:a,from_location:ge,to_location:_e,quantity:1},Q((function(e){return[].concat(Object(n.a)(e),[r])})),te(null),Object(F.f)("Added ".concat(a.name," to transfer list")),ze([].concat(Object(n.a)(J),[r])),e.next=26;break;case 17:e.prev=17,e.t0=e.catch(6),console.error("Error in handleProductSelect:",e.t0),Object(F.d)("Failed to load product details. Please try again."),o={product_id:t.value,product:Object(s.a)(Object(s.a)({},t.item),{},{stock_available:t.item.stock||0,store_available:0}),from_location:"stock_available",to_location:"store_available",quantity:1},Q((function(e){return[].concat(Object(n.a)(e),[o])})),te(null),ze([].concat(Object(n.a)(J),[o])),Object(F.d)("Product added with estimated stock values. Please verify.");case 26:case"end":return e.stop()}}),e,null,[[6,17]])})));return function(t){return e.apply(this,arguments)}}(),Ee=function(e,t,a){Q((function(r){var c=Object(n.a)(r);if(c[e][t]=a,"from_location"===t)a===c[e].to_location&&(c[e].to_location="stock_available"===a?"store_available":"stock_available");else if("to_location"===t){if(a===c[e].from_location)return Object(F.d)("From and To locations cannot be the same"),r}else if("quantity"===t){var s,o,i=parseInt(a)||1;if(i<1)return c[e][t]=1,c;var l,d="stock_available"===c[e].from_location?(null===(s=c[e].product)||void 0===s?void 0:s.stock_available)||0:(null===(o=c[e].product)||void 0===o?void 0:o.store_available)||0;if(i>d)Object(F.d)("Cannot transfer more than available stock (".concat(d,") for ").concat(null===(l=c[e].product)||void 0===l?void 0:l.name)),c[e][t]=d>0?d:1;else c[e][t]=i}return ze(c),c}))},Te=function(e){var t=function(e){var t=e.product||{},a=t.stock_available||0,n=t.store_available||0,r=parseInt(e.quantity)||0,c=a,s=n;"stock_available"===e.from_location?c-=r:s-=r,"stock_available"===e.to_location?c+=r:s+=r;var o=a+n,i=c+s;return{currentStockAvailable:a,currentStoreAvailable:n,currentTotal:o,expectedStockAvailable:c,expectedStoreAvailable:s,expectedTotal:i,stockDifference:c-a,storeDifference:s-n,totalDifference:i-o}}(e);return Object(s.a)(Object(s.a)({},e),{},{stock_available_before:t.currentStockAvailable,stock_available_after:t.expectedStockAvailable,store_available_before:t.currentStoreAvailable,store_available_after:t.expectedStoreAvailable,stock_before:t.currentTotal,stock_after:t.expectedTotal,stock_available_difference:t.stockDifference,store_available_difference:t.storeDifference,stock_difference:t.totalDifference,has_stock_history:!1,current_stock_available:t.currentStockAvailable,current_store_available:t.currentStoreAvailable})},Ie=function(){return J.some((function(e){var t,a,n="stock_available"===e.from_location?(null===(t=e.product)||void 0===t?void 0:t.stock_available)||0:(null===(a=e.product)||void 0===a?void 0:a.store_available)||0;return parseInt(e.quantity||0)>n}))},Re=function(){return J.reduce((function(e,t){return e+(parseInt(t.quantity)||0)}),0)},qe=function(){var t=Object(o.a)(c.a.mark((function t(){var a,n,r,s,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Se){t.next=3;break}return w.b.error("You do not have permission to create transfer orders"),t.abrupt("return");case 3:if(J&&0!==J.length){t.next=6;break}return w.b.error("Please add at least one product"),t.abrupt("return");case 6:if(!Ie()){t.next=9;break}return w.b.error("Some products exceed available stock. Please fix before saving."),t.abrupt("return");case 9:return G(!0),t.prev=10,a={notes:K||"",products:J.map((function(e){return{product_id:e.product_id,from_location:e.from_location,to_location:e.to_location,quantity:parseInt(e.quantity)||1}}))},t.next=14,L.a.post("/transfer-orders",a);case 14:n=t.sent,r=n.data.data,w.b.success("Transfer order created successfully"),e.push("/transfer-order/edit/".concat(r.id)),t.next=24;break;case 20:t.prev=20,t.t0=t.catch(10),console.error("Create error:",t.t0),w.b.error((null===(s=t.t0.response)||void 0===s||null===(o=s.data)||void 0===o?void 0:o.message)||"Failed to create transfer order");case 24:return t.prev=24,G(!1),t.finish(24);case 27:case"end":return t.stop()}}),t,null,[[10,20,24,27]])})));return function(){return t.apply(this,arguments)}}();Object(l.useEffect)((function(){Ae()}),[]);var Le=function(){var e={stock_to_store:{count:0,quantity:0},store_to_stock:{count:0,quantity:0}};return J.forEach((function(t){"stock_available"===t.from_location&&"store_available"===t.to_location?(e.stock_to_store.count++,e.stock_to_store.quantity+=parseInt(t.quantity)||0):"store_available"===t.from_location&&"stock_available"===t.to_location&&(e.store_to_stock.count++,e.store_to_stock.quantity+=parseInt(t.quantity)||0)})),e}();return Object(M.jsxs)(l.Fragment,{children:[Object(M.jsx)(d.a,{breadCrumbTitle:"Transfer Orders",breadCrumbActive:"Create Transfer"}),Object(M.jsx)(u.a,{children:Object(M.jsxs)(b.a,{children:[Object(M.jsx)("div",{className:"mb-2",children:Object(M.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(M.jsxs)("div",{children:[Object(M.jsx)("h4",{className:"mb-0",children:"Create New Transfer Order"}),Object(M.jsx)("p",{className:"text-muted mb-0",children:"Transfer stock between locations"})]}),Object(M.jsx)("div",{children:Object(M.jsxs)(f.a,{color:"secondary",onClick:function(){e.push("/transfer-order/list")},className:"mr-2",children:[Object(M.jsx)(S.a,{size:14,className:"mr-1"}),"Back to List"]})})]})}),Object(M.jsxs)(j.a,{children:[Object(M.jsx)(m.a,{md:8,sm:12,children:Object(M.jsx)(u.a,{className:"mb-2",children:Object(M.jsxs)(b.a,{children:[Object(M.jsxs)("h5",{className:"mb-2",children:[Object(M.jsx)(A.a,{size:18,className:"mr-2"}),"Transfer Details"]}),Object(M.jsxs)(p.a,{children:[Object(M.jsx)(h.a,{for:"product-search",children:"Search Product to Add"}),Object(M.jsx)(R.a,{id:"product-search",isClearable:!0,className:"react-select",classNamePrefix:"select",value:ee?{value:ee.id,label:ee.name,item:ee}:null,loadOptions:Ce,defaultOptions:be,cacheOptions:!0,onChange:Pe,placeholder:"Search for products to add...",isLoading:re,noOptionsMessage:function(e){var t=e.inputValue;return t&&""!==t.trim()?re?"Searching...":"No products found":"Start typing to search products"},filterOption:null,formatOptionLabel:function(e,t){return"menu"===t.context?e.label:e.item?e.item.name:e.label},styles:{control:function(e){return Object(s.a)(Object(s.a)({},e),{},{minHeight:"42px"})},menu:function(e){return Object(s.a)(Object(s.a)({},e),{},{zIndex:9999})}}})]}),Object(M.jsxs)(u.a,{className:"mb-3 border-primary",children:[Object(M.jsx)(v.a,{style:{cursor:"pointer",padding:"0.5rem 1rem"},onClick:function(){return ve(!he)},children:Object(M.jsxs)("div",{className:"d-flex justify-content-between align-items-center w-100",children:[Object(M.jsxs)("div",{className:"d-flex align-items-center",style:{flex:1},children:[Object(M.jsx)("h6",{className:"mb-0",style:{fontSize:"0.9rem",marginRight:"1rem"},children:"Bulk Location Settings"}),!he&&Object(M.jsxs)("div",{className:"text-muted small",children:[Object(M.jsx)(x.a,{color:"stock_available"===ge?"info":"warning",className:"mr-1",children:"stock_available"===ge?"Stock":"Store"}),"\u2192",Object(M.jsx)(x.a,{color:"store_available"===_e?"warning":"info",className:"ml-1",children:"store_available"===_e?"Store":"Stock"})]})]}),Object(M.jsx)(C.a,{size:16,style:{transform:he?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease",marginLeft:"auto"}})]})}),Object(M.jsx)(O.a,{isOpen:he,children:Object(M.jsxs)(b.a,{className:"pb-0 pt-1",style:{padding:"0.5rem 1rem"},children:[Object(M.jsxs)(j.a,{children:[Object(M.jsx)(m.a,{md:5,children:Object(M.jsxs)(p.a,{className:"mb-0",children:[Object(M.jsx)(h.a,{for:"bulk-from",className:"small mb-0",children:"From Location"}),Object(M.jsxs)(g.a,{type:"select",id:"bulk-from",value:ge,onChange:function(e){return ke(e.target.value)},className:"form-control-sm",disabled:r,children:[Object(M.jsx)("option",{value:"stock_available",children:"Stock Available"}),Object(M.jsx)("option",{value:"store_available",children:"Store Available"})]})]})}),Object(M.jsx)(m.a,{md:2,className:"d-flex align-items-center justify-content-center",children:Object(M.jsx)(f.a,{color:"secondary",size:"sm",onClick:function(){var e=ge;ke(_e),we(e)},disabled:r,className:"mt-1",children:"Swap"})}),Object(M.jsx)(m.a,{md:5,children:Object(M.jsxs)(p.a,{className:"mb-0",children:[Object(M.jsx)(h.a,{for:"bulk-to",className:"small mb-0",children:"To Location"}),Object(M.jsxs)(g.a,{type:"select",id:"bulk-to",value:_e,onChange:function(e){return we(e.target.value)},className:"form-control-sm",disabled:r,children:[Object(M.jsx)("option",{value:"stock_available",children:"Stock Available"}),Object(M.jsx)("option",{value:"store_available",children:"Store Available"})]})]})})]}),Object(M.jsx)(j.a,{className:"my-1",children:Object(M.jsx)(m.a,{md:12,className:"text-right",children:Object(M.jsx)(f.a,{color:"primary",size:"sm",onClick:function(){ge!==_e?(Q((function(e){var t=e.map((function(e){var t,a,n,r="stock_available"===ge?(null===(t=e.product)||void 0===t?void 0:t.stock_available)||0:(null===(a=e.product)||void 0===a?void 0:a.store_available)||0,c=e.quantity;parseInt(c)>r&&(c=r>0?r:1,Object(F.d)("Quantity adjusted to ".concat(c," for ").concat(null===(n=e.product)||void 0===n?void 0:n.name," due to insufficient stock in ").concat(ge)));return Object(s.a)(Object(s.a)({},e),{},{from_location:ge,to_location:_e,quantity:c})}));return ze(t),t})),Object(F.f)("Applied locations to all products")):Object(F.d)("From and To locations cannot be the same")},disabled:0===J.length||r||ge===_e,children:"Apply to All Products"})})})]})})]}),Object(M.jsxs)("div",{className:"mt-4",children:[Object(M.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[Object(M.jsxs)("h6",{className:"mb-0",children:["Products in Transfer (",J.length,")"]}),Object(M.jsxs)("div",{className:"text-muted",children:[Re()," units"]})]}),J.length>0?Object(M.jsx)("div",{className:"table-responsive mb-3",children:Object(M.jsxs)(k.a,{bordered:!0,hover:!0,children:[Object(M.jsx)("thead",{className:"thead-light",children:Object(M.jsxs)("tr",{children:[Object(M.jsx)("th",{width:"25%",children:"Product"}),Object(M.jsx)("th",{width:"10%",children:"From"}),Object(M.jsx)("th",{width:"10%",children:"To"}),Object(M.jsx)("th",{width:"10%",children:"Quantity"}),Object(M.jsx)("th",{width:"30%",children:"Expected Impact"}),Object(M.jsx)("th",{width:"15%",children:"Actions"})]})}),Object(M.jsx)("tbody",{children:J.map((function(e,t){var a=e.product||{},n=Te(e),c=ie[t],o=Se&&!r,i=a.image||"/static/images/placeholder.png",l=a.name||"Product",d=a.sku||"N/A",u=a.location||"N/A",b=a.stock_location||"N/A",j=a.stock_available||0,m=a.store_available||0,p="stock_available"===e.from_location?j:m;return Object(M.jsxs)("tr",{className:c?"table-warning":"",children:[Object(M.jsx)("td",{children:Object(M.jsxs)("div",{className:"d-flex align-items-center",children:[i&&"/static/images/placeholder.png"!==i?Object(M.jsx)("img",{src:i,alt:l,className:"rounded mr-2",style:{width:40,height:40,objectFit:"cover"},onError:function(e){e.target.src="/static/images/placeholder.png"}}):Object(M.jsx)("div",{className:"mr-2",style:{width:40,height:40,backgroundColor:"#f8f9fa",borderRadius:"4px"}}),Object(M.jsxs)("div",{children:[Object(M.jsx)("a",{className:"font-weight-bold",href:"".concat("http://localhost:3000","/product/").concat(l.replace(/\s+/g,"-").toLowerCase()),target:"_blank",rel:"noopener noreferrer",children:l}),Object(M.jsxs)("small",{className:"text-muted",children:["SKU: ",d]})]})]})}),Object(M.jsxs)("td",{children:[Object(M.jsxs)("select",{className:"form-control  width-100 form-control-sm ".concat(c?"border-danger":""),value:e.from_location,onChange:function(e){return Ee(t,"from_location",e.target.value)},disabled:!o||r,children:[Object(M.jsx)("option",{value:"stock_available",children:"Stock"}),Object(M.jsx)("option",{value:"store_available",children:"Store"})]}),Object(M.jsx)("div",{className:"mt-1 small",children:"stock_available"===e.from_location?Object(M.jsxs)("div",{className:"text-info d-flex align-items-center",children:[Object(M.jsx)("span",{className:"mr-1",children:"\ud83d\udce6"}),Object(M.jsx)("span",{className:"text-truncate",style:{maxWidth:"120px"},title:b,children:b})]}):Object(M.jsxs)("div",{className:"text-warning d-flex align-items-center",children:[Object(M.jsx)("span",{className:"mr-1",children:"\ud83c\udfea"}),Object(M.jsx)("span",{className:"text-truncate",style:{maxWidth:"120px"},title:u,children:u})]})})]}),Object(M.jsxs)("td",{children:[Object(M.jsxs)("div",{className:"d-flex align-items-center justify-content-center",children:[Object(M.jsx)(D.a,{size:14,className:"mr-1 text-muted"}),Object(M.jsxs)("select",{className:"form-control  width-100 form-control-sm",value:e.to_location,onChange:function(e){return Ee(t,"to_location",e.target.value)},disabled:!o||r,children:[Object(M.jsx)("option",{value:"stock_available",children:"Stock"}),Object(M.jsx)("option",{value:"store_available",children:"Store"})]})]}),Object(M.jsx)("div",{className:"mt-1 small text-center",children:"stock_available"===e.to_location?Object(M.jsxs)("div",{className:"text-info d-flex align-items-center justify-content-center",children:[Object(M.jsx)("span",{className:"mr-1",children:"\ud83d\udce6"}),Object(M.jsx)("span",{className:"text-truncate",style:{maxWidth:"120px"},title:b,children:b})]}):Object(M.jsxs)("div",{className:"text-warning d-flex align-items-center justify-content-center",children:[Object(M.jsx)("span",{className:"mr-1",children:"\ud83c\udfea"}),Object(M.jsx)("span",{className:"text-truncate",style:{maxWidth:"120px"},title:u,children:u})]})})]}),Object(M.jsxs)("td",{children:[Object(M.jsx)(g.a,{type:"number",min:"1",max:p,value:e.quantity,onChange:function(e){return Ee(t,"quantity",e.target.value)},className:"form-control-sm ".concat(c?"border-danger":""),disabled:!o||r}),c&&Object(M.jsx)("small",{className:"text-danger d-block mt-1",children:ie[t]})]}),Object(M.jsx)("td",{children:Object(M.jsx)(V.a,{product:n,transferOrderStatus:"PENDING",compact:!0,showLabels:!1})}),Object(M.jsx)("td",{className:"text-center",children:o&&Object(M.jsx)(f.a,{color:"danger",size:"sm",onClick:function(){return function(e){var t,a,n=(null===(t=J[e])||void 0===t||null===(a=t.product)||void 0===a?void 0:a.name)||"Product",r=J.filter((function(t,a){return a!==e}));Q(r);var c=Object(s.a)({},ie);delete c[e],le(c),Object(F.f)("Removed ".concat(n," from transfer list"))}(t)},disabled:r,children:Object(M.jsx)(z.a,{size:14})})})]},t)}))})]})}):Object(M.jsxs)("div",{className:"text-center p-5 border rounded bg-light",children:[Object(M.jsx)(A.a,{size:48,className:"text-muted mb-3"}),Object(M.jsx)("p",{className:"text-muted",children:"No products added to this transfer"}),Object(M.jsx)("p",{className:"text-muted small",children:"Use the search above to add products"})]})]}),Object(M.jsxs)(p.a,{children:[Object(M.jsx)(h.a,{for:"notes",children:"Notes (Optional)"}),Object(M.jsx)(g.a,{type:"textarea",id:"notes",rows:"3",value:K,onChange:function(e){return X(e.target.value)},placeholder:"Add any notes about this transfer...",disabled:r})]}),Object(M.jsxs)("div",{className:"mt-4 d-flex justify-content-between",children:[Object(M.jsx)(f.a,{color:"secondary",onClick:function(){J.length>0?window.confirm("You have unsaved changes. Are you sure you want to cancel?")&&e.push("/transfer-order/list"):e.push("/transfer-order/list")},disabled:r,children:"Cancel"}),Object(M.jsx)(f.a,{color:"primary",onClick:qe,disabled:r||0===J.length||Ie()||!Se,children:r?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(y.a,{size:"sm",className:"mr-1"}),"Creating..."]}):Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(P.a,{size:14,className:"mr-1"}),"Create Transfer"]})})]})]})})}),Object(M.jsx)(m.a,{md:4,sm:12,children:Object(M.jsx)(u.a,{className:"mt-0",children:Object(M.jsxs)(b.a,{children:[Object(M.jsxs)("h6",{className:"mb-3 d-flex align-items-center",children:[Object(M.jsx)(E.a,{size:16,className:"mr-2"}),"Transfer Summary"]}),Object(M.jsxs)("div",{className:"mb-3",children:[Object(M.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[Object(M.jsx)("span",{className:"text-muted",children:"Total Products:"}),Object(M.jsx)("strong",{children:J.length})]}),Object(M.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[Object(M.jsx)("span",{className:"text-muted",children:"Total Quantity:"}),Object(M.jsx)("strong",{children:Re()})]}),Le.stock_to_store.count>0&&Object(M.jsxs)("div",{className:"mb-2 p-2 bg-info-light rounded",children:[Object(M.jsxs)("div",{className:"d-flex justify-content-between mb-1",children:[Object(M.jsx)("span",{className:"small",children:"Stock \u2192 Store"}),Object(M.jsx)(x.a,{color:"info",children:Le.stock_to_store.count})]}),Object(M.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(M.jsx)("span",{className:"small",children:"Quantity:"}),Object(M.jsx)("strong",{children:Le.stock_to_store.quantity})]})]}),Le.store_to_stock.count>0&&Object(M.jsxs)("div",{className:"mb-2 p-2 bg-warning-light rounded",children:[Object(M.jsxs)("div",{className:"d-flex justify-content-between mb-1",children:[Object(M.jsx)("span",{className:"small",children:"Store \u2192 Stock"}),Object(M.jsx)(x.a,{color:"warning",children:Le.store_to_stock.count})]}),Object(M.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(M.jsx)("span",{className:"small",children:"Quantity:"}),Object(M.jsx)("strong",{children:Le.store_to_stock.quantity})]})]})]}),Object(M.jsxs)("div",{className:"mt-3 pt-3 border-top",children:[Object(M.jsx)("h6",{children:"Stock Validation"}),Ie()?Object(M.jsxs)(N.a,{color:"danger",className:"mt-2",children:[Object(M.jsx)(T.a,{size:14,className:"mr-2"}),Object(M.jsx)("small",{children:"Some products exceed available stock"})]}):J.length>0?Object(M.jsxs)(N.a,{color:"success",className:"mt-2",children:[Object(M.jsx)(I.a,{size:14,className:"mr-2"}),Object(M.jsx)("small",{children:"All products have sufficient stock"})]}):Object(M.jsxs)(N.a,{color:"secondary",className:"mt-2",children:[Object(M.jsx)(A.a,{size:14,className:"mr-2"}),Object(M.jsx)("small",{children:"Add products to begin validation"})]})]})]})})})]})]})})]})}}}]);
//# sourceMappingURL=165.8bd9766f.chunk.js.map
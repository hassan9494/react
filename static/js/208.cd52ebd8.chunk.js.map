{"version":3,"sources":["views/website/tax_exempt/Edit.js"],"names":["Edit","history","useHistory","id","useParams","useTaxExempt","model","data","update","useState","formErrors","setFormErrors","isFormInitialized","setIsFormInitialized","form","useForm","defaultValues","identity_number_type","tax_exempt","tax_zero","user_id","name","email","phone","identity_number","exemption_expiration_date","media","useEffect","formattedDate","split","reset","Boolean","onSubmit","a","push","response","errors","breadCrumbTitle","breadCrumbActive","isEditMode"],"mappings":"gQAoEeA,UA7DF,WACT,IAAMC,EAAUC,cACRC,EAAOC,cAAPD,GACR,EAAgCE,YAAaF,GAA/BG,EAAd,EAAQC,KAAaC,EAArB,EAAqBA,OACrB,EAAoCC,mBAAS,MAA7C,mBAAOC,EAAP,KAAmBC,EAAnB,KACA,EAAkDF,oBAAS,GAA3D,mBAAOG,EAAP,KAA0BC,EAA1B,KAEMC,EAAOC,YAAQ,CACjBC,cAAe,CACXC,qBAAsB,MACtBC,YAAY,EACZC,UAAU,EACVC,QAAS,KACTC,KAAM,GACNC,MAAO,GACPC,MAAO,GACPC,gBAAiB,GACjBC,0BAA2B,GAC3BC,MAAO,MAIfC,qBAAU,WACN,GAAIrB,IAAUM,EAAmB,CAE7B,IAAMgB,EAAgBtB,EAAMmB,0BAA4BnB,EAAMmB,0BAA0BI,MAAM,KAAK,GAAK,GAGlGH,EAAQpB,EAAMoB,MAAQpB,EAAMoB,MAAS,GAE3CZ,EAAKgB,MAAL,2BACOxB,GADP,IAEIW,qBAAsBX,EAAMW,sBAAwB,MACpDQ,0BAA2BG,EAC3BV,WAAYa,QAAQzB,EAAMY,YAC1BC,SAAUY,QAAQzB,EAAMa,UACxBO,WAEJb,GAAqB,MAE1B,CAACP,EAAOQ,EAAMF,IAEjB,IAAMoB,EAAQ,uCAAG,WAAMzB,GAAN,iBAAA0B,EAAA,+EAIHzB,EAAOD,GAJJ,OAKTN,EAAQiC,KAAK,oBALJ,+CAOTvB,EAAa,UAAC,KAAEwB,gBAAH,iBAAC,EAAY5B,YAAb,aAAC,EAAkB6B,QAPvB,wDAAH,sDAWd,OACI,eAAC,WAAD,WACI,cAAC,IAAD,CAAaC,gBAAgB,aAAaC,iBAAiB,oBAC3D,cAAC,IAAD,CAAMhC,MAAOA,EAAO0B,SAAUA,EAAUlB,KAAMA,EAAMJ,WAAYA,EAAY6B,YAAY","file":"static/js/208.cd52ebd8.chunk.js","sourcesContent":["import { Fragment, useState, useEffect } from 'react'\nimport Breadcrumbs from '@components/breadcrumbs'\nimport { useTaxExempt } from '@data/use-tax-exempt'\nimport { useHistory, useParams } from 'react-router-dom'\nimport Form from './form'\nimport { useForm } from \"react-hook-form\"\n\nconst Edit = () => {\n    const history = useHistory()\n    const { id } = useParams()\n    const { data: model, update } = useTaxExempt(id)\n    const [formErrors, setFormErrors] = useState(null)\n    const [isFormInitialized, setIsFormInitialized] = useState(false)\n\n    const form = useForm({\n        defaultValues: {\n            identity_number_type: 'NIN',\n            tax_exempt: false,\n            tax_zero: false,\n            user_id: null,\n            name: '',\n            email: '',\n            phone: '',\n            identity_number: '',\n            exemption_expiration_date: '',\n            media: [] // Initialize as empty array for media\n        }\n    })\n\n    useEffect(() => {\n        if (model && !isFormInitialized) {\n            // Format the date to YYYY-MM-DD\n            const formattedDate = model.exemption_expiration_date ? model.exemption_expiration_date.split(' ')[0] : ''\n\n            // Prepare media array if image exists\n            const media = model.media ? model.media  : []\n\n            form.reset({\n                ...model,\n                identity_number_type: model.identity_number_type || 'NIN',\n                exemption_expiration_date: formattedDate,\n                tax_exempt: Boolean(model.tax_exempt),\n                tax_zero: Boolean(model.tax_zero),\n                media\n            })\n            setIsFormInitialized(true)\n        }\n    }, [model, form, isFormInitialized])\n\n    const onSubmit = async data => {\n        try {\n            // The media field will contain the uploaded file information\n            // from Uppy, which should be in the format your backend expects\n            await update(data)\n            history.push('/tax_exempt/list')\n        } catch (e) {\n            setFormErrors(e.response?.data?.errors)\n        }\n    }\n\n    return (\n        <Fragment>\n            <Breadcrumbs breadCrumbTitle='Tax Exempt' breadCrumbActive='Edit Tax Exempt'/>\n            <Form model={model} onSubmit={onSubmit} form={form} formErrors={formErrors} isEditMode={true} />\n        </Fragment>\n    )\n}\n\nexport default Edit"],"sourceRoot":""}
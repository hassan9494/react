{"version":3,"sources":["@core/components/sweetalert/index.js","../node_modules/reactstrap/es/Input.js","data/use-product.js","../node_modules/react-select/async/dist/react-select.browser.esm.js","../node_modules/reactstrap/es/Label.js","../node_modules/react-feather/dist/icons/save.js","data/use-transfer-order.js","../node_modules/react-feather/dist/icons/bar-chart-2.js","views/transfer-order/components/TransferOrderStatus.js","views/transfer-order/components/StockImpact.js","../node_modules/react-feather/dist/icons/trash-2.js","@core/components/breadcrumbs/index.js","views/transfer-order/edit/index.js"],"names":["MySwal","withReactContent","Swal","confirm","callback","a","fire","title","icon","showCancelButton","confirmButtonText","customClass","confirmButton","cancelButton","buttonsStyling","then","result","value","confirmDelete","propTypes","children","PropTypes","node","type","string","size","oneOfType","number","bsSize","valid","bool","invalid","tag","tagPropType","innerRef","object","func","plaintext","addon","className","cssModule","Input","_React$Component","props","_this","call","this","getRef","bind","_assertThisInitialized","focus","_inheritsLoose","_proto","prototype","ref","render","_this$props","attributes","_objectWithoutPropertiesLoose","checkInput","indexOf","isNotaNumber","RegExp","Tag","formControlClass","test","warnOnce","classes","mapToCssModules","classNames","React","createElement","_extends","Component","defaultProps","fetcher","url","axios","get","res","data","api","create","params","post","update","id","put","show","delete","restore","autocomplete","q","stock","sku","stock2","stock3","useProduct","useSWR","revalidateOnFocus","mutate","error","loading","useDatatable","page","limit","search","order","conditions","JSON","stringify","mutates","items","total","useDatatableForDeleted","useVariantsDatatable","useStockDatatable","column","direction","ownKeys","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Date","toString","e","_isNativeReflectConstruct","Super","_getPrototypeOf","NewTarget","constructor","_possibleConstructorReturn","cacheOptions","defaultOptions","filterOption","isLoading","Async","SelectComponent","_class","_temp","_Component","_inherits","_super","_classCallCheck","select","lastRequest","mounted","handleInputChange","newValue","actionMeta","onInputChange","inputValue","setState","loadedInputValue","loadedOptions","passEmptyOptions","state","optionsCache","request","loadOptions","options","Array","isArray","undefined","prevDefaultOptions","prevCacheOptions","_createClass","_this2","blur","loader","_this3","_this$props2","isLoadingProp","_objectWithoutProperties","_this$state","_ref","newCacheOptionsState","newDefaultOptionsState","makeAsyncSelect","manageState","Select","stringOrNumberProp","columnProps","shape","offset","hidden","check","for","xs","sm","md","lg","xl","widths","array","getColumnSizeClass","isXs","colWidth","colSize","Label","htmlFor","colClasses","columnProp","colClass","isObject","_classNames","colSizeInterfix","assign","hasOwnProperty","excluded","sourceKeys","sourceSymbolKeys","propertyIsEnumerable","Save","forwardRef","_ref$color","color","_ref$size","rest","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","points","displayName","useTransferOrder","useState","setData","setIsLoading","setError","fetchData","response","console","useEffect","refetch","useTransferOrders","setTotal","customParams","allParams","success","BarChart2","x1","y1","x2","y2","TransferOrderStatus","form","transferOrder","isEditMode","onStatusToggle","status","setStatus","showConfirmModal","setShowConfirmModal","actionType","setActionType","isProcessing","setIsProcessing","completionNotes","setCompletionNotes","setValue","statusOptions","label","handleStatusChange","selectedStatus","newStatus","currentStatus","handleSubmitStatus","toast","info","text","cancelButtonText","message","handleToggleStatus","notes","control","defaultValue","name","field","onChange","classNamePrefix","find","opt","val","Ripple","block","onClick","disabled","can_complete","can_revert","isOpen","toggle","StockImpact","product","transferOrderStatus","showLabels","compact","showTooltip","style","tooltipOpen","setTooltipOpen","stockData","has_stock_history","stock_before","stockAvailBefore","stock_available_before","stockAvailAfter","stock_available_after","storeAvailBefore","store_available_before","storeAvailAfter","store_available_after","totalBefore","totalAfter","stock_after","stockDiff","stock_available_difference","storeDiff","store_available_difference","totalDiff","stock_difference","current_stock_available","current_store_available","isHistorical","getBadgeColor","getDiffIcon","getDiffLabel","pill","fontSize","padding","placement","backgroundColor","borderRadius","border","quantity","from_location_label","from_location","to_location_label","to_location","Trash2","BreadCrumbs","breadCrumbTitle","breadCrumbParent","breadCrumbParent2","breadCrumbParent3","breadCrumbActive","right","to","active","EditTransferOrder","useParams","history","useHistory","transferOrderData","setTransferOrder","loaded","setLoaded","isSubmitting","setIsSubmitting","products","setProducts","setNotes","selectedProduct","setSelectedProduct","setLoading","stockErrors","setStockErrors","setDefaultOptions","useRef","Map","bulkSectionOpen","setBulkSectionOpen","bulkFromLocation","setBulkFromLocation","bulkToLocation","setBulkToLocation","canEdit","ability","can","canComplete","loadInitialOptions","cacheKey","current","has","productApi","map","stockValue","current_stock","stockAvailable","stock_available","storeAvailable","store_available","skuValue","productName","imageUrl","image","display","alignItems","src","alt","marginRight","fontWeight","item","location","stock_location","set","promiseOptions","getProductDetails","productId","stockResponse","log","validateStock","productsList","errors","index","availableStock","parseInt","handleProductSelect","selectedOption","p","product_id","showError","productData","newProduct","prev","showSuccess","formattedProducts","product_name","product_sku","product_image","product_location","product_stock_location","handleProductChange","updated","numValue","hasInsufficientStock","some","getTotalQuantity","reduce","onSubmit","preparedData","window","reload","handleBack","handleDelete","cannotEdit","can_edit","stockSummary","summary","stock_to_store","count","store_to_stock","calculateStockSummary","toLowerCase","isClearable","placeholder","noOptionsMessage","trim","formatOptionLabel","option","context","styles","base","minHeight","menu","zIndex","cursor","flex","transform","transition","marginLeft","temp","bordered","hover","hasStockError","isEditable","productImage","productSku","productLocation","productStockLocation","currentStockAvailable","currentStoreAvailable","totalCurrentStock","objectFit","href","process","replace","rel","maxWidth","min","max","updatedProducts","_","newErrors","handleRemoveProduct","rows","onToggleStatus","onUpdateStatus"],"mappings":"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","file":"static/js/156.5b3679b7.chunk.js","sourcesContent":["import Swal from 'sweetalert2'\nimport withReactContent from 'sweetalert2-react-content'\n\nconst MySwal = withReactContent(Swal)\n\nexport const confirm = async (callback) => {\n    MySwal.fire({\n        title: 'Are you sure?',\n        // text: \"You won't be able to revert this!\",\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonText: 'Yes, do it!',\n        customClass: {\n            confirmButton: 'btn btn-primary',\n            cancelButton: 'btn btn-outline-danger ml-1'\n        },\n        buttonsStyling: false\n    }).then(function (result) {\n        if (result.value)  callback()\n    })\n}\n\nexport const confirmDelete = async (callback) => {\n    MySwal.fire({\n        title: 'Are you sure want to delete?',\n        // text: \"You won't be able to revert this!\",\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonText: 'Yes, delete it!',\n        customClass: {\n            confirmButton: 'btn btn-danger',\n            cancelButton: 'btn btn-outline-danger ml-1'\n        },\n        buttonsStyling: false\n    }).then(function (result) {\n        if (result.value)  callback()\n    })\n}\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\n\n/* eslint react/prefer-stateless-function: 0 */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, warnOnce, tagPropType } from './utils';\nvar propTypes = {\n  children: PropTypes.node,\n  type: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  bsSize: PropTypes.string,\n  valid: PropTypes.bool,\n  invalid: PropTypes.bool,\n  tag: tagPropType,\n  innerRef: PropTypes.oneOfType([PropTypes.object, PropTypes.func, PropTypes.string]),\n  plaintext: PropTypes.bool,\n  addon: PropTypes.bool,\n  className: PropTypes.string,\n  cssModule: PropTypes.object\n};\nvar defaultProps = {\n  type: 'text'\n};\n\nvar Input = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(Input, _React$Component);\n\n  function Input(props) {\n    var _this;\n\n    _this = _React$Component.call(this, props) || this;\n    _this.getRef = _this.getRef.bind(_assertThisInitialized(_this));\n    _this.focus = _this.focus.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  var _proto = Input.prototype;\n\n  _proto.getRef = function getRef(ref) {\n    if (this.props.innerRef) {\n      this.props.innerRef(ref);\n    }\n\n    this.ref = ref;\n  };\n\n  _proto.focus = function focus() {\n    if (this.ref) {\n      this.ref.focus();\n    }\n  };\n\n  _proto.render = function render() {\n    var _this$props = this.props,\n        className = _this$props.className,\n        cssModule = _this$props.cssModule,\n        type = _this$props.type,\n        bsSize = _this$props.bsSize,\n        valid = _this$props.valid,\n        invalid = _this$props.invalid,\n        tag = _this$props.tag,\n        addon = _this$props.addon,\n        plaintext = _this$props.plaintext,\n        innerRef = _this$props.innerRef,\n        attributes = _objectWithoutPropertiesLoose(_this$props, [\"className\", \"cssModule\", \"type\", \"bsSize\", \"valid\", \"invalid\", \"tag\", \"addon\", \"plaintext\", \"innerRef\"]);\n\n    var checkInput = ['radio', 'checkbox'].indexOf(type) > -1;\n    var isNotaNumber = new RegExp('\\\\D', 'g');\n    var fileInput = type === 'file';\n    var textareaInput = type === 'textarea';\n    var selectInput = type === 'select';\n    var rangeInput = type === 'range';\n    var Tag = tag || (selectInput || textareaInput ? type : 'input');\n    var formControlClass = 'form-control';\n\n    if (plaintext) {\n      formControlClass = formControlClass + \"-plaintext\";\n      Tag = tag || 'input';\n    } else if (fileInput) {\n      formControlClass = formControlClass + \"-file\";\n    } else if (rangeInput) {\n      formControlClass = formControlClass + \"-range\";\n    } else if (checkInput) {\n      if (addon) {\n        formControlClass = null;\n      } else {\n        formControlClass = 'form-check-input';\n      }\n    }\n\n    if (attributes.size && isNotaNumber.test(attributes.size)) {\n      warnOnce('Please use the prop \"bsSize\" instead of the \"size\" to bootstrap\\'s input sizing.');\n      bsSize = attributes.size;\n      delete attributes.size;\n    }\n\n    var classes = mapToCssModules(classNames(className, invalid && 'is-invalid', valid && 'is-valid', bsSize ? \"form-control-\" + bsSize : false, formControlClass), cssModule);\n\n    if (Tag === 'input' || tag && typeof tag === 'function') {\n      attributes.type = type;\n    }\n\n    if (attributes.children && !(plaintext || type === 'select' || typeof Tag !== 'string' || Tag === 'select')) {\n      warnOnce(\"Input with a type of \\\"\" + type + \"\\\" cannot have children. Please use \\\"value\\\"/\\\"defaultValue\\\" instead.\");\n      delete attributes.children;\n    }\n\n    return /*#__PURE__*/React.createElement(Tag, _extends({}, attributes, {\n      ref: innerRef,\n      className: classes,\n      \"aria-invalid\": invalid\n    }));\n  };\n\n  return Input;\n}(React.Component);\n\nInput.propTypes = propTypes;\nInput.defaultProps = defaultProps;\nexport default Input;","import useSWR from 'swr'\nimport axios from '../utility/axiosIsntance'\n\nconst fetcher = (url) => axios.get(url).then(res => res.data?.data)\n\nexport const api = {\n\n    create: async (params) => {\n        const { data } = await axios.post('product', params)\n        return data?.data\n    },\n\n    update: async (id, params) => {\n        const { data } = await axios.put(`product/${id}`, params)\n        return data?.data\n    },\n    show: async (id) => {\n        const { data } = await axios.get(`product/${id}`)\n        return data?.data\n    },\n\n\n    delete: async (id) => {\n        await axios.delete(`product/${id}`)\n    },\n    restore: async (id) => {\n        await axios.get(`restore_product/${id}`)\n    },\n    autocomplete: async (q) => {\n        const { data } = await axios.get(`product/autocomplete?q=${q}`)\n        return data?.data\n    },\n    stock: async (params) => {\n        await axios.post(`product/stock`, params)\n    },\n    sku: async (params) => {\n        await axios.post(`product/sku`, params)\n    },\n    stock2: async (params) => {\n        await axios.post(`product/stock2`, params)\n    },\n    stock3: async (params) => {\n        await axios.post(`product/stock3`, params)\n    }\n\n}\n\nexport function useProduct(id) {\n\n    const { data, mutate, error } = useSWR(`product/${id}`, fetcher, {\n        revalidateOnFocus: false\n    })\n\n    const loading = !data && !error\n\n    return {\n        loading,\n        error,\n        data,\n        mutate,\n        update: async (params) => {\n            await api.update(id, params)\n            await mutate()\n        }\n    }\n}\n\nexport function useDatatable({ page, limit, search, order = {}, conditions = {}}) {\n\n    const url = `product/datatable?page=${page}&limit=${limit}&search=${search}&order=${JSON.stringify(order)}&conditions=${JSON.stringify(conditions)}`\n\n    const { data, mutate, error } = useSWR(url, fetcher)\n\n    const loading = !data && !error\n\n    const mutates = {\n        delete: async (id) => {\n            await api.delete(id)\n            mutate({ ...data })\n        }\n    }\n\n    return {\n        loading,\n        error,\n        data: data?.items || [],\n        total: data?.total || 0,\n        mutates\n    }\n\n}\nexport function useDatatableForKit({ page, limit, search, order = {}}) {\n\n    const url = `kitProduct/datatable?page=${page}&limit=${limit}&search=${search}&order=${JSON.stringify(order)}`\n\n    const { data, mutate, error } = useSWR(url, fetcher)\n\n    const loading = !data && !error\n\n    const mutates = {\n        delete: async (id) => {\n            await api.delete(id)\n            mutate({ ...data })\n        }\n    }\n\n    return {\n        loading,\n        error,\n        data: data?.items || [],\n        total: data?.total || 0,\n        mutates\n    }\n\n}\nexport function useDatatableForDeleted({ page, limit, search, order = {}}) {\n\n    const url = `deletedProduct/datatable?page=${page}&limit=${limit}&search=${search}&order=${JSON.stringify(order)}`\n\n    const { data, mutate, error } = useSWR(url, fetcher)\n\n    const loading = !data && !error\n\n    const mutates = {\n        delete: async (id) => {\n            await api.delete(id)\n            mutate({ ...data })\n        }\n    }\n\n    return {\n        loading,\n        error,\n        data: data?.items || [],\n        total: data?.total || 0,\n        mutates\n    }\n\n}\nexport function useVariantsDatatable({ page, limit, search, order = {}, conditions = {}}) {\n\n    const url = `product/datatable?page=${page}&limit=${limit}&search=${search}&order=${JSON.stringify(order)}&conditions=${JSON.stringify(conditions)}`\n\n    const { data, mutate, error } = useSWR(url, fetcher)\n\n    const loading = !data && !error\n\n    const mutates = {\n        delete: async (id) => {\n            await api.delete(id)\n            mutate({ ...data })\n        }\n    }\n\n    return {\n        loading,\n        error,\n        data: data?.items || [],\n        total: data?.total || 0,\n        mutates\n    }\n\n}\n\nexport function useStockDatatable({ page, limit, search, order }) {\n\n    const url = `product/datatable?page=${page}&limit=${limit}&search=${search}&order=${order?.column}&dir=${order?.direction}`\n\n    const { data, error } = useSWR(url, fetcher)\n\n    const loading = !data && !error\n\n    return {\n        loading,\n        error,\n        data: data?.items || [],\n        total: data?.total || 0\n    }\n\n}\n\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport _defineProperty from '@babel/runtime/helpers/esm/defineProperty';\nimport _classCallCheck from '@babel/runtime/helpers/esm/classCallCheck';\nimport _createClass from '@babel/runtime/helpers/esm/createClass';\nimport _inherits from '@babel/runtime/helpers/esm/inherits';\nimport _possibleConstructorReturn from '@babel/runtime/helpers/esm/possibleConstructorReturn';\nimport _getPrototypeOf from '@babel/runtime/helpers/esm/getPrototypeOf';\nimport '@babel/runtime/helpers/toConsumableArray';\nimport React, { Component } from 'react';\nimport '@emotion/react';\nimport 'react-dom';\nimport '@babel/runtime/helpers/typeof';\nimport { F as handleInputChange } from '../../dist/index-8b64410c.browser.esm.js';\nimport { S as Select } from '../../dist/Select-d53e3329.browser.esm.js';\nimport _objectWithoutProperties from '@babel/runtime/helpers/esm/objectWithoutProperties';\nimport '@babel/runtime/helpers/taggedTemplateLiteral';\nimport 'react-input-autosize';\nimport { m as manageState } from '../../dist/stateManager-66a21f68.browser.esm.js';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\nvar defaultProps = {\n  cacheOptions: false,\n  defaultOptions: false,\n  filterOption: null,\n  isLoading: false\n};\nvar makeAsyncSelect = function makeAsyncSelect(SelectComponent) {\n  var _class, _temp;\n\n  return _temp = _class = /*#__PURE__*/function (_Component) {\n    _inherits(Async, _Component);\n\n    var _super = _createSuper(Async);\n\n    function Async(props) {\n      var _this;\n\n      _classCallCheck(this, Async);\n\n      _this = _super.call(this);\n      _this.select = void 0;\n      _this.lastRequest = void 0;\n      _this.mounted = false;\n\n      _this.handleInputChange = function (newValue, actionMeta) {\n        var _this$props = _this.props,\n            cacheOptions = _this$props.cacheOptions,\n            onInputChange = _this$props.onInputChange; // TODO\n\n        var inputValue = handleInputChange(newValue, actionMeta, onInputChange);\n\n        if (!inputValue) {\n          delete _this.lastRequest;\n\n          _this.setState({\n            inputValue: '',\n            loadedInputValue: '',\n            loadedOptions: [],\n            isLoading: false,\n            passEmptyOptions: false\n          });\n\n          return;\n        }\n\n        if (cacheOptions && _this.state.optionsCache[inputValue]) {\n          _this.setState({\n            inputValue: inputValue,\n            loadedInputValue: inputValue,\n            loadedOptions: _this.state.optionsCache[inputValue],\n            isLoading: false,\n            passEmptyOptions: false\n          });\n        } else {\n          var request = _this.lastRequest = {};\n\n          _this.setState({\n            inputValue: inputValue,\n            isLoading: true,\n            passEmptyOptions: !_this.state.loadedInputValue\n          }, function () {\n            _this.loadOptions(inputValue, function (options) {\n              if (!_this.mounted) return;\n              if (request !== _this.lastRequest) return;\n              delete _this.lastRequest;\n\n              _this.setState(function (state) {\n                return {\n                  isLoading: false,\n                  loadedInputValue: inputValue,\n                  loadedOptions: options || [],\n                  passEmptyOptions: false,\n                  optionsCache: options ? _objectSpread(_objectSpread({}, state.optionsCache), {}, _defineProperty({}, inputValue, options)) : state.optionsCache\n                };\n              });\n            });\n          });\n        }\n\n        return inputValue;\n      };\n\n      _this.state = {\n        defaultOptions: Array.isArray(props.defaultOptions) ? props.defaultOptions : undefined,\n        inputValue: typeof props.inputValue !== 'undefined' ? props.inputValue : '',\n        isLoading: props.defaultOptions === true,\n        loadedOptions: [],\n        passEmptyOptions: false,\n        optionsCache: {},\n        prevDefaultOptions: undefined,\n        prevCacheOptions: undefined\n      };\n      return _this;\n    }\n\n    _createClass(Async, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        var _this2 = this;\n\n        this.mounted = true;\n        var defaultOptions = this.props.defaultOptions;\n        var inputValue = this.state.inputValue;\n\n        if (defaultOptions === true) {\n          this.loadOptions(inputValue, function (options) {\n            if (!_this2.mounted) return;\n            var isLoading = !!_this2.lastRequest;\n\n            _this2.setState({\n              defaultOptions: options || [],\n              isLoading: isLoading\n            });\n          });\n        }\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        this.mounted = false;\n      }\n    }, {\n      key: \"focus\",\n      value: function focus() {\n        this.select.focus();\n      }\n    }, {\n      key: \"blur\",\n      value: function blur() {\n        this.select.blur();\n      }\n    }, {\n      key: \"loadOptions\",\n      value: function loadOptions(inputValue, callback) {\n        var loadOptions = this.props.loadOptions;\n        if (!loadOptions) return callback();\n        var loader = loadOptions(inputValue, callback);\n\n        if (loader && typeof loader.then === 'function') {\n          loader.then(callback, function () {\n            return callback();\n          });\n        }\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _this3 = this;\n\n        var _this$props2 = this.props,\n            loadOptions = _this$props2.loadOptions,\n            isLoadingProp = _this$props2.isLoading,\n            props = _objectWithoutProperties(_this$props2, [\"loadOptions\", \"isLoading\"]);\n\n        var _this$state = this.state,\n            defaultOptions = _this$state.defaultOptions,\n            inputValue = _this$state.inputValue,\n            isLoading = _this$state.isLoading,\n            loadedInputValue = _this$state.loadedInputValue,\n            loadedOptions = _this$state.loadedOptions,\n            passEmptyOptions = _this$state.passEmptyOptions;\n        var options = passEmptyOptions ? [] : inputValue && loadedInputValue ? loadedOptions : defaultOptions || [];\n        return /*#__PURE__*/React.createElement(SelectComponent, _extends({}, props, {\n          ref: function ref(_ref) {\n            _this3.select = _ref;\n          },\n          options: options,\n          isLoading: isLoading || isLoadingProp,\n          onInputChange: this.handleInputChange\n        }));\n      }\n    }], [{\n      key: \"getDerivedStateFromProps\",\n      value: function getDerivedStateFromProps(props, state) {\n        var newCacheOptionsState = props.cacheOptions !== state.prevCacheOptions ? {\n          prevCacheOptions: props.cacheOptions,\n          optionsCache: {}\n        } : {};\n        var newDefaultOptionsState = props.defaultOptions !== state.prevDefaultOptions ? {\n          prevDefaultOptions: props.defaultOptions,\n          defaultOptions: Array.isArray(props.defaultOptions) ? props.defaultOptions : undefined\n        } : {};\n        return _objectSpread(_objectSpread({}, newCacheOptionsState), newDefaultOptionsState);\n      }\n    }]);\n\n    return Async;\n  }(Component), _class.defaultProps = defaultProps, _temp;\n};\nvar SelectState = manageState(Select);\nvar Async = makeAsyncSelect(SelectState);\n\nexport default Async;\nexport { defaultProps, makeAsyncSelect };\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType, isObject } from './utils';\nvar colWidths = ['xs', 'sm', 'md', 'lg', 'xl'];\nvar stringOrNumberProp = PropTypes.oneOfType([PropTypes.number, PropTypes.string]);\nvar columnProps = PropTypes.oneOfType([PropTypes.bool, PropTypes.string, PropTypes.number, PropTypes.shape({\n  size: stringOrNumberProp,\n  order: stringOrNumberProp,\n  offset: stringOrNumberProp\n})]);\nvar propTypes = {\n  children: PropTypes.node,\n  hidden: PropTypes.bool,\n  check: PropTypes.bool,\n  size: PropTypes.string,\n  for: PropTypes.string,\n  tag: tagPropType,\n  className: PropTypes.string,\n  cssModule: PropTypes.object,\n  xs: columnProps,\n  sm: columnProps,\n  md: columnProps,\n  lg: columnProps,\n  xl: columnProps,\n  widths: PropTypes.array\n};\nvar defaultProps = {\n  tag: 'label',\n  widths: colWidths\n};\n\nvar getColumnSizeClass = function getColumnSizeClass(isXs, colWidth, colSize) {\n  if (colSize === true || colSize === '') {\n    return isXs ? 'col' : \"col-\" + colWidth;\n  } else if (colSize === 'auto') {\n    return isXs ? 'col-auto' : \"col-\" + colWidth + \"-auto\";\n  }\n\n  return isXs ? \"col-\" + colSize : \"col-\" + colWidth + \"-\" + colSize;\n};\n\nvar Label = function Label(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      hidden = props.hidden,\n      widths = props.widths,\n      Tag = props.tag,\n      check = props.check,\n      size = props.size,\n      htmlFor = props.for,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"hidden\", \"widths\", \"tag\", \"check\", \"size\", \"for\"]);\n\n  var colClasses = [];\n  widths.forEach(function (colWidth, i) {\n    var columnProp = props[colWidth];\n    delete attributes[colWidth];\n\n    if (!columnProp && columnProp !== '') {\n      return;\n    }\n\n    var isXs = !i;\n    var colClass;\n\n    if (isObject(columnProp)) {\n      var _classNames;\n\n      var colSizeInterfix = isXs ? '-' : \"-\" + colWidth + \"-\";\n      colClass = getColumnSizeClass(isXs, colWidth, columnProp.size);\n      colClasses.push(mapToCssModules(classNames((_classNames = {}, _classNames[colClass] = columnProp.size || columnProp.size === '', _classNames[\"order\" + colSizeInterfix + columnProp.order] = columnProp.order || columnProp.order === 0, _classNames[\"offset\" + colSizeInterfix + columnProp.offset] = columnProp.offset || columnProp.offset === 0, _classNames))), cssModule);\n    } else {\n      colClass = getColumnSizeClass(isXs, colWidth, columnProp);\n      colClasses.push(colClass);\n    }\n  });\n  var classes = mapToCssModules(classNames(className, hidden ? 'sr-only' : false, check ? 'form-check-label' : false, size ? \"col-form-label-\" + size : false, colClasses, colClasses.length ? 'col-form-label' : false), cssModule);\n  return /*#__PURE__*/React.createElement(Tag, _extends({\n    htmlFor: htmlFor\n  }, attributes, {\n    className: classes\n  }));\n};\n\nLabel.propTypes = propTypes;\nLabel.defaultProps = defaultProps;\nexport default Label;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar Save = forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 24 : _ref$size,\n      rest = _objectWithoutProperties(_ref, [\"color\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: color,\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, rest), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\"\n  }), /*#__PURE__*/React.createElement(\"polyline\", {\n    points: \"17 21 17 13 7 13 7 21\"\n  }), /*#__PURE__*/React.createElement(\"polyline\", {\n    points: \"7 3 7 8 15 8\"\n  }));\n});\nSave.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nSave.displayName = 'Save';\nexport default Save;","// src/data/use-transfer-order.js\nimport { useState, useEffect } from 'react'\nimport axios from '../utility/axiosIsntance'\n\nexport const useTransferOrder = (id = null) => {\n    const [data, setData] = useState(null)\n    const [isLoading, setIsLoading] = useState(false)\n    const [error, setError] = useState(null)\n\n    const fetchData = async () => {\n        if (id === null) return\n\n        setIsLoading(true)\n        try {\n            const response = await axios.get(`/transfer-orders/${id}`)\n            setData(response.data)\n        } catch (err) {\n            setError(err)\n            console.error('Error fetching transfer order:', err)\n        } finally {\n            setIsLoading(false)\n        }\n    }\n\n    useEffect(() => {\n        fetchData()\n    }, [id])\n\n    const refetch = () => {\n        fetchData()\n    }\n\n    return {\n        data,\n        isLoading,\n        error,\n        refetch,\n        mutate: setData\n    }\n}\n\nexport const useTransferOrders = (params = {}) => {\n    const [data, setData] = useState([])\n    const [isLoading, setIsLoading] = useState(false)\n    const [error, setError] = useState(null)\n    const [total, setTotal] = useState(0)\n\n    const fetchData = async (customParams = {}) => {\n        setIsLoading(true)\n        try {\n            const allParams = { ...params, ...customParams }\n            const response = await axios.get('/transfer-orders', { params: allParams })\n\n            if (response.data.success) {\n                setData(response.data.data.items || [])\n                setTotal(response.data.data.total || 0)\n            } else {\n                setData([])\n                setTotal(0)\n            }\n        } catch (err) {\n            setError(err)\n            console.error('Error fetching transfer orders:', err)\n            setData([])\n            setTotal(0)\n        } finally {\n            setIsLoading(false)\n        }\n    }\n\n    useEffect(() => {\n        fetchData()\n    }, [JSON.stringify(params)])\n\n    const refetch = (customParams = {}) => {\n        fetchData(customParams)\n    }\n\n    return {\n        data,\n        isLoading,\n        error,\n        refetch,\n        total,\n        mutate: setData\n    }\n}\n\n// Direct API calls\nexport const api = {\n    create: async (data) => {\n        const response = await axios.post('/transfer-orders', data)\n        return response.data\n    },\n\n    update: async (id, data) => {\n        const response = await axios.put(`/transfer-orders/${id}`, data)\n        return response.data\n    },\n\n    delete: async (id) => {\n        const response = await axios.delete(`/transfer-orders/${id}`)\n        return response.data\n    },\n\n    complete: async (id) => {\n        const response = await axios.post(`/transfer-orders/${id}/complete`)\n        return response.data\n    },\n\n    cancel: async (id) => {\n        const response = await axios.post(`/transfer-orders/${id}/cancel`)\n        return response.data\n    },\n\n    getStatistics: async () => {\n        const response = await axios.get('/transfer-orders/statistics/overview')\n        return response.data\n    }\n}","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar BarChart2 = forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 24 : _ref$size,\n      rest = _objectWithoutProperties(_ref, [\"color\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: color,\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, rest), /*#__PURE__*/React.createElement(\"line\", {\n    x1: \"18\",\n    y1: \"20\",\n    x2: \"18\",\n    y2: \"10\"\n  }), /*#__PURE__*/React.createElement(\"line\", {\n    x1: \"12\",\n    y1: \"20\",\n    x2: \"12\",\n    y2: \"4\"\n  }), /*#__PURE__*/React.createElement(\"line\", {\n    x1: \"6\",\n    y1: \"20\",\n    x2: \"6\",\n    y2: \"14\"\n  }));\n});\nBarChart2.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nBarChart2.displayName = 'BarChart2';\nexport default BarChart2;","import { Card, CardBody, Button, FormGroup, Modal, ModalHeader, ModalBody, ModalFooter, Label, Input, Alert, Badge } from 'reactstrap'\nimport Select from 'react-select'\nimport { useEffect, useState } from 'react'\nimport { toast } from 'react-toastify'\nimport { confirm } from '@components/sweetalert'\nimport { Controller } from \"react-hook-form\"\nimport { CheckCircle, AlertTriangle, RefreshCw, Info } from 'react-feather'\nimport axios from '../../../utility/axiosIsntance'\n\nconst TransferOrderStatus = ({ form, transferOrder, isEditMode, onStatusToggle, refetch }) => {\n    const [status, setStatus] = useState(null)\n    const [showConfirmModal, setShowConfirmModal] = useState(false)\n    const [actionType, setActionType] = useState('') // 'complete' or 'revert'\n    const [isProcessing, setIsProcessing] = useState(false)\n    const [completionNotes, setCompletionNotes] = useState('')\n\n    useEffect(() => {\n        if (transferOrder) {\n            setStatus(transferOrder.status || 'PENDING')\n            if (form) {\n                form.setValue('status', transferOrder.status || 'PENDING')\n            }\n        }\n    }, [transferOrder, form])\n\n    const statusOptions = [\n        {\n            label: (\n                <div className=\"d-flex align-items-center\">\n                    <AlertTriangle size={16} className=\"mr-2 text-warning\" />\n                    <span>Pending</span>\n                </div>\n            ),\n            value: 'PENDING'\n        },\n        {\n            label: (\n                <div className=\"d-flex align-items-center\">\n                    <CheckCircle size={16} className=\"mr-2 text-success\" />\n                    <span>Completed</span>\n                </div>\n            ),\n            value: 'COMPLETED'\n        }\n    ]\n\n    const getStatusBadge = (status) => {\n        if (!status) return null\n\n        switch (status) {\n            case 'PENDING':\n                return (\n                    <Badge color=\"warning\" className=\"py-1 px-3 d-flex align-items-center\">\n                        <AlertTriangle size={14} className=\"mr-1\" />\n                        Pending\n                    </Badge>\n                )\n            case 'COMPLETED':\n                return (\n                    <Badge color=\"success\" className=\"py-1 px-3 d-flex align-items-center\">\n                        <CheckCircle size={14} className=\"mr-1\" />\n                        Completed\n                    </Badge>\n                )\n            default:\n                return null\n        }\n    }\n\n    const handleStatusChange = (selectedStatus) => {\n        if (!selectedStatus) return\n\n        const newStatus = selectedStatus.value\n        const currentStatus = transferOrder?.status || 'PENDING'\n\n        // If status hasn't changed, do nothing\n        if (newStatus === currentStatus) return\n\n        // Set the status in the form\n        if (form) {\n            form.setValue('status', newStatus)\n        }\n        setStatus(newStatus)\n\n        // Determine action type\n        if (currentStatus === 'PENDING' && newStatus === 'COMPLETED') {\n            setActionType('complete')\n            setShowConfirmModal(true)\n        } else if (currentStatus === 'COMPLETED' && newStatus === 'PENDING') {\n            setActionType('revert')\n            setShowConfirmModal(true)\n        }\n    }\n\n    const handleSubmitStatus = async () => {\n        if (!status) {\n            toast.error('Please select a status')\n            return\n        }\n\n        const currentStatus = transferOrder?.status || 'PENDING'\n\n        // If status hasn't changed, do nothing\n        if (status === currentStatus) {\n            toast.info(`Status is already set to ${  status}`)\n            return\n        }\n\n        // For direct status update (without stock changes)\n        if (form && isEditMode) {\n            confirm({\n                title: 'Update Status',\n                text: `Are you sure you want to change status to ${status}?`,\n                icon: 'warning',\n                confirmButtonText: 'Yes, update it!',\n                cancelButtonText: 'Cancel'\n            }, async () => {\n                try {\n                    if (onStatusToggle) {\n                        await onStatusToggle(status)\n                    }\n                } catch (e) {\n                    toast.error(e.response?.data?.message || 'An error occurred')\n                }\n            })\n        } else {\n            // For status toggle with stock changes\n            if (currentStatus === 'PENDING' && status === 'COMPLETED') {\n                setActionType('complete')\n                setShowConfirmModal(true)\n            } else if (currentStatus === 'COMPLETED' && status === 'PENDING') {\n                setActionType('revert')\n                setShowConfirmModal(true)\n            }\n        }\n    }\n\n    const handleToggleStatus = async () => {\n        setIsProcessing(true)\n        try {\n            await axios.post(`/transfer-orders/${transferOrder.id}/toggle-status`, {\n                notes: completionNotes || undefined\n            })\n\n            toast.success(\n                actionType === 'complete' ? 'Transfer order completed successfully' : 'Transfer order reverted to pending successfully'\n            )\n\n            setShowConfirmModal(false)\n            setCompletionNotes('')\n\n            if (onStatusToggle) {\n                await onStatusToggle()\n            }\n\n            if (refetch) {\n                await refetch()\n            }\n        } catch (error) {\n            console.error('Toggle status error:', error)\n            toast.error(error.response?.data?.message || 'Failed to update transfer order status')\n        } finally {\n            setIsProcessing(false)\n        }\n    }\n\n    return (\n        <Card className='invoice-action-wrapper'>\n            <CardBody>\n\n                {/* Status Selection */}\n                {isEditMode && (\n                    <>\n                        <FormGroup>\n                            {form ? (\n                                <Controller\n                                    control={form.control}\n                                    defaultValue={status}\n                                    name=\"status\"\n                                    render={({ field: { onChange, value, name, ref } }) => (\n                                        <Select\n                                            className='react-select'\n                                            classNamePrefix='select'\n                                            value={statusOptions.find(opt => opt.value === (value || status))}\n                                            options={statusOptions}\n                                            onChange={(val) => {\n                                                onChange(val?.value || null)\n                                                handleStatusChange(val)\n                                            }}\n                                            ref={ref}\n                                        />\n                                    )}\n                                />\n                            ) : (\n                                <Select\n                                    className='react-select'\n                                    classNamePrefix='select'\n                                    value={statusOptions.find(opt => opt.value === status)}\n                                    options={statusOptions}\n                                    onChange={handleStatusChange}\n                                />\n                            )}\n                        </FormGroup>\n\n                        <Button.Ripple\n                            color='primary'\n                            block\n                            onClick={handleSubmitStatus}\n                            disabled={!status || status === transferOrder?.status}\n                        >\n                            Update Status\n                        </Button.Ripple>\n                    </>\n                )}\n\n                {/* Quick Action Buttons */}\n                {!isEditMode && (\n                    <div className=\"mt-3\">\n                        {transferOrder?.can_complete && (\n                            <Button.Ripple\n                                color='success'\n                                className='mt-2'\n                                block\n                                onClick={() => {\n                                    setActionType('complete')\n                                    setShowConfirmModal(true)\n                                }}\n                            >\n                                <CheckCircle size={14} className=\"mr-1\" />\n                                Complete Transfer\n                            </Button.Ripple>\n                        )}\n\n                        {transferOrder?.can_revert && (\n                            <Button.Ripple\n                                color='warning'\n                                className='mt-2'\n                                block\n                                onClick={() => {\n                                    setActionType('revert')\n                                    setShowConfirmModal(true)\n                                }}\n                            >\n                                <RefreshCw size={14} className=\"mr-1\" />\n                                Revert to Pending\n                            </Button.Ripple>\n                        )}\n                    </div>\n                )}\n            </CardBody>\n\n            {/* Confirmation Modal */}\n            <Modal isOpen={showConfirmModal} toggle={() => setShowConfirmModal(false)}>\n                <ModalHeader toggle={() => setShowConfirmModal(false)}>\n                    {actionType === 'complete' ? 'Complete Transfer Order' : 'Revert to Pending'}\n                </ModalHeader>\n                <ModalBody>\n                    {actionType === 'complete' ? (\n                        <>\n                            <p>Are you sure you want to complete this transfer order?</p>\n                        </>\n                    ) : (\n                        <>\n                            <p>Are you sure you want to revert this transfer order to pending?</p>\n                        </>\n                    )}\n                </ModalBody>\n                <ModalFooter>\n                    <Button color=\"secondary\" onClick={() => setShowConfirmModal(false)}>\n                        Cancel\n                    </Button>\n                    <Button\n                        color={actionType === 'complete' ? 'success' : 'warning'}\n                        onClick={handleToggleStatus}\n                        disabled={isProcessing}\n                    >\n                        {isProcessing ? (\n                            <>\n                                <span className=\"spinner-border spinner-border-sm mr-2\"></span>\n                                Processing...\n                            </>\n                        ) : (\n                            actionType === 'complete' ? 'Complete Transfer' : 'Revert to Pending'\n                        )}\n                    </Button>\n                </ModalFooter>\n            </Modal>\n        </Card>\n    )\n}\n\nexport default TransferOrderStatus","// src/views/transfer-order/components/StockImpact.js\nimport { useState } from 'react'\nimport {\n    Badge,\n    Tooltip,\n    Row,\n    Col\n} from 'reactstrap'\nimport {\n    TrendingUp,\n    TrendingDown,\n    Minus,\n    Package,\n    Info,\n    CheckCircle,\n    AlertTriangle,\n    ArrowRight\n} from 'react-feather'\n\nconst StockImpact = ({\n                         product,\n                         transferOrderStatus = 'PENDING',\n                         showLabels = true,\n                         compact = false,\n                         showTooltip = true,\n                         className = '',\n                         style = {}\n                     }) => {\n    const [tooltipOpen, setTooltipOpen] = useState(false)\n\n    // Check if we have historical data\n    const hasHistory = product?.has_stock_history ||\n        (product?.stock_before !== null && product?.stock_before !== undefined)\n\n    // Get stock data directly from API response\n    const getStockData = () => {\n        if (hasHistory) {\n            // For completed transfers, use historical data\n            return {\n                type: 'historical',\n                stockAvailBefore: product.stock_available_before || 0,\n                stockAvailAfter: product.stock_available_after || 0,\n                storeAvailBefore: product.store_available_before || 0,\n                storeAvailAfter: product.store_available_after || 0,\n                totalBefore: product.stock_before || 0,\n                totalAfter: product.stock_after || 0,\n                stockDiff: product.stock_available_difference || 0,\n                storeDiff: product.store_available_difference || 0,\n                totalDiff: product.stock_difference || 0\n            }\n        } else {\n            // For pending transfers, use current values (no change yet)\n            return {\n                type: 'pending',\n                stockAvailBefore: product.current_stock_available || 0,\n                stockAvailAfter: product.current_stock_available || 0,\n                storeAvailBefore: product.current_store_available || 0,\n                storeAvailAfter: product.current_store_available || 0,\n                totalBefore: (product.current_stock_available || 0) + (product.current_store_available || 0),\n                totalAfter: (product.current_stock_available || 0) + (product.current_store_available || 0),\n                stockDiff: 0,\n                storeDiff: 0,\n                totalDiff: 0\n            }\n        }\n    }\n\n    const stockData = getStockData()\n    const isHistorical = stockData.type === 'historical'\n\n    // Helper functions\n    const getBadgeColor = (value) => {\n        if (value > 0) return 'success'\n        if (value < 0) return 'danger'\n        return 'secondary'\n    }\n\n    const getDiffIcon = (value) => {\n        if (value > 0) return <TrendingUp size={10} className=\"mr-1\" />\n        if (value < 0) return <TrendingDown size={10} className=\"mr-1\" />\n        return <Minus size={10} className=\"mr-1\" />\n    }\n\n    const getDiffLabel = (value) => {\n        if (value > 0) return `+${value}`\n        if (value < 0) return `${value}`\n        return 'No change'\n    }\n\n    const getStatusBadge = () => {\n        if (isHistorical) {\n            return (\n                <Badge color=\"success\" className=\"ml-2\" pill>\n                    <CheckCircle size={10} className=\"mr-1\" />\n                    Completed\n                </Badge>\n            )\n        }\n        return (\n            <Badge color=\"warning\" className=\"ml-2\" pill>\n                <AlertTriangle size={10} className=\"mr-1\" />\n                Pending\n            </Badge>\n        )\n    }\n\n    // Render compact version (for tables)\n    if (compact) {\n        return (\n            <div\n                className={`stock-impact-compact ${className}`}\n                style={style}\n                id={`stock-impact-${product?.id || 'unknown'}`}\n            >\n                <div className=\"d-flex flex-column\">\n                    {/* Stock Available */}\n                    <div className=\"d-flex justify-content-between align-items-center mb-1\">\n                        <small className=\"text-muted\">Stock:</small>\n                        <div className=\"d-flex align-items-center\">\n                            <span className=\"font-weight-bold\">{stockData.stockAvailBefore}</span>\n                            {isHistorical && (\n                                <>\n                                    <ArrowRight size={8} className=\"mx-1 text-muted\" />\n                                    <span className={`font-weight-bold ${\n                                        stockData.stockDiff > 0 ? 'text-success' : stockData.stockDiff < 0 ? 'text-danger' : ''\n                                    }`}>\n                                        {stockData.stockAvailAfter}\n                                    </span>\n                                    {stockData.stockDiff !== 0 && (\n                                        <Badge\n                                            color={getBadgeColor(stockData.stockDiff)}\n                                            className=\"ml-1\"\n                                            pill\n                                            style={{ fontSize: '9px', padding: '2px 4px' }}\n                                        >\n                                            {getDiffLabel(stockData.stockDiff)}\n                                        </Badge>\n                                    )}\n                                </>\n                            )}\n                        </div>\n                    </div>\n\n                    {/* Store Available */}\n                    <div className=\"d-flex justify-content-between align-items-center mb-1\">\n                        <small className=\"text-muted\">Store:</small>\n                        <div className=\"d-flex align-items-center\">\n                            <span className=\"font-weight-bold\">{stockData.storeAvailBefore}</span>\n                            {isHistorical && (\n                                <>\n                                    <ArrowRight size={8} className=\"mx-1 text-muted\" />\n                                    <span className={`font-weight-bold ${\n                                        stockData.storeDiff > 0 ? 'text-success' : stockData.storeDiff < 0 ? 'text-danger' : ''\n                                    }`}>\n                                        {stockData.storeAvailAfter}\n                                    </span>\n                                    {stockData.storeDiff !== 0 && (\n                                        <Badge\n                                            color={getBadgeColor(stockData.storeDiff)}\n                                            className=\"ml-1\"\n                                            pill\n                                            style={{ fontSize: '9px', padding: '2px 4px' }}\n                                        >\n                                            {getDiffLabel(stockData.storeDiff)}\n                                        </Badge>\n                                    )}\n                                </>\n                            )}\n                        </div>\n                    </div>\n\n                    {/* Total */}\n                    <div className=\"d-flex justify-content-between align-items-center\">\n                        <small className=\"text-muted\">:</small>\n                        <div className=\"d-flex align-items-center\">\n                            <span className=\"font-weight-bold\">{stockData.totalBefore}</span>\n                            {isHistorical && (\n                                <>\n                                    <ArrowRight size={8} className=\"mx-1 text-muted\" />\n                                    <span className={`font-weight-bold ${\n                                        stockData.totalDiff > 0 ? 'text-success' : stockData.totalDiff < 0 ? 'text-danger' : ''\n                                    }`}>\n                                        {stockData.totalAfter}\n                                    </span>\n                                </>\n                            )}\n                        </div>\n                    </div>\n                </div>\n\n                {showTooltip && (\n                    <Tooltip\n                        placement=\"top\"\n                        isOpen={tooltipOpen}\n                        target={`stock-impact-${product?.id || 'unknown'}`}\n                        toggle={() => setTooltipOpen(!tooltipOpen)}\n                    >\n                        {isHistorical ? 'Actual stock changes after transfer completion' : 'Pending - No stock changes yet'}\n                    </Tooltip>\n                )}\n            </div>\n        )\n    }\n\n    // Render detailed version\n    return (\n        <div\n            className={`stock-impact-detailed p-3 ${className}`}\n            style={{\n                backgroundColor: '#f8f9fa',\n                borderRadius: '8px',\n                border: '1px solid #e9ecef',\n                ...style\n            }}\n        >\n            {showLabels && (\n                <div className=\"d-flex justify-content-between align-items-center mb-3\">\n                    <div className=\"d-flex align-items-center\">\n                        <Package size={16} className=\"mr-2 text-primary\" />\n                        <h6 className=\"mb-0\">\n                            {isHistorical ? 'Actual Stock Impact' : 'Current Stock Status'}\n                        </h6>\n                        {getStatusBadge()}\n                    </div>\n                    {showTooltip && (\n                        <Info\n                            size={14}\n                            className=\"text-muted cursor-pointer\"\n                            id={`stock-impact-info-${product?.id || 'unknown'}`}\n                        />\n                    )}\n                </div>\n            )}\n\n            {/* Stock Available Row */}\n            <div className=\"stock-impact-row mb-2\">\n                <Row className=\"align-items-center\">\n                    <Col xs={4}>\n                        <div className=\"d-flex align-items-center\">\n                            <Package size={12} className=\"mr-2 text-info\" />\n                            <span className=\"font-weight-bold\">Stock</span>\n                        </div>\n                    </Col>\n                    <Col xs={8}>\n                        <div className=\"d-flex justify-content-between align-items-center\">\n                            <div className=\"d-flex align-items-center\">\n                                <span className=\"text-muted mr-2\">Before:</span>\n                                <span className=\"font-weight-bold\">{stockData.stockAvailBefore}</span>\n                            </div>\n                            {isHistorical && (\n                                <>\n                                    <ArrowRight size={12} className=\"mx-2 text-muted\" />\n                                    <div className=\"d-flex align-items-center\">\n                                        <span className={`font-weight-bold ${\n                                            stockData.stockDiff > 0 ? 'text-success' : stockData.stockDiff < 0 ? 'text-danger' : ''\n                                        }`}>\n                                            {stockData.stockAvailAfter}\n                                        </span>\n                                        {stockData.stockDiff !== 0 && (\n                                            <Badge\n                                                color={getBadgeColor(stockData.stockDiff)}\n                                                className=\"ml-2 d-flex align-items-center\"\n                                                pill\n                                            >\n                                                {getDiffIcon(stockData.stockDiff)}\n                                                {getDiffLabel(stockData.stockDiff)}\n                                            </Badge>\n                                        )}\n                                    </div>\n                                </>\n                            )}\n                        </div>\n                    </Col>\n                </Row>\n            </div>\n\n            {/* Store Available Row */}\n            <div className=\"stock-impact-row mb-2\">\n                <Row className=\"align-items-center\">\n                    <Col xs={4}>\n                        <div className=\"d-flex align-items-center\">\n                            <Package size={12} className=\"mr-2 text-warning\" />\n                            <span className=\"font-weight-bold\">Store</span>\n                        </div>\n                    </Col>\n                    <Col xs={8}>\n                        <div className=\"d-flex justify-content-between align-items-center\">\n                            <div className=\"d-flex align-items-center\">\n                                <span className=\"text-muted mr-2\">Before:</span>\n                                <span className=\"font-weight-bold\">{stockData.storeAvailBefore}</span>\n                            </div>\n                            {isHistorical && (\n                                <>\n                                    <ArrowRight size={12} className=\"mx-2 text-muted\" />\n                                    <div className=\"d-flex align-items-center\">\n                                        <span className={`font-weight-bold ${\n                                            stockData.storeDiff > 0 ? 'text-success' : stockData.storeDiff < 0 ? 'text-danger' : ''\n                                        }`}>\n                                            {stockData.storeAvailAfter}\n                                        </span>\n                                        {stockData.storeDiff !== 0 && (\n                                            <Badge\n                                                color={getBadgeColor(stockData.storeDiff)}\n                                                className=\"ml-2 d-flex align-items-center\"\n                                                pill\n                                            >\n                                                {getDiffIcon(stockData.storeDiff)}\n                                                {getDiffLabel(stockData.storeDiff)}\n                                            </Badge>\n                                        )}\n                                    </div>\n                                </>\n                            )}\n                        </div>\n                    </Col>\n                </Row>\n            </div>\n\n            {/* Total Row */}\n            <div className=\"stock-impact-row pt-2 border-top\">\n                <Row className=\"align-items-center\">\n                    <Col xs={4}>\n                        <div className=\"d-flex align-items-center\">\n                            <Package size={12} className=\"mr-2 text-primary\" />\n                            <span className=\"font-weight-bold\">Total</span>\n                        </div>\n                    </Col>\n                    <Col xs={8}>\n                        <div className=\"d-flex justify-content-between align-items-center\">\n                            <div className=\"d-flex align-items-center\">\n                                <span className=\"text-muted mr-2\">Before:</span>\n                                <span className=\"font-weight-bold\">{stockData.totalBefore}</span>\n                            </div>\n                            {isHistorical && (\n                                <>\n                                    <ArrowRight size={12} className=\"mx-2 text-muted\" />\n                                    <div className=\"d-flex align-items-center\">\n                                        <span className={`font-weight-bold ${\n                                            stockData.totalDiff > 0 ? 'text-success' : stockData.totalDiff < 0 ? 'text-danger' : ''\n                                        }`}>\n                                            {stockData.totalAfter}\n                                        </span>\n                                        {stockData.totalDiff !== 0 && (\n                                            <Badge\n                                                color={getBadgeColor(stockData.totalDiff)}\n                                                className=\"ml-2 d-flex align-items-center\"\n                                                pill\n                                            >\n                                                {getDiffIcon(stockData.totalDiff)}\n                                                {getDiffLabel(stockData.totalDiff)}\n                                            </Badge>\n                                        )}\n                                    </div>\n                                </>\n                            )}\n                        </div>\n                    </Col>\n                </Row>\n            </div>\n\n            {/* Transfer Details */}\n            <div className=\"mt-3 pt-3 border-top\">\n                <div className=\"small text-muted\">\n                    <div className=\"d-flex justify-content-between mb-1\">\n                        <span>Quantity:</span>\n                        <strong>{product?.quantity || 0}</strong>\n                    </div>\n                    <div className=\"d-flex justify-content-between mb-1\">\n                        <span>From:</span>\n                        <span className=\"text-capitalize\">\n                            {product?.from_location_label || product?.from_location || 'stock_available'}\n                        </span>\n                    </div>\n                    <div className=\"d-flex justify-content-between\">\n                        <span>To:</span>\n                        <span className=\"text-capitalize\">\n                            {product?.to_location_label || product?.to_location || 'store_available'}\n                        </span>\n                    </div>\n                </div>\n            </div>\n\n            {showTooltip && (\n                <Tooltip\n                    placement=\"top\"\n                    target={`stock-impact-info-${product?.id || 'unknown'}`}\n                >\n                    {isHistorical ? 'Shows actual stock changes after transfer completion' : 'Shows current stock status (no changes yet)'}\n                </Tooltip>\n            )}\n        </div>\n    )\n}\n\nexport default StockImpact","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar Trash2 = forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 24 : _ref$size,\n      rest = _objectWithoutProperties(_ref, [\"color\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: color,\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, rest), /*#__PURE__*/React.createElement(\"polyline\", {\n    points: \"3 6 5 6 21 6\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"\n  }), /*#__PURE__*/React.createElement(\"line\", {\n    x1: \"10\",\n    y1: \"11\",\n    x2: \"10\",\n    y2: \"17\"\n  }), /*#__PURE__*/React.createElement(\"line\", {\n    x1: \"14\",\n    y1: \"11\",\n    x2: \"14\",\n    y2: \"17\"\n  }));\n});\nTrash2.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nTrash2.displayName = 'Trash2';\nexport default Trash2;","// ** React Imports\nimport { Link } from 'react-router-dom'\n\n// ** Third Party Components\nimport Proptypes from 'prop-types'\nimport { Grid, CheckSquare, MessageSquare, Mail, Calendar } from 'react-feather'\nimport {\n  Breadcrumb,\n  BreadcrumbItem,\n  UncontrolledButtonDropdown,\n  DropdownMenu,\n  DropdownItem,\n  DropdownToggle\n} from 'reactstrap'\n\nconst BreadCrumbs = props => {\n  // ** Props\n  const { breadCrumbTitle, breadCrumbParent, breadCrumbParent2, breadCrumbParent3, breadCrumbActive, right } = props\n\n  return (\n    <div className='content-header row'>\n      <div className='content-header-left col-9 mb-2'>\n      {/*<div className='content-header-left col-md-9 col-12 mb-2'>*/}\n        <div className='row breadcrumbs-top'>\n          <div className='col-12'>\n            {breadCrumbTitle ? <h2 className='content-header-title float-left mb-0'>{breadCrumbTitle}</h2> : ''}\n            <div className='breadcrumb-wrapper vs-breadcrumbs d-sm-block d-none col-12'>\n              <Breadcrumb>\n                <BreadcrumbItem tag='li'>\n                  <Link to='/'>Home</Link>\n                </BreadcrumbItem>\n                {\n                  breadCrumbParent &&\n                  <BreadcrumbItem tag='li' className='text-primary'>\n                    {breadCrumbParent}\n                  </BreadcrumbItem>\n                }\n                {breadCrumbParent2 ? (\n                  <BreadcrumbItem tag='li' className='text-primary'>\n                    {breadCrumbParent2}\n                  </BreadcrumbItem>\n                ) : (\n                  ''\n                )}\n                {breadCrumbParent3 ? (\n                  <BreadcrumbItem tag='li' className='text-primary'>\n                    {breadCrumbParent3}\n                  </BreadcrumbItem>\n                ) : (\n                  ''\n                )}\n                <BreadcrumbItem tag='li' active>\n                  {breadCrumbActive}\n                </BreadcrumbItem>\n              </Breadcrumb>\n            </div>\n          </div>\n        </div>\n      </div>\n      {\n        right ? (\n          <div className='content-header-right text-md-right col-3'>\n            {/*<div className='content-header-right text-md-right col-md-3 col-12 d-md-block d-none'>*/}\n            <div className='form-group breadcrum-right dropdown'>\n              { right }\n              {/*<UncontrolledButtonDropdown>*/}\n              {/*  <DropdownToggle color='primary' size='sm' className='btn-icon btn-round dropdown-toggle'>*/}\n              {/*    <Grid size={14} />*/}\n              {/*  </DropdownToggle>*/}\n              {/*  <DropdownMenu tag='ul' right>*/}\n              {/*    <DropdownItem tag={Link} to='/apps/chat'>*/}\n              {/*      <CheckSquare className='mr-1' size={14} />*/}\n              {/*      <span className='align-middle'>Todo</span>*/}\n              {/*    </DropdownItem>*/}\n              {/*    <DropdownItem tag={Link} to='/apps/chat'>*/}\n              {/*      <MessageSquare className='mr-1' size={14} />*/}\n              {/*      <span className='align-middle'>Chat</span>*/}\n              {/*    </DropdownItem>*/}\n              {/*    <DropdownItem tag={Link} to='/apps/email'>*/}\n              {/*      <Mail className='mr-1' size={14} />*/}\n              {/*      <span className='align-middle'>Email</span>*/}\n              {/*    </DropdownItem>*/}\n              {/*    <DropdownItem tag={Link} to='/apps/calendar'>*/}\n              {/*      <Calendar className='mr-1' size={14} />*/}\n              {/*      <span className='align-middle'>Calendar</span>*/}\n              {/*    </DropdownItem>*/}\n              {/*  </DropdownMenu>*/}\n              {/*</UncontrolledButtonDropdown>*/}\n            </div>\n          </div>\n        ) : ''\n      }\n\n    </div>\n  )\n}\nexport default BreadCrumbs\n\n// ** PropTypes\nBreadCrumbs.propTypes = {\n  breadCrumbTitle: Proptypes.string.isRequired,\n  breadCrumbActive: Proptypes.string.isRequired\n}\n","// src/views/transfer-order/edit/index.js\nimport { Fragment, useState, useEffect, useRef } from 'react'\nimport Breadcrumbs from '@components/breadcrumbs'\nimport {\n    Row,\n    Col,\n    Button,\n    Card,\n    CardBody,\n    Spinner,\n    Alert,\n    FormGroup,\n    Label,\n    Input,\n    Badge,\n    Table,\n    CardHeader,\n    Collapse\n} from 'reactstrap'\nimport { useHistory, useParams } from 'react-router-dom'\nimport { toast } from 'react-toastify'\nimport { Save, X, ArrowLeft, AlertTriangle, Package, Trash2, RefreshCw, BarChart2, CheckCircle, ArrowRight, Database, ChevronDown } from 'react-feather'\nimport AsyncSelect from 'react-select/async/dist/react-select.esm'\nimport { useTransferOrder } from '@data/use-transfer-order'\nimport TransferOrderStatus from '../components/TransferOrderStatus'\nimport StockImpact from '../components/StockImpact'\nimport ability from \"../../../configs/acl/ability\"\nimport axios from '../../../utility/axiosIsntance'\nimport { api as productApi } from '@data/use-product'\nimport { showError, showSuccess } from '../../../utility/Utils'\n\nexport default function EditTransferOrder() {\n    const { id } = useParams()\n    const history = useHistory()\n    const { data: transferOrderData, isLoading, refetch } = useTransferOrder(id)\n    const [transferOrder, setTransferOrder] = useState(null)\n    const [loaded, setLoaded] = useState(false)\n    const [isSubmitting, setIsSubmitting] = useState(false)\n    const [products, setProducts] = useState([])\n    const [notes, setNotes] = useState('')\n    const [selectedProduct, setSelectedProduct] = useState(null)\n    const [loading, setLoading] = useState(false)\n    const [stockErrors, setStockErrors] = useState({})\n    const [defaultOptions, setDefaultOptions] = useState([])\n    const optionsCache = useRef(new Map())\n\n    // Add to the existing state declarations (around line 33)\n    const [bulkSectionOpen, setBulkSectionOpen] = useState(true)\n    const [bulkFromLocation, setBulkFromLocation] = useState('stock_available')\n    const [bulkToLocation, setBulkToLocation] = useState('store_available')\n\n    const canEdit = ability.can('read', 'transfer_order_edit')\n    const canComplete = ability.can('read', 'transfer_order_complete')\n    const canCancel = ability.can('read', 'transfer_order_cancel')\n\n    useEffect(() => {\n        if (transferOrderData) {\n            if (transferOrderData.data) {\n                setTransferOrder(transferOrderData.data)\n            } else {\n                setTransferOrder(transferOrderData)\n            }\n        }\n    }, [transferOrderData])\n\n    // Load initial product options\n    const loadInitialOptions = async () => {\n        const cacheKey = 'initial'\n        if (optionsCache.current.has(cacheKey)) {\n            setDefaultOptions(optionsCache.current.get(cacheKey))\n            return\n        }\n\n        try {\n            const data = await productApi.autocomplete('')\n            const options = data.map((product) => {\n                const stockValue = product.stock || product.current_stock || product.quantity || 0\n                const stockAvailable = product.stock_available || product.current_stock_available || 0\n                const storeAvailable = product.store_available || product.current_store_available || 0\n                const skuValue = product.sku || 'N/A'\n                const productName = product.name || 'Unknown Product'\n                const imageUrl = product.image || '/static/images/placeholder.png'\n\n                return {\n                    label: (\n                        <div style={{ display: 'flex', alignItems: 'center' }}>\n                            <img\n                                src={imageUrl}\n                                alt={productName}\n                                height=\"32\"\n                                width=\"32\"\n                                style={{ marginRight: '10px', borderRadius: '4px' }}\n                            />\n                            <div>\n                                <div style={{ fontWeight: 'bold' }}>{productName}</div>\n                                <div style={{ fontSize: '12px', color: '#666' }}>\n                                    SKU: {skuValue} | Stock: {stockValue} | Stock Avail: {stockAvailable}\n                                </div>\n                            </div>\n                        </div>\n                    ),\n                    value: product.id,\n                    item: {\n                        ...product,\n                        id: product.id,\n                        stock: stockValue,\n                        stock_available: stockAvailable,\n                        store_available: storeAvailable,\n                        name: productName,\n                        sku: skuValue,\n                        image: imageUrl,\n                        location: product.location || 'N/A',\n                        stock_location: product.stock_location || 'N/A'\n                    }\n                }\n            })\n\n            optionsCache.current.set(cacheKey, options)\n            setDefaultOptions(options)\n        } catch (error) {\n            console.error('Failed to load initial options:', error)\n            setDefaultOptions([])\n        }\n    }\n\n    // Promise options for AsyncSelect\n    const promiseOptions = async (inputValue) => {\n        const cacheKey = inputValue || 'empty'\n        if (optionsCache.current.has(cacheKey)) {\n            return optionsCache.current.get(cacheKey)\n        }\n\n        try {\n            setLoading(true)\n            const data = await productApi.autocomplete(inputValue)\n            const options = data.map((product) => {\n                const stockValue = product.stock || product.current_stock || product.quantity || 0\n                const stockAvailable = product.stock_available || product.current_stock_available || 0\n                const storeAvailable = product.store_available || product.current_store_available || 0\n                const skuValue = product.sku || 'N/A'\n                const productName = product.name || 'Unknown Product'\n                const imageUrl = product.image || '/static/images/placeholder.png'\n\n                return {\n                    label: (\n                        <div style={{ display: 'flex', alignItems: 'center' }}>\n                            <img\n                                src={imageUrl}\n                                alt={productName}\n                                height=\"32\"\n                                width=\"32\"\n                                style={{ marginRight: '10px', borderRadius: '4px' }}\n                            />\n                            <div>\n                                <div style={{ fontWeight: 'bold' }}>{productName}</div>\n                                <div style={{ fontSize: '12px', color: '#666' }}>\n                                    SKU: {skuValue} | Stock: {stockValue} | Stock Avail: {stockAvailable}\n                                </div>\n                            </div>\n                        </div>\n                    ),\n                    value: product.id,\n                    item: {\n                        ...product,\n                        id: product.id,\n                        stock: stockValue,\n                        stock_available: stockAvailable,\n                        store_available: storeAvailable,\n                        name: productName,\n                        sku: skuValue,\n                        image: imageUrl,\n                        location: product.location || 'N/A',\n                        stock_location: product.stock_location || 'N/A'\n                    }\n                }\n            })\n\n            optionsCache.current.set(cacheKey, options)\n            return options\n        } catch (error) {\n            console.error('Failed to load options:', error)\n            return []\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    // Get product details with stock information\n    const getProductDetails = async (productId) => {\n        try {\n            const product = await productApi.show(productId)\n\n            let stockAvailable = product.stock_available\n            let storeAvailable = product.store_available\n\n            if (stockAvailable === null || stockAvailable === undefined ||\n                storeAvailable === null || storeAvailable === undefined) {\n                try {\n                    const stockResponse = await axios.get(`/products/${productId}/stock`)\n                    if (stockResponse.data && stockResponse.data.data) {\n                        stockAvailable = stockResponse.data.data.stock_available || 0\n                        storeAvailable = stockResponse.data.data.store_available || 0\n                    }\n                } catch (stockError) {\n                    console.log('No separate stock endpoint, using fallback values')\n                    stockAvailable = product.stock_available || product.stock || 0\n                    storeAvailable = product.store_available || 0\n                }\n            }\n\n            return {\n                ...product,\n                id: product.id,\n                stock: product.stock || 0,\n                stock_available: stockAvailable,\n                store_available: storeAvailable,\n                name: product.name || 'Unknown Product',\n                sku: product.sku || 'N/A',\n                image: product.image || '/static/images/placeholder.png',\n                location: product.location || 'N/A',\n                stock_location: product.stock_location || 'N/A'\n            }\n        } catch (error) {\n            console.error('Error getting product details:', error)\n            throw error\n        }\n    }\n\n    const validateStock = (productsList) => {\n        const errors = {}\n        productsList.forEach((product, index) => {\n            if (product.product) {\n                const availableStock = product.from_location === 'stock_available' ? (product.product.stock_available || 0) : (product.product.store_available || 0)\n\n                if (parseInt(product.quantity || 0) > availableStock) {\n                    errors[index] = `Insufficient stock. Available: ${availableStock}`\n                }\n            }\n        })\n        setStockErrors(errors)\n        return Object.keys(errors).length === 0\n    }\n\n\n    const applyBulkLocation = () => {\n        if (bulkFromLocation === bulkToLocation) {\n            showError('From and To locations cannot be the same')\n            return\n        }\n\n        setProducts(prev => {\n            const updated = prev.map(product => {\n                const availableStock = bulkFromLocation === 'stock_available' ? (product.product?.stock_available || 0) : (product.product?.store_available || 0)\n\n                let quantity = product.quantity\n                if (parseInt(quantity) > availableStock) {\n                    quantity = availableStock > 0 ? availableStock : 1\n                    showError(`Quantity adjusted to ${quantity} for ${product.product?.name} due to insufficient stock in ${bulkFromLocation}`)\n                }\n\n                return {\n                    ...product,\n                    from_location: bulkFromLocation,\n                    to_location: bulkToLocation,\n                    quantity\n                }\n            })\n\n            validateStock(updated)\n            return updated\n        })\n\n        showSuccess(`Applied locations to all products`)\n    }\n\n// Swap bulk locations\n    const swapBulkLocations = () => {\n        const temp = bulkFromLocation\n        setBulkFromLocation(bulkToLocation)\n        setBulkToLocation(temp)\n    }\n    // Handle product selection\n    const handleProductSelect = async (selectedOption) => {\n        if (selectedOption) {\n            const existingProduct = products.find(p => p.product_id === selectedOption.value)\n            if (existingProduct) {\n                showError('Product already added to transfer list')\n                setSelectedProduct(null)\n                return\n            }\n\n            try {\n                const productData = await getProductDetails(selectedOption.value)\n\n                const newProduct = {\n                    product_id: selectedOption.value,\n                    product: productData,\n                    from_location: bulkFromLocation,\n                    to_location: bulkToLocation,\n                    quantity: 1\n                }\n\n                setProducts(prev => [...prev, newProduct])\n                setSelectedProduct(null)\n\n                showSuccess(`Added ${productData.name} to transfer list`)\n                validateStock([...products, newProduct])\n            } catch (error) {\n                console.error('Error in handleProductSelect:', error)\n                showError('Failed to load product details. Please try again.')\n\n                const newProduct = {\n                    product_id: selectedOption.value,\n                    product: {\n                        ...selectedOption.item,\n                        stock_available: selectedOption.item.stock || 0,\n                        store_available: 0\n                    },\n                    from_location: bulkFromLocation,\n                    to_location: bulkToLocation,\n                    quantity: 1\n                }\n                setProducts(prev => [...prev, newProduct])\n                setSelectedProduct(null)\n                validateStock([...products, newProduct])\n                showError('Product added with estimated stock values. Please verify.')\n            }\n        }\n    }\n\n    // Load form data\n    useEffect(() => {\n        if (!loaded && transferOrder) {\n            setLoaded(true)\n            setNotes(transferOrder.notes || '')\n\n            // Format products from transferOrder\n            if (transferOrder.products && transferOrder.products.length > 0) {\n                const formattedProducts = transferOrder.products.map(p => ({\n                    product_id: p.product_id,\n                    product: {\n                        id: p.product_id,\n                        name: p.product_name,\n                        sku: p.product_sku,\n                        image: p.product_image,\n                        stock_available: p.current_stock_available || 0,\n                        store_available: p.current_store_available || 0,\n                        location: p.product_location || 'N/A',\n                        stock_location: p.product_stock_location || 'N/A'\n                    },\n                    from_location: p.from_location || 'stock_available',\n                    to_location: p.to_location || 'store_available',\n                    quantity: p.quantity || 1,\n                    // Include stock history if available\n                    stock_available_before: p.stock_available_before,\n                    stock_available_after: p.stock_available_after,\n                    store_available_before: p.store_available_before,\n                    store_available_after: p.store_available_after,\n                    stock_before: p.stock_before,\n                    stock_after: p.stock_after,\n                    // Include current values for display\n                    current_stock_available: p.current_stock_available || 0,\n                    current_store_available: p.current_store_available || 0,\n                    location: p.product_location || 'N/A',\n                    stock_location: p.product_stock_location || 'N/A'\n                }))\n                setProducts(formattedProducts)\n                validateStock(formattedProducts)\n            }\n        }\n    }, [transferOrder, loaded])\n\n    const handleProductChange = (index, field, value) => {\n        setProducts(prev => {\n            const updated = [...prev]\n            updated[index][field] = value\n\n            if (field === 'from_location') {\n                if (value === updated[index].to_location) {\n                    updated[index].to_location = value === 'stock_available' ? 'store_available' : 'stock_available'\n                }\n            } else if (field === 'to_location') {\n                if (value === updated[index].from_location) {\n                    showError('From and To locations cannot be the same')\n                    return prev\n                }\n            } else if (field === 'quantity') {\n                const numValue = parseInt(value) || 1\n\n                if (numValue < 1) {\n                    updated[index][field] = 1\n                    return updated\n                }\n\n                const availableStock = updated[index].from_location === 'stock_available' ? (updated[index].product?.stock_available || 0) : (updated[index].product?.store_available || 0)\n\n                if (numValue > availableStock) {\n                    showError(`Cannot transfer more than available stock (${availableStock}) for ${updated[index].product?.name}`)\n                    updated[index][field] = availableStock > 0 ? availableStock : 1\n                } else {\n                    updated[index][field] = numValue\n                }\n            }\n\n            validateStock(updated)\n            return updated\n        })\n    }\n\n    // Refresh product stock\n    const refreshProductStock = async (index) => {\n        try {\n            const product = products[index]\n            const updatedProduct = await getProductDetails(product.product_id)\n\n            setProducts(prev => {\n                const updated = [...prev]\n                updated[index].product = {\n                    ...updated[index].product,\n                    ...updatedProduct\n                }\n\n                const availableStock = updated[index].from_location === 'stock_available' ? (updatedProduct.stock_available || 0) : (updatedProduct.store_available || 0)\n                const currentQuantity = parseInt(updated[index].quantity || 0)\n\n                if (currentQuantity > availableStock) {\n                    updated[index].quantity = availableStock > 0 ? availableStock : 1\n                    showError(`Quantity adjusted to ${availableStock} for ${updatedProduct.name}`)\n                }\n\n                return updated\n            })\n\n            validateStock(products)\n            showSuccess('Stock information updated')\n        } catch (error) {\n            console.error('Error refreshing stock:', error)\n            showError('Failed to refresh stock information')\n        }\n    }\n\n    const handleRemoveProduct = (index) => {\n        const productName = products[index]?.product?.name || 'Product'\n        const updatedProducts = products.filter((_, i) => i !== index)\n        setProducts(updatedProducts)\n\n        const newErrors = { ...stockErrors }\n        delete newErrors[index]\n        setStockErrors(newErrors)\n\n        showSuccess(`Removed ${productName} from transfer list`)\n    }\n\n    const hasInsufficientStock = () => {\n        return products.some(product => {\n            const availableStock = product.from_location === 'stock_available' ? (product.product?.stock_available || 0) : (product.product?.store_available || 0)\n            return parseInt(product.quantity || 0) > availableStock\n        })\n    }\n\n    const getTotalQuantity = () => {\n        return products.reduce((total, product) => total + (parseInt(product.quantity) || 0), 0)\n    }\n\n    const calculateStockSummary = () => {\n        const summary = {\n            stock_to_store: { count: 0, quantity: 0 },\n            store_to_stock: { count: 0, quantity: 0 }\n        }\n\n        products.forEach(product => {\n            if (product.from_location === 'stock_available' && product.to_location === 'store_available') {\n                summary.stock_to_store.count++\n                summary.stock_to_store.quantity += parseInt(product.quantity) || 0\n            } else if (product.from_location === 'store_available' && product.to_location === 'stock_available') {\n                summary.store_to_stock.count++\n                summary.store_to_stock.quantity += parseInt(product.quantity) || 0\n            }\n        })\n\n        return summary\n    }\n\n    const onSubmit = async () => {\n        if (!canEdit) {\n            toast.error('You do not have permission to edit transfer orders')\n            return\n        }\n\n        if (!products || products.length === 0) {\n            toast.error('Please add at least one product')\n            return\n        }\n\n        if (hasInsufficientStock()) {\n            toast.error('Some products exceed available stock. Please fix before saving.')\n            return\n        }\n\n        setIsSubmitting(true)\n\n        try {\n            const preparedData = {\n                notes: notes || '',\n                products: products.map(p => ({\n                    product_id: p.product_id,\n                    from_location: p.from_location,\n                    to_location: p.to_location,\n                    quantity: parseInt(p.quantity) || 1\n                }))\n            }\n\n            await axios.put(`/transfer-orders/${id}`, preparedData)\n            toast.success('Transfer order updated successfully')\n\n            // Option 1A: Force full page reload\n            window.location.reload()\n        } catch (error) {\n            console.error('Update error:', error)\n            toast.error(error.response?.data?.message || 'Failed to update transfer order')\n        } finally {\n            setIsSubmitting(false)\n        }\n    }\n\n    const handleToggleStatus = async () => {\n        if (!canComplete) {\n            toast.error('You do not have permission to change transfer order status')\n            return\n        }\n\n        try {\n            await axios.put(`/transfer-orders/${id}/toggle-status`)\n            toast.success('Transfer order status updated successfully')\n            refetch()\n        } catch (error) {\n            toast.error(error.response?.data?.message || 'Failed to update transfer order status')\n        }\n    }\n\n    const handleBack = () => {\n        history.push(`/transfer-order/details/${id}`)\n    }\n\n    const handleDelete = async () => {\n        if (!ability.can('read', 'transfer_order_delete')) {\n            toast.error('You do not have permission to delete transfer orders')\n            return\n        }\n\n        if (window.confirm('Are you sure you want to delete this transfer order? This action cannot be undone!')) {\n            try {\n                await axios.delete(`/transfer-orders/${id}`)\n                toast.success('Transfer order deleted successfully')\n                history.push('/transfer-order/list')\n            } catch (error) {\n                toast.error(error.response?.data?.message || 'Failed to delete transfer order')\n            }\n        }\n    }\n\n    // Load initial options on mount\n    useEffect(() => {\n        loadInitialOptions()\n    }, [])\n\n    if (isLoading) {\n        return (\n            <Fragment>\n                <Breadcrumbs breadCrumbTitle='Transfer Orders' breadCrumbActive='Edit Transfer' />\n                <div className=\"d-flex justify-content-center my-5\">\n                    <Spinner color=\"primary\" />\n                </div>\n            </Fragment>\n        )\n    }\n\n    if (!transferOrder) {\n        return (\n            <Fragment>\n                <Breadcrumbs breadCrumbTitle='Transfer Orders' breadCrumbActive='Edit Transfer' />\n                <Alert color=\"danger\">\n                    Transfer order not found\n                </Alert>\n            </Fragment>\n        )\n    }\n\n    const cannotEdit = transferOrder && !transferOrder.can_edit\n    const stockSummary = calculateStockSummary()\n\n    return (\n        <Fragment>\n            <Breadcrumbs\n                breadCrumbTitle='Transfer Orders'\n                breadCrumbActive={`Edit Transfer #${transferOrder.number}`}\n            />\n\n            <Card>\n                <CardBody>\n                    <div className=\"mb-2\">\n                        <div className=\"d-flex justify-content-between align-items-center\">\n                            <div>\n                                <h4 className=\"mb-0\">\n                                    Edit Transfer #{transferOrder.number}\n                                </h4>\n                            </div>\n                            <div>\n                                <Button\n                                    color=\"secondary\"\n                                    onClick={() => history.push('/transfer-order/list')}\n                                    className=\"mr-2\"\n                                >\n                                    <ArrowLeft size={14} className=\"mr-1\" />\n                                    Back to List\n                                </Button>\n                                <Button\n                                    color=\"primary\"\n                                    onClick={handleBack}\n                                    className=\"mr-2\"\n                                >\n                                    Details\n                                </Button>\n\n                            </div>\n                        </div>\n\n                        {cannotEdit && (\n                            <Alert color=\"warning\" className=\"mt-1\">\n                                <AlertTriangle size={16} className=\"mr-2\" />\n                                This transfer order cannot be edited because it's {transferOrder.status.toLowerCase()}.\n                            </Alert>\n                        )}\n                    </div>\n\n                    <Row>\n                        <Col md={8} sm={12}>\n                            {/* Transfer Details */}\n                            <Card className=\"mb-2\">\n                                <CardBody>\n                                    <h5 className=\"mb-2\">\n                                        <Package size={18} className=\"mr-2\" />\n                                        Transfer Details\n                                    </h5>\n\n                                    {/* Product Search */}\n                                    {!cannotEdit && (\n                                        <FormGroup>\n                                            <Label for=\"product-search\">Search Product to Add</Label>\n                                            <AsyncSelect\n                                                id=\"product-search\"\n                                                isClearable={true}\n                                                className='react-select'\n                                                classNamePrefix='select'\n                                                value={selectedProduct ? {\n                                                    value: selectedProduct.id,\n                                                    label: selectedProduct.name,\n                                                    item: selectedProduct\n                                                } : null}\n                                                loadOptions={promiseOptions}\n                                                defaultOptions={defaultOptions}\n                                                cacheOptions\n                                                onChange={handleProductSelect}\n                                                placeholder=\"Search for products to add...\"\n                                                isLoading={loading}\n                                                noOptionsMessage={({ inputValue }) => {\n                                                    if (!inputValue || inputValue.trim() === '') {\n                                                        return \"Start typing to search products\"\n                                                    }\n                                                    if (loading) {\n                                                        return \"Searching...\"\n                                                    }\n                                                    return \"No products found\"\n                                                }}\n                                                filterOption={null}\n                                                formatOptionLabel={(option, { context }) => {\n                                                    if (context === 'menu') {\n                                                        return option.label\n                                                    }\n                                                    return option.item ? option.item.name : option.label\n                                                }}\n                                                styles={{\n                                                    control: (base) => ({\n                                                        ...base,\n                                                        minHeight: '42px'\n                                                    }),\n                                                    menu: (base) => ({\n                                                        ...base,\n                                                        zIndex: 9999\n                                                    })\n                                                }}\n                                            />\n                                        </FormGroup>\n                                    )}\n                                    {/* Add this after the Product Search form group (around line 430) */}\n                                    {/* Bulk Location Selection */}\n                                    {!cannotEdit && (\n                                        <Card className=\"mb-3 border-primary\">\n                                            <CardHeader\n                                                style={{ cursor: 'pointer', padding: '0.5rem 1rem' }}\n                                                onClick={() => setBulkSectionOpen(!bulkSectionOpen)}\n                                            >\n                                                <div className=\"d-flex justify-content-between align-items-center w-100\">\n                                                    <div className=\"d-flex align-items-center\" style={{ flex: 1 }}>\n                                                        <h6 className=\"mb-0\" style={{ fontSize: '0.9rem', marginRight: '1rem' }}>\n                                                            Bulk Location Settings\n                                                        </h6>\n                                                        {!bulkSectionOpen && (\n                                                            <div className=\"text-muted small\">\n                                                                <Badge color={bulkFromLocation === 'stock_available' ? 'info' : 'warning'} className=\"mr-1\">\n                                                                    {bulkFromLocation === 'stock_available' ? 'Stock' : 'Store'}\n                                                                </Badge>\n                                                                \n                                                                <Badge color={bulkToLocation === 'store_available' ? 'warning' : 'info'} className=\"ml-1\">\n                                                                    {bulkToLocation === 'store_available' ? 'Store' : 'Stock'}\n                                                                </Badge>\n                                                            </div>\n                                                        )}\n                                                    </div>\n                                                    <ChevronDown\n                                                        size={16}\n                                                        style={{\n                                                            transform: bulkSectionOpen ? 'rotate(180deg)' : 'rotate(0deg)',\n                                                            transition: 'transform 0.2s ease',\n                                                            marginLeft: 'auto'\n                                                        }}\n                                                    />\n                                                </div>\n                                            </CardHeader>\n                                            <Collapse isOpen={bulkSectionOpen}>\n                                                <CardBody className=\"pb-0 pt-1\" style={{ padding: '0.5rem 1rem' }}>\n                                                    <Row>\n                                                        <Col md={5}>\n                                                            <FormGroup className=\"mb-0\">\n                                                                <Label for=\"bulk-from\" className=\"small mb-0\">From Location</Label>\n                                                                <Input\n                                                                    type=\"select\"\n                                                                    id=\"bulk-from\"\n                                                                    value={bulkFromLocation}\n                                                                    onChange={(e) => setBulkFromLocation(e.target.value)}\n                                                                    className=\"form-control-sm\"\n                                                                    disabled={isSubmitting || cannotEdit}\n                                                                >\n                                                                    <option value=\"stock_available\">Stock Available</option>\n                                                                    <option value=\"store_available\">Store Available</option>\n                                                                </Input>\n                                                            </FormGroup>\n                                                        </Col>\n                                                        <Col md={2} className=\"d-flex align-items-center justify-content-center\">\n                                                            <Button\n                                                                color=\"secondary\"\n                                                                size=\"sm\"\n                                                                onClick={swapBulkLocations}\n                                                                disabled={isSubmitting || cannotEdit}\n                                                                className=\"mt-1\"\n                                                            >\n                                                                Swap\n                                                            </Button>\n                                                        </Col>\n                                                        <Col md={5}>\n                                                            <FormGroup className=\"mb-0\">\n                                                                <Label for=\"bulk-to\" className=\"small mb-0\">To Location</Label>\n                                                                <Input\n                                                                    type=\"select\"\n                                                                    id=\"bulk-to\"\n                                                                    value={bulkToLocation}\n                                                                    onChange={(e) => setBulkToLocation(e.target.value)}\n                                                                    className=\"form-control-sm\"\n                                                                    disabled={isSubmitting || cannotEdit}\n                                                                >\n                                                                    <option value=\"stock_available\">Stock Available</option>\n                                                                    <option value=\"store_available\">Store Available</option>\n                                                                </Input>\n                                                            </FormGroup>\n                                                        </Col>\n                                                    </Row>\n                                                    <Row className=\"my-1\">\n                                                        <Col md={12} className=\"text-right\">\n                                                            <Button\n                                                                color=\"primary\"\n                                                                size=\"sm\"\n                                                                onClick={applyBulkLocation}\n                                                                disabled={products.length === 0 || isSubmitting || bulkFromLocation === bulkToLocation || cannotEdit}\n                                                            >\n                                                                Apply to All Products\n                                                            </Button>\n                                                        </Col>\n                                                    </Row>\n                                                </CardBody>\n                                            </Collapse>\n                                        </Card>\n                                    )}\n                                    {/* Products Table */}\n                                    <div className=\"mt-4\">\n                                        <div className=\"d-flex justify-content-between align-items-center mb-1\">\n                                            <h6 className=\"mb-0\">Products in Transfer ({products.length})</h6>\n                                            <div className=\"text-muted\">\n                                                {getTotalQuantity()} units\n                                            </div>\n                                        </div>\n\n                                        {products.length > 0 ? (\n                                            <div className=\"table-responsive mb-3\">\n                                                <Table bordered hover>\n                                                    <thead className=\"thead-light\">\n                                                    <tr>\n                                                        <th width=\"20%\">Product</th>\n                                                        <th width=\"10%\">From</th>\n                                                        <th width=\"10%\">To</th>\n                                                        <th width=\"10%\">Quantity</th>\n                                                        <th width=\"15%\"> Current Stock</th>\n                                                        <th width=\"25%\">Stock Impact</th>\n                                                        <th width=\"10%\">Actions</th>\n                                                    </tr>\n                                                    </thead>\n                                                    <tbody>\n                                                    {products.map((product, index) => {\n                                                        const productData = product.product || {}\n                                                        const availableStock = product.from_location === 'stock_available' ? (productData.stock_available || 0) : (productData.store_available || 0)\n                                                        const hasStockError = stockErrors[index]\n                                                        const isEditable = canEdit && !cannotEdit\n                                                        const productImage = productData.image || '/static/images/placeholder.png'\n                                                        const productName = productData.name || 'Product'\n                                                        const productSku = productData.sku || 'N/A'\n\n                                                        const productLocation = product.location || 'N/A'\n                                                        const productStockLocation = product.stock_location || 'N/A'\n\n                                                        // Get current stock values\n                                                        const currentStockAvailable = product.current_stock_available || productData.stock_available || 0\n                                                        const currentStoreAvailable = product.current_store_available || productData.store_available || 0\n                                                        const totalCurrentStock = currentStockAvailable + currentStoreAvailable\n\n                                                        return (\n                                                            <tr key={index} className={hasStockError ? 'table-warning' : ''}>\n                                                                <td>\n                                                                    <div className=\"d-flex align-items-center\">\n                                                                        {productImage ? (\n                                                                            <img\n                                                                                src={productImage}\n                                                                                alt={productName}\n                                                                                className=\"rounded mr-2\"\n                                                                                style={{ width: 40, height: 40, objectFit: 'cover' }}\n\n                                                                            />\n                                                                        ) : (\n                                                                            <div className=\"mr-2\" style={{\n                                                                                width: 40,\n                                                                                height: 40,\n                                                                                backgroundColor: '#f8f9fa',\n                                                                                borderRadius: '4px'\n                                                                            }}></div>\n                                                                        )}\n                                                                        <div>\n                                                                            <a className=\"font-weight-bold\"\n                                                                               href={`${process.env.REACT_APP_WEBSITE}/product/${productName.replace(/\\s+/g, '-').toLowerCase()}`}\n                                                                               target='_blank'\n                                                                               rel=\"noopener noreferrer\">\n                                                                                {productName}\n                                                                            </a>\n                                                                            <small className=\"text-muted\">\n                                                                                SKU: {productSku}\n                                                                            </small>\n                                                                        </div>\n                                                                    </div>\n                                                                </td>\n                                                                <td>\n                                                                    <select\n                                                                        className={`form-control width-100 form-control-sm ${hasStockError ? 'border-danger' : ''}`}\n                                                                        value={product.from_location}\n                                                                        onChange={(e) => handleProductChange(index, 'from_location', e.target.value)}\n                                                                        disabled={!isEditable || isSubmitting}\n                                                                    >\n                                                                        <option value=\"stock_available\">Stock</option>\n                                                                        <option value=\"store_available\">Store</option>\n                                                                    </select>\n                                                                    {/* Display the actual location based on selection */}\n                                                                    <div className=\"mt-1 small\">\n                                                                        {product.from_location === 'stock_available' ? (\n                                                                            <div className=\"text-info d-flex align-items-center\">\n                                                                                <span className=\"mr-1\"></span>\n                                                                                <span className=\"text-truncate\" style={{ maxWidth: '120px' }} title={productStockLocation}>\n                                                                                        {productStockLocation}\n                                                                                    </span>\n                                                                            </div>\n                                                                        ) : (\n                                                                            <div className=\"text-warning d-flex align-items-center\">\n                                                                                <span className=\"mr-1\"></span>\n                                                                                <span className=\"text-truncate\" style={{ maxWidth: '120px' }} title={productLocation}>\n                                                                                        {productLocation}\n                                                                                    </span>\n                                                                            </div>\n                                                                        )}\n                                                                    </div>\n                                                                </td>\n                                                                <td>\n                                                                    <div className=\"d-flex align-items-center justify-content-center\">\n                                                                        <ArrowRight size={14} className=\"mr-1 text-muted\" />\n                                                                        <select\n                                                                            className=\"form-control form-control-sm width-100\"\n                                                                            value={product.to_location}\n                                                                            onChange={(e) => handleProductChange(index, 'to_location', e.target.value)}\n                                                                            disabled={!isEditable || isSubmitting}\n                                                                        >\n                                                                            <option value=\"stock_available\">Stock</option>\n                                                                            <option value=\"store_available\">Store</option>\n                                                                        </select>\n                                                                    </div>\n                                                                    {/* Display the actual location based on selection */}\n                                                                    <div className=\"mt-1 small text-center\">\n                                                                        {product.to_location === 'stock_available' ? (\n                                                                            <div className=\"text-info d-flex align-items-center justify-content-center\">\n                                                                                <span className=\"mr-1\"></span>\n                                                                                <span className=\"text-truncate\" style={{ maxWidth: '120px' }} title={productStockLocation}>\n                                                                                        {productStockLocation}\n                                                                                    </span>\n                                                                            </div>\n                                                                        ) : (\n                                                                            <div className=\"text-warning d-flex align-items-center justify-content-center\">\n                                                                                <span className=\"mr-1\"></span>\n                                                                                <span className=\"text-truncate\" style={{ maxWidth: '120px' }} title={productLocation}>\n                                                                                        {productLocation}\n                                                                                    </span>\n                                                                            </div>\n                                                                        )}\n\n                                                                    </div>\n                                                                </td>\n                                                                <td>\n                                                                    <Input\n                                                                        type=\"number\"\n                                                                        min=\"1\"\n                                                                        max={availableStock}\n                                                                        value={product.quantity}\n                                                                        onChange={(e) => handleProductChange(index, 'quantity', e.target.value)}\n                                                                        className={`form-control-sm ${hasStockError ? 'border-danger' : ''}`}\n                                                                        disabled={!isEditable || isSubmitting}\n                                                                    />\n                                                                    {hasStockError && (\n                                                                        <small className=\"text-danger d-block mt-1\">\n                                                                            {stockErrors[index]}\n                                                                        </small>\n                                                                    )}\n\n                                                                </td>\n                                                                <td className=\"text-center\">\n                                                                    <div className=\"d-flex flex-column align-items-center\">\n                                                                        <div className=\"d-flex align-items-center mb-1\">\n                                                                            <span className='text-muted'>Stock:</span>\n                                                                            <span className=\"font-weight-bold ml-1\">\n                                                                                    {currentStockAvailable}\n                                                                                </span>\n                                                                        </div>\n                                                                        <div className=\"d-flex align-items-center mb-1\">\n                                                                                <span className='text-muted'>\n                                                                                    Store:</span>\n                                                                            <span className=\"font-weight-bold ml-1\">\n                                                                                    {currentStoreAvailable}\n                                                                                </span>\n                                                                        </div>\n                                                                        <div className=\"d-flex align-items-center\">\n                                                                            <span className='text-muted'>:</span>\n                                                                            <span className=\"font-weight-bold ml-1\">\n                                                                                    {totalCurrentStock}\n                                                                                </span>\n                                                                        </div>\n                                                                    </div>\n\n                                                                </td>\n                                                                <td>\n                                                                    <StockImpact\n                                                                        product={product}\n                                                                        compact={true}\n                                                                        showLabels={false}\n                                                                    />\n                                                                </td>\n                                                                <td className=\"text-center\">\n                                                                    {isEditable && (\n                                                                        <Button\n                                                                            color=\"danger\"\n                                                                            size=\"sm\"\n                                                                            onClick={() => handleRemoveProduct(index)}\n                                                                            disabled={isSubmitting}\n                                                                        >\n                                                                            <Trash2 size={14} />\n                                                                        </Button>\n                                                                    )}\n                                                                </td>\n                                                            </tr>\n                                                        )\n                                                    })}\n                                                    </tbody>\n                                                </Table>\n                                            </div>\n                                        ) : (\n                                            <div className=\"text-center p-5 border rounded bg-light\">\n                                                <Package size={48} className=\"text-muted mb-3\" />\n                                                <p className=\"text-muted\">No products added to this transfer</p>\n                                                {!cannotEdit && (\n                                                    <p className=\"text-muted small\">\n                                                        Use the search above to add products\n                                                    </p>\n                                                )}\n                                            </div>\n                                        )}\n                                    </div>\n\n                                    <FormGroup>\n                                        <Label for=\"notes\">Notes (Optional)</Label>\n                                        <Input\n                                            type=\"textarea\"\n                                            id=\"notes\"\n                                            rows=\"3\"\n                                            value={notes}\n                                            onChange={(e) => setNotes(e.target.value)}\n                                            placeholder=\"Add any notes about this transfer...\"\n                                            disabled={isSubmitting || cannotEdit}\n                                        />\n                                    </FormGroup>\n\n                                    {/* Action Buttons */}\n                                    {!cannotEdit && canEdit && (\n                                        <div className=\"mt-4 d-flex justify-content-between\">\n                                            <Button\n                                                color=\"secondary\"\n                                                onClick={handleBack}\n                                                disabled={isSubmitting}\n                                            >\n                                                Cancel\n                                            </Button>\n\n                                            <div>\n                                                {transferOrder.can_edit && (\n                                                    <Button\n                                                        color=\"danger\"\n                                                        onClick={handleDelete}\n                                                        className=\"mr-2\"\n                                                        disabled={isSubmitting}\n                                                    >\n                                                        <X size={14} className=\"mr-1\" />\n                                                        Delete Transfer\n                                                    </Button>\n                                                )}\n\n                                                <Button\n                                                    color=\"primary\"\n                                                    onClick={onSubmit}\n                                                    disabled={isSubmitting || products.length === 0 || hasInsufficientStock()}\n                                                >\n                                                    {isSubmitting ? (\n                                                        <>\n                                                            <Spinner size=\"sm\" className=\"mr-1\" />\n                                                            Saving...\n                                                        </>\n                                                    ) : (\n                                                        <>\n                                                            <Save size={14} className=\"mr-1\" />\n                                                            Save Changes\n                                                        </>\n                                                    )}\n                                                </Button>\n                                            </div>\n                                        </div>\n                                    )}\n                                </CardBody>\n                            </Card>\n                        </Col>\n\n                        <Col md={4} sm={12}>\n                            {/* Status Card */}\n                            <TransferOrderStatus\n                                transferOrder={transferOrder}\n                                isEditMode={true}\n                                onToggleStatus={handleToggleStatus}\n                                onUpdateStatus={refetch}\n                            />\n\n                            {/* Transfer Summary */}\n                            <Card className=\"mt-4\">\n                                <CardBody>\n                                    <h6 className=\"mb-3 d-flex align-items-center\">\n                                        <BarChart2 size={16} className=\"mr-2\" />\n                                        Transfer Summary\n                                    </h6>\n\n                                    <div className=\"mb-3\">\n                                        <div className=\"d-flex justify-content-between mb-2\">\n                                            <span className=\"text-muted\">Total Products:</span>\n                                            <strong>{products.length}</strong>\n                                        </div>\n\n                                        <div className=\"d-flex justify-content-between mb-2\">\n                                            <span className=\"text-muted\">Total Quantity:</span>\n                                            <strong>{getTotalQuantity()}</strong>\n                                        </div>\n\n                                        {stockSummary.stock_to_store.count > 0 && (\n                                            <div className=\"mb-2 p-2 bg-info-light rounded\">\n                                                <div className=\"d-flex justify-content-between mb-1\">\n                                                    <span className=\"small\">Stock  Store</span>\n                                                    <Badge color=\"info\">\n                                                        {stockSummary.stock_to_store.count}\n                                                    </Badge>\n                                                </div>\n                                                <div className=\"d-flex justify-content-between\">\n                                                    <span className=\"small\">Quantity:</span>\n                                                    <strong>{stockSummary.stock_to_store.quantity}</strong>\n                                                </div>\n                                            </div>\n                                        )}\n\n                                        {stockSummary.store_to_stock.count > 0 && (\n                                            <div className=\"mb-2 p-2 bg-warning-light rounded\">\n                                                <div className=\"d-flex justify-content-between mb-1\">\n                                                    <span className=\"small\">Store  Stock</span>\n                                                    <Badge color=\"warning\">\n                                                        {stockSummary.store_to_stock.count}\n                                                    </Badge>\n                                                </div>\n                                                <div className=\"d-flex justify-content-between\">\n                                                    <span className=\"small\">Quantity:</span>\n                                                    <strong>{stockSummary.store_to_stock.quantity}</strong>\n                                                </div>\n                                            </div>\n                                        )}\n                                    </div>\n\n                                    {/* Stock Validation */}\n                                    <div className=\"mt-3 pt-3 border-top\">\n                                        <h6>Stock Validation</h6>\n                                        {hasInsufficientStock() ? (\n                                            <Alert color=\"danger\" className=\"mt-2\">\n                                                <AlertTriangle size={14} className=\"mr-2\" />\n                                                <small>Some products exceed available stock</small>\n                                            </Alert>\n                                        ) : products.length > 0 ? (\n                                            <Alert color=\"success\" className=\"mt-2\">\n                                                <CheckCircle size={14} className=\"mr-2\" />\n                                                <small>All products have sufficient stock</small>\n                                            </Alert>\n                                        ) : (\n                                            <Alert color=\"secondary\" className=\"mt-2\">\n                                                <Package size={14} className=\"mr-2\" />\n                                                <small>Add products to begin validation</small>\n                                            </Alert>\n                                        )}\n                                    </div>\n                                </CardBody>\n                            </Card>\n                        </Col>\n                    </Row>\n                </CardBody>\n            </Card>\n        </Fragment>\n    )\n}"],"sourceRoot":""}
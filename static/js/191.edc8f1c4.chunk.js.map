{"version":3,"sources":["data/use-order.js","@core/components/breadcrumbs/index.js","views/order/Details.js"],"names":["fetcher","url","axios","get","then","res","data","api","create","params","a","post","update","id","put","status","submitWithStatus","submitMigrate","submitMigrateAll","supplier","shippingStatus","shipping_status","autocomplete","q","useOrder","useSWR","revalidateOnFocus","revalidateOnReconnect","refreshWhenOffline","refreshWhenHidden","refreshInterval","error","loading","mutate","response","updateStatus","updateSupplier","updateShippingStatus","useDatatable","page","limit","search","order","conditions","JSON","stringify","items","total","mutates","BreadCrumbs","props","breadCrumbTitle","breadCrumbParent","breadCrumbParent2","breadCrumbParent3","breadCrumbActive","right","className","tag","to","active","OrderDetails","history","useHistory","useParams","isLoading","useState","orderInfo","setOrderInfo","products","editViews","expandedSections","setExpandedSections","historyFilter","setHistoryFilter","handleFilterChange","filter","filteredHistories","useMemo","histories","action","field","startsWith","oldVal","old_value","trim","parse","newVal","new_value","e","formatKeyName","key","keyMap","customer_identity_number","identity_number_type","shipping_provider_id","discount","discount_percentage","subtotal","profit","notes","invoice_notes","tax_number","coupon_id","_default","replace","l","toUpperCase","toggleSection","section","prev","formatValue","value","undefined","color","Array","isArray","length","includes","parseFloat","toFixed","PENDING","PROCESSING","COMPLETED","CANCELED","NIN","PN","TN","toString","formatDateTime","dateString","Date","toLocaleString","year","month","day","hour","minute","hour12","getActionIcon","size","getProductNameFromHistory","orderProducts","productNameMatch","match","productIdMatch","productId","product","find","p","name","endsWith","renderObjectChanges","oldValue","newValue","oldObj","newObj","allKeys","Set","Object","keys","changes","forEach","push","compareObjects","map","change","index","displayField","displayOldValue","displayNewValue","renderHistoryDetails","productName","quantity","user","created_at","oldQty","newQty","details","renderDetailedChanges","useEffect","role","number","onClick","isOpen","h","renderEditViews","goBack","updated_at","md","customer","phone","shipping","free","cost","options","dept","price_offer","tax_exempt","tax_zero","taxed","stopPropagation","sku","price","jsx"],"mappings":"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","file":"static/js/191.edc8f1c4.chunk.js","sourcesContent":["import useSWR, { mutate } from 'swr'\nimport axios from '../utility/axiosIsntance'\n\nconst fetcher = (url) => axios.get(url).then(res => res.data?.data)\n\nexport const api = {\n    create: async (params) => {\n        const { data } = await axios.post(`order`, params)\n        return data?.data\n    },\n    update: async (id, params) => {\n        const { data } = await axios.put(`order/${id}`, params)\n        return data?.data\n    },\n    status: async (id, params) => {\n        const { data } = await axios.post(`order/${id}/status`, params)\n        return data?.data\n    },\n    submitWithStatus: async (id, params) => {\n        const { data } = await axios.post(`order-with-status/${id}`, params)\n        return data?.data\n    },\n    submitMigrate: async (id, params) => {\n        // console.log('Sending migration request with:', params)\n        const { data } = await axios.post(`order-migrate/${id}`, params)\n        // console.log('Received migration response:', data)\n        return data\n    },\n    submitMigrateAll: async (id, params) => {\n        // console.log('Sending migration request with:', params)\n        const { data } = await axios.post(`orders-migrate`)\n        // console.log('Received migration response:', data)\n        return data\n    },\n    supplier: async (id, params) => {\n        const { data } = await axios.post(`order/${id}/supplier`, params)\n        return data?.data\n    },\n    shippingStatus: async (id, { status: shipping_status }) => {\n        const { data } = await axios.post(`order/${id}/shipping-status`, { shipping_status })\n        return data?.data\n    },\n    autocomplete: async (q) => {\n        const { data } = await axios.get(`orders/autocomplete?q=${q}`)\n        return data?.data\n    }\n}\n\nexport function useOrder(id) {\n\n    const url = `order/${id}`\n    const url2 = `order-migrate/${id}`\n\n    const { data, error } = useSWR(`order/${id}`, fetcher, {\n        revalidateOnFocus: false,\n        revalidateOnReconnect: false,\n        refreshWhenOffline: false,\n        refreshWhenHidden: false,\n        refreshInterval: 0\n    })\n\n    const loading = !data && !error\n\n\n    const update = async (params) => {\n        await api.update(id, params)\n        await mutate(url)\n    }\n\n    const submitWithStatus = async (params) => {\n        await api.submitWithStatus(id, params)\n        await mutate(url)\n    }\n\n    const submitMigrate = async (params) => {\n        const response = await api.submitMigrate(id, params)\n        // Don't mutate here - we don't want to refetch the order\n        return response\n    }\n\n    const submitMigrateAll = async (params) => {\n        const response = await api.submitMigrateAll()\n        return response\n    }\n\n    const updateStatus = async (params) => {\n        await api.status(id, params)\n        await mutate(url, { ...data, ...params}, false)\n    }\n\n    const updateSupplier = async (params) => {\n        await api.supplier(id, params)\n        await mutate(url, { ...data, status: params.status}, false)\n    }\n\n    return {\n        loading,\n        error,\n        data,\n        mutate,\n        update,\n        updateStatus,\n        updateSupplier,\n        submitWithStatus,\n        submitMigrate,\n        submitMigrateAll,\n        updateShippingStatus: (params) => api.shippingStatus(id, params)\n    }\n}\n\nexport function useDatatable({ page, limit, search, order = {}, conditions = {} }) {\n\n    const url = `order/datatable?page=${page}&limit=${limit}&search=${search}&order=${JSON.stringify(order)}&conditions=${JSON.stringify(conditions)}`\n\n    const { data, mutate, error } = useSWR(url, fetcher)\n\n    const loading = !data && !error\n\n    const mutates = {\n    }\n\n    return {\n        loading,\n        error,\n        data: data?.items || [],\n        total: data?.total || 0,\n        mutates\n    }\n\n}\n","// ** React Imports\nimport { Link } from 'react-router-dom'\n\n// ** Third Party Components\nimport Proptypes from 'prop-types'\nimport { Grid, CheckSquare, MessageSquare, Mail, Calendar } from 'react-feather'\nimport {\n  Breadcrumb,\n  BreadcrumbItem,\n  UncontrolledButtonDropdown,\n  DropdownMenu,\n  DropdownItem,\n  DropdownToggle\n} from 'reactstrap'\n\nconst BreadCrumbs = props => {\n  // ** Props\n  const { breadCrumbTitle, breadCrumbParent, breadCrumbParent2, breadCrumbParent3, breadCrumbActive, right } = props\n\n  return (\n    <div className='content-header row'>\n      <div className='content-header-left col-9 mb-2'>\n      {/*<div className='content-header-left col-md-9 col-12 mb-2'>*/}\n        <div className='row breadcrumbs-top'>\n          <div className='col-12'>\n            {breadCrumbTitle ? <h2 className='content-header-title float-left mb-0'>{breadCrumbTitle}</h2> : ''}\n            <div className='breadcrumb-wrapper vs-breadcrumbs d-sm-block d-none col-12'>\n              <Breadcrumb>\n                <BreadcrumbItem tag='li'>\n                  <Link to='/'>Home</Link>\n                </BreadcrumbItem>\n                {\n                  breadCrumbParent &&\n                  <BreadcrumbItem tag='li' className='text-primary'>\n                    {breadCrumbParent}\n                  </BreadcrumbItem>\n                }\n                {breadCrumbParent2 ? (\n                  <BreadcrumbItem tag='li' className='text-primary'>\n                    {breadCrumbParent2}\n                  </BreadcrumbItem>\n                ) : (\n                  ''\n                )}\n                {breadCrumbParent3 ? (\n                  <BreadcrumbItem tag='li' className='text-primary'>\n                    {breadCrumbParent3}\n                  </BreadcrumbItem>\n                ) : (\n                  ''\n                )}\n                <BreadcrumbItem tag='li' active>\n                  {breadCrumbActive}\n                </BreadcrumbItem>\n              </Breadcrumb>\n            </div>\n          </div>\n        </div>\n      </div>\n      {\n        right ? (\n          <div className='content-header-right text-md-right col-3'>\n            {/*<div className='content-header-right text-md-right col-md-3 col-12 d-md-block d-none'>*/}\n            <div className='form-group breadcrum-right dropdown'>\n              { right }\n              {/*<UncontrolledButtonDropdown>*/}\n              {/*  <DropdownToggle color='primary' size='sm' className='btn-icon btn-round dropdown-toggle'>*/}\n              {/*    <Grid size={14} />*/}\n              {/*  </DropdownToggle>*/}\n              {/*  <DropdownMenu tag='ul' right>*/}\n              {/*    <DropdownItem tag={Link} to='/apps/chat'>*/}\n              {/*      <CheckSquare className='mr-1' size={14} />*/}\n              {/*      <span className='align-middle'>Todo</span>*/}\n              {/*    </DropdownItem>*/}\n              {/*    <DropdownItem tag={Link} to='/apps/chat'>*/}\n              {/*      <MessageSquare className='mr-1' size={14} />*/}\n              {/*      <span className='align-middle'>Chat</span>*/}\n              {/*    </DropdownItem>*/}\n              {/*    <DropdownItem tag={Link} to='/apps/email'>*/}\n              {/*      <Mail className='mr-1' size={14} />*/}\n              {/*      <span className='align-middle'>Email</span>*/}\n              {/*    </DropdownItem>*/}\n              {/*    <DropdownItem tag={Link} to='/apps/calendar'>*/}\n              {/*      <Calendar className='mr-1' size={14} />*/}\n              {/*      <span className='align-middle'>Calendar</span>*/}\n              {/*    </DropdownItem>*/}\n              {/*  </DropdownMenu>*/}\n              {/*</UncontrolledButtonDropdown>*/}\n            </div>\n          </div>\n        ) : ''\n      }\n\n    </div>\n  )\n}\nexport default BreadCrumbs\n\n// ** PropTypes\nBreadCrumbs.propTypes = {\n  breadCrumbTitle: Proptypes.string.isRequired,\n  breadCrumbActive: Proptypes.string.isRequired\n}\n","import { Fragment, useState, useEffect, useMemo } from 'react'\nimport Breadcrumbs from '@components/breadcrumbs'\nimport { useHistory, useParams } from 'react-router-dom'\nimport { Card, CardBody, Row, Col, Badge, Button, Collapse, Alert } from 'reactstrap'\nimport {\n    ArrowLeft, RefreshCw, ChevronDown, ChevronUp, Clock, User,\n    FileText, DollarSign, Truck, Settings, Package, Edit, Info,\n    Printer, PlusCircle, MinusCircle, ShoppingCart, Eye, Download\n} from 'react-feather'\nimport { useOrder } from '@data/use-order'\n\nconst OrderDetails = () => {\n    const history = useHistory()\n    const { id } = useParams()\n    const { data: order, isLoading, mutate } = useOrder(id)\n    const [orderInfo, setOrderInfo] = useState(null)\n    const [expandedSections, setExpandedSections] = useState({\n        history: false,\n        orderInfo: false,\n        products: false,\n        editViews: false\n    })\n\n    const [historyFilter, setHistoryFilter] = useState('all')\n\n    // Add this function to handle filter changes\n    const handleFilterChange = (filter) => {\n        setHistoryFilter(filter)\n    }\n\n    // Filter out duplicate status entries AND exclude viewed_edit actions\n    const filteredHistories = useMemo(() => {\n        if (!orderInfo?.histories) return []\n\n        // First filter out viewed_edit actions\n        const historiesWithoutViews = orderInfo.histories.filter(history => history.action !== 'viewed_edit'\n        )\n\n        // Then filter based on the selected filter type\n        const filtered = historiesWithoutViews.filter(history => {\n            if (historyFilter === 'status') {\n                return history.field === 'status'\n            } else if (historyFilter === 'options') {\n                return history.field === 'options' ||\n                    (history.field && history.field.startsWith('options.'))\n            } else if (historyFilter === 'printed') {\n                return history.action === 'printed'\n            } else if (historyFilter === 'exported') {\n                return history.action === 'exported'\n            }\n            return true // 'all' filter\n        })\n\n        // For status changes, only show status_changed actions\n        return filtered.filter(history => {\n            // If it's a status field and it's an 'updated' action, hide it\n            if (history.field === 'status' && history.action === 'updated') {\n                return false\n            }\n\n            // For all updates, check if values actually changed\n            if (history.action === 'updated') {\n                try {\n                    // Parse JSON values if they appear to be JSON\n                    const oldVal = typeof history.old_value === 'string' &&\n                    history.old_value.trim().startsWith('{') ? JSON.parse(history.old_value) : history.old_value\n\n                    const newVal = typeof history.new_value === 'string' &&\n                    history.new_value.trim().startsWith('{') ? JSON.parse(history.new_value) : history.new_value\n\n                    // Compare values\n                    if (JSON.stringify(oldVal) === JSON.stringify(newVal)) {\n                        return false // Skip if values are the same\n                    }\n                } catch (e) {\n                    // If parsing fails, do simple string comparison\n                    if (history.old_value === history.new_value) {\n                        return false // Skip if values are the same\n                    }\n                }\n            }\n            // Show all other history items\n            return true\n        })\n    }, [orderInfo?.histories, historyFilter])\n\n    // Format key names to be more readable\n    const formatKeyName = (key) => {\n        const keyMap = {\n            // Customer fields\n            'customer.name': 'Customer Name',\n            'customer.phone': 'Customer Phone',\n            'customer.email': 'Customer Email',\n            customer_identity_number: 'Identity Number',\n            identity_number_type: 'ID Type',\n\n            // Shipping fields\n            'shipping.address': 'Shipping Address',\n            'shipping.cost': 'Shipping Cost',\n            'shipping.status': 'Shipping Status',\n            'shipping.free': 'Free Shipping',\n            'shipping.city': 'Shipping City',\n            shipping_provider_id: 'Shipping Provider',\n\n            // Options fields\n            'options.taxed': 'Taxed',\n            'options.tax_exempt': 'M3fe',\n            'options.dept': 'Zemam',\n            'options.price_offer': 'Price Offer',\n            'options.tax_zero': 'Tax Zero',\n            'options.pricing': 'Pricing Type',\n\n            // Order fields\n            status: 'Status',\n            discount: 'Discount Amount',\n            discount_percentage: 'Discount Percentage',\n            subtotal: 'Subtotal',\n            total: 'Total',\n            profit: 'Profit',\n            notes: 'Notes',\n            invoice_notes: 'Invoice Notes',\n            tax_number: 'Tax Number',\n            coupon_id: 'Coupon',\n\n            // Product fields\n            products: 'Products',\n\n            // Default formatting for unknown keys\n            _default: key.replace(/_/g, ' ').replace(/\\./g, ' > ').replace(/\\b\\w/g, l => l.toUpperCase())\n        }\n\n        return keyMap[key] || keyMap['_default']\n    }\n\n    // Toggle section expansion\n    const toggleSection = (section) => {\n        setExpandedSections(prev => ({\n            ...prev,\n            [section]: !prev[section]\n        }))\n    }\n\n    // Format values based on their type and key\n    const formatValue = (key, value) => {\n        if (value === null || value === undefined || value === 'null') {\n            return <span className=\"text-muted\">N/A</span>\n        }\n\n        if (typeof value === 'boolean') {\n            return value ? <Badge color=\"success\">Yes</Badge> : <Badge color=\"danger\">No</Badge>\n        }\n\n        if (typeof value === 'object') {\n            try {\n                if (Array.isArray(value)) {\n                    return `Array(${value.length})`\n                }\n                return JSON.stringify(value)\n            } catch (e) {\n                return 'Invalid data'\n            }\n        }\n\n        if (key.includes('cost') || key.includes('price') || key.includes('total') || key.includes('subtotal') || key.includes('discount') || key.includes('profit')) {\n            return <Badge color=\"light-success\">${parseFloat(value).toFixed(2)}</Badge>\n        }\n\n        if (key === 'status') {\n            const statusColors = {\n                PENDING: 'warning',\n                PROCESSING: 'info',\n                COMPLETED: 'success',\n                CANCELED: 'danger'\n            }\n            return <Badge color={`light-${statusColors[value] || 'secondary'}`}>{value}</Badge>\n        }\n\n        if (key === 'identity_number_type') {\n            const typeMap = {\n                NIN: 'National ID',\n                PN: 'Passport',\n                TN: 'Tax Number'\n            }\n            return typeMap[value] || value\n        }\n\n        return value.toString()\n    }\n\n    // Function to format date and time properly\n    const formatDateTime = (dateString) => {\n        if (!dateString) return 'N/A'\n\n        const date = new Date(dateString)\n        return date.toLocaleString('en-US', {\n            year: 'numeric',\n            month: 'short',\n            day: 'numeric',\n            hour: '2-digit',\n            minute: '2-digit',\n            hour12: true\n        })\n    }\n\n    // Get icon based on action type\n    const getActionIcon = (action) => {\n        switch (action) {\n            case 'updated': return <Edit size={16} />\n            case 'status_changed': return <Settings size={16} />\n            case 'created': return <FileText size={16} />\n            case 'printed': return <Printer size={16} />\n            case 'quantity_updated': return <Package size={16} />\n            case 'product_added': return <PlusCircle size={16} />\n            case 'product_removed': return <MinusCircle size={16} />\n            case 'shipping_updated': return <Truck size={16} />\n            case 'payment_updated': return <DollarSign size={16} />\n            case 'exported': return <Download size={16} />\n            default: return <Info size={16} />\n        }\n    }\n\n    // Parse JSON values safely\n    const safeJsonParse = (value) => {\n        if (typeof value === 'object') return value\n        if (value === null || value === undefined) return value\n\n        try {\n            return JSON.parse(value)\n        } catch (e) {\n            return value\n        }\n    }\n\n    // Get product name from history\n    const getProductNameFromHistory = (history, orderProducts) => {\n        // Try to extract product name from notes\n        if (history.notes) {\n            const productNameMatch = history.notes.match(/Product: ([^]+?)( was| quantity|$)/)\n            if (productNameMatch && productNameMatch[1]) {\n                return productNameMatch[1]\n            }\n\n            const productIdMatch = history.notes.match(/Product ID: (\\d+)/)\n            if (productIdMatch && productIdMatch[1]) {\n                const productId = productIdMatch[1]\n                const product = orderProducts.find(p => p.id === productId)\n                return product ? product.name : `Product ${productId}`\n            }\n        }\n\n        // Try to extract product ID from field\n        if (history.field && history.field.startsWith('products.') && history.field.endsWith('.quantity')) {\n            const productId = history.field.replace('products.', '').replace('.quantity', '')\n            const product = orderProducts.find(p => p.id === productId)\n            return product ? product.name : `Product ${productId}`\n        }\n\n        return 'Product'\n    }\n\n    // Compare two JSON objects and return only the changed fields\n    const compareObjects = (oldObj, newObj) => {\n        if (typeof oldObj !== 'object' || typeof newObj !== 'object') {\n            return []\n        }\n\n        const allKeys = [...new Set([...Object.keys(oldObj || {}), ...Object.keys(newObj || {})])]\n        const changes = []\n\n        allKeys.forEach(key => {\n            const oldVal = oldObj?.[key]\n            const newVal = newObj?.[key]\n\n            // Handle null/undefined comparisons\n            if (oldVal !== newVal && !(oldVal === null && newVal === null)) {\n                changes.push({\n                    field: key,\n                    oldValue: oldVal,\n                    newValue: newVal\n                })\n            }\n        })\n\n        return changes\n    }\n\n    // Format object changes for display\n    const renderObjectChanges = (field, oldValue, newValue) => {\n        try {\n            const oldObj = typeof oldValue === 'string' ? JSON.parse(oldValue) : oldValue\n            const newObj = typeof newValue === 'string' ? JSON.parse(newValue) : newValue\n\n            const changes = compareObjects(oldObj, newObj)\n\n            return changes.map((change, index) => {\n                const displayField = formatKeyName(`${field}.${change.field}`)\n                const displayOldValue = formatValue(change.field, change.oldValue)\n                const displayNewValue = formatValue(change.field, change.newValue)\n\n                return (\n                    <div key={index} className=\"change-item mb-2\">\n                        <Badge color=\"light-primary\" className=\"mr-1\">Changed:</Badge>\n                        <strong>{displayField}</strong>\n                        {change.oldValue === null || change.oldValue === undefined ? (\n                            <> set to {displayNewValue}</>\n                        ) : (\n                            <> changed from {displayOldValue} to {displayNewValue}</>\n                        )}\n                    </div>\n                )\n            })\n        } catch (e) {\n            // Fallback if JSON parsing fails\n            return (\n                <div className=\"change-item mb-2\">\n                    <Badge color=\"light-primary\" className=\"mr-1\">Changed:</Badge>\n                    <strong>{formatKeyName(field)}</strong> changed\n                </div>\n            )\n        }\n    }\n\n    // Render history details\n    const renderHistoryDetails = (history) => {\n        // Handle status changes\n        if (history.field === 'status') {\n            if (history.action === 'status_changed') {\n                return (\n                    <div className=\"change-item\">\n                        <Badge color=\"light-info\" className=\"mr-1\">Status:</Badge>\n                        Changed from {history.old_value} to {history.new_value}\n                    </div>\n                )\n            }\n            // Don't show updated status actions\n            return null\n        }\n\n        // Handle product additions and removals\n        if (history.action === 'product_added') {\n            const productName = getProductNameFromHistory(history, orderInfo.products)\n            const quantity = history.new_value || 1\n\n            return (\n                <div className=\"change-item\">\n                    <Badge color=\"light-success\" className=\"mr-1\">Added:</Badge>\n                    {productName} was added with quantity {quantity}\n                </div>\n            )\n        }\n\n        if (history.action === 'product_removed') {\n            const productName = getProductNameFromHistory(history, orderInfo.products)\n\n            return (\n                <div className=\"change-item\">\n                    <Badge color=\"light-danger\" className=\"mr-1\">Removed:</Badge>\n                    {productName} was removed\n                </div>\n            )\n        }\n\n        // Handle quantity updates\n        if (history.action === 'quantity_updated') {\n            const productName = getProductNameFromHistory(history, orderInfo.products)\n\n            return (\n                <div className=\"change-item\">\n                    <Badge color=\"light-info\" className=\"mr-1\">Quantity:</Badge>\n                    {productName} quantity changed from {history.old_value} to {history.new_value}\n                </div>\n            )\n        }\n\n        // Handle print actions\n        if (history.action === 'printed') {\n            return (\n                <div className=\"change-item\">\n                    <Badge color=\"light-secondary\" className=\"mr-1\">Printed:</Badge>\n                    Order was printed by {history.user ? history.user.name : 'System'}\n                    {history.created_at && ` at ${formatDateTime(history.created_at)}`}\n                </div>\n            )\n        }\n\n        if (history.action === 'exported') {\n            return (\n                <div className=\"change-item\">\n                    <Badge color=\"light-info\" className=\"mr-1\">Exported:</Badge>\n                    Order was exported to Excel by {history.user ? history.user.name : 'System'}\n                    {history.created_at && ` at ${formatDateTime(history.created_at)}`}\n                </div>\n            )\n        }\n\n        // Handle object changes (options, shipping, customer)\n        if (history.field && (history.field === 'options' || history.field === 'shipping' || history.field === 'customer')) {\n            return renderObjectChanges(history.field, history.old_value, history.new_value)\n        }\n\n        // Handle product quantity changes\n        if (history.field && history.field.startsWith('products.') && history.field.endsWith('.quantity')) {\n            const productName = history.notes?.replace('Product: ', '').replace(/ quantity changed from \\d+ to \\d+/, '') || 'Product'\n            const oldQty = history.old_value\n            const newQty = history.new_value\n\n            if (oldQty === 0) {\n                return (\n                    <div className=\"change-item\">\n                        <Badge color=\"light-success\" className=\"mr-1\">Added:</Badge>\n                        {productName} was added with quantity {newQty}\n                    </div>\n                )\n            } else if (newQty === 0) {\n                return (\n                    <div className=\"change-item\">\n                        <Badge color=\"light-danger\" className=\"mr-1\">Removed:</Badge>\n                        {productName} was removed\n                    </div>\n                )\n            } else {\n                return (\n                    <div className=\"change-item\">\n                        <Badge color=\"light-info\" className=\"mr-1\">Quantity:</Badge>\n                        {productName} quantity changed from {oldQty} to {newQty}\n                    </div>\n                )\n            }\n        }\n\n        // Handle simple field changes\n        if (history.field && history.old_value !== undefined && history.new_value !== undefined) {\n            const displayField = formatKeyName(history.field)\n            const displayOldValue = formatValue(history.field, history.old_value)\n            const displayNewValue = formatValue(history.field, history.new_value)\n\n            return (\n                <div className=\"change-item mb-2\">\n                    <Badge color=\"light-primary\" className=\"mr-1\">Changed:</Badge>\n                    <strong>{displayField}</strong>\n                    {history.old_value === null || history.old_value === undefined ? (\n                        <> set to {displayNewValue}</>\n                    ) : (\n                        <> changed from {displayOldValue} to {displayNewValue}</>\n                    )}\n                </div>\n            )\n        }\n\n        // Fallback for old history entries\n        if (history.details) {\n            try {\n                const details = typeof history.details === 'string' ? JSON.parse(history.details) : history.details\n                return renderDetailedChanges(details)\n            } catch (e) {\n                return <div className=\"text-muted\">Change details: {history.details}</div>\n            }\n        }\n\n        return <div className=\"text-muted\">No change details available</div>\n    }\n\n    // Render edit views section\n    const renderEditViews = (histories) => {\n        const editViews = histories.filter(h => h.action === 'viewed_edit')\n\n        if (editViews.length === 0) {\n            return (\n                <div className=\"text-center p-3\">\n                    <p className=\"text-muted\">No one has viewed the order edit page yet</p>\n                </div>\n            )\n        }\n\n        return (\n            <div className=\"timeline\">\n                {editViews.map((history, index) => (\n                    <div key={index} className=\"timeline-item mb-3\">\n                        <div className=\"timeline-point\"></div>\n                        <div className=\"timeline-content\">\n                            <div className=\"d-flex justify-content-between align-items-start mb-1\">\n                                <div className=\"d-flex align-items-center\">\n                                    <span className=\"timeline-icon mr-2\">\n                                        <Eye size={16} />\n                                    </span>\n                                    <h6 className=\"mb-0\">Viewed Edit Page</h6>\n                                </div>\n                                <small className=\"text-muted\">{formatDateTime(history.created_at)}</small>\n                            </div>\n                            <p className=\"mb-0 text-muted\">\n                                <User size={14} className=\"mr-1\" />\n                                Viewed by: {history.user ? history.user.name : 'Unknown User'}\n                            </p>\n                            {history.notes && (\n                                <div className=\"mt-1 p-2 bg-light rounded small\">\n                                    {history.notes}\n                                </div>\n                            )}\n                        </div>\n                    </div>\n                ))}\n            </div>\n        )\n    }\n\n    // Function to refresh order data\n    const refreshOrderData = async () => {\n        try {\n            await mutate()\n        } catch (error) {\n            console.error('Error refreshing order data:', error)\n        }\n    }\n\n    useEffect(() => {\n        if (order) {\n            setOrderInfo(order)\n        }\n    }, [order])\n\n    if (isLoading) return <div className=\"d-flex justify-content-center my-5\"><div className=\"spinner-border text-primary\" role=\"status\"></div></div>\n    if (!orderInfo) return <div className=\"alert alert-danger my-4\">Order not found</div>\n\n    return (\n        <Fragment>\n            <Breadcrumbs breadCrumbTitle='Order Details' breadCrumbActive={`Order #${orderInfo.number}`} />\n\n            {/* Edit Views Section */}\n            <Card className=\"mb-4 section-card\">\n                <CardBody className=\"p-0\">\n                    <div\n                        className=\"d-flex justify-content-between align-items-center p-3 section-header\"\n                        onClick={() => toggleSection('editViews')}\n                    >\n                        <h5 className=\"mb-0 d-flex align-items-center\">\n                            <Eye size={18} className=\"mr-2\" />Order Views\n                        </h5>\n                        {expandedSections.editViews ? <ChevronUp size={18} /> : <ChevronDown size={18} />}\n                    </div>\n                    <Collapse isOpen={expandedSections.editViews}>\n                        <div className=\"p-3\">\n                            {renderEditViews(orderInfo.histories || [])}\n                        </div>\n                    </Collapse>\n                </CardBody>\n            </Card>\n\n            <Card className=\"order-details-card\">\n                <CardBody className=\"p-4\">\n                    {/* Header with navigation and actions */}\n                    <div className=\"d-flex justify-content-between align-items-center mb-4\">\n                        <Button\n                            color='light'\n                            onClick={() => history.goBack()}\n                            className=\"d-flex align-items-center back-button\"\n                        >\n                            <ArrowLeft size={16} className=\"mr-1\" /> Back to Orders\n                        </Button>\n\n                        <div className=\"d-flex flex-column align-items-end\">\n                            <div className=\" small\">\n                                <strong>Created:</strong> {formatDateTime(orderInfo.created_at)}\n                            </div>\n                            <div className=\" small\">\n                                <strong>Updated:</strong> {formatDateTime(orderInfo.updated_at)}\n                            </div>\n                        </div>\n                    </div>\n                    {/* Order Info Section */}\n                    <Card className=\"mb-4 section-card\">\n                        <CardBody className=\"p-0\">\n                            <div\n                                className=\"d-flex justify-content-between align-items-center p-3 section-header\"\n                                onClick={() => toggleSection('orderInfo')}\n                            >\n                                <h5 className=\"mb-0 d-flex align-items-center\">\n                                    <Info size={18} className=\"mr-2\" /> Order Information\n                                </h5>\n                                {expandedSections.orderInfo ? <ChevronUp size={18} /> : <ChevronDown size={18} />}\n                            </div>\n                            <Collapse isOpen={expandedSections.orderInfo}>\n                                <div className=\"p-3\">\n                                    <Row>\n                                        <Col md=\"6\">\n                                            <div className=\"info-item mb-2\">\n                                                <strong>Order Number:</strong> {orderInfo.number}\n                                            </div>\n                                            <div className=\"info-item mb-2\">\n                                                <strong>Status:</strong> {formatValue('status', orderInfo.status)}\n                                            </div>\n                                            <div className=\"info-item mb-2\">\n                                                <strong>Customer Name:</strong> {orderInfo.customer?.name || 'N/A'}\n                                            </div>\n                                            <div className=\"info-item mb-2\">\n                                                <strong>Customer Phone:</strong> {orderInfo.customer?.phone || 'N/A'}\n                                            </div>\n                                        </Col>\n                                        <Col md=\"6\">\n                                            <div className=\"info-item mb-2\">\n                                                <strong>Shipping Cost:</strong>\n                                                {orderInfo.shipping?.free ? <Badge color=\"success\" className=\"ml-1\">Free</Badge> : formatValue('cost', orderInfo.shipping?.cost)\n                                                }\n                                            </div>\n                                            <div className=\"info-item mb-2\">\n                                                <strong>Total Amount:</strong> {formatValue('total', orderInfo.total)}\n                                            </div>\n                                            <div className=\"info-item mb-2\">\n                                                <strong>Tax Number:</strong> {orderInfo.tax_number || 'N/A'}\n                                            </div>\n                                            {/* Add this below the Tax Number info item */}\n                                            <div className=\"info-item mb-2\">\n                                                <strong>Options:</strong>\n                                                <div className=\"d-flex flex-wrap mt-1\">\n                                                    {orderInfo.options?.dept && (\n                                                        <Badge color=\"warning\" className=\"mr-1 mb-1\">Zemam</Badge>\n                                                    )}\n                                                    {orderInfo.options?.price_offer && (\n                                                        <Badge color=\"info\" className=\"mr-1 mb-1\">Price Offer</Badge>\n                                                    )}\n                                                    {orderInfo.options?.tax_exempt && (\n                                                        <Badge color=\"success\" className=\"mr-1 mb-1\">M3fe</Badge>\n                                                    )}\n                                                    {orderInfo.options?.tax_zero && (\n                                                        <Badge color=\"primary\" className=\"mr-1 mb-1\">Tax Zero</Badge>\n                                                    )}\n                                                    {orderInfo.options?.taxed && (\n                                                        <Badge color=\"danger\" className=\"mr-1 mb-1\">Taxed</Badge>\n                                                    )}\n                                                    {!orderInfo.options?.dept &&\n                                                    !orderInfo.options?.price_offer &&\n                                                    !orderInfo.options?.tax_exempt &&\n                                                    !orderInfo.options?.tax_zero &&\n                                                    !orderInfo.options?.taxed && (\n                                                        <span className=\"text-muted\">No options enabled</span>\n                                                    )}\n                                                </div>\n                                            </div>\n                                        </Col>\n                                    </Row>\n                                </div>\n                            </Collapse>\n                        </CardBody>\n                    </Card>\n\n                    {/* Order History Section */}\n                    <Card className=\"mb-4 section-card\">\n                        <CardBody className=\"p-0\">\n                            <div\n                                className=\"d-flex justify-content-between align-items-center p-3 section-header\"\n                                onClick={() => toggleSection('history')}\n                            >\n\n                                <h5 className=\"mb-0 d-flex align-items-center\">\n                                    <Clock size={18} className=\"mr-2\" /> Order History\n                                </h5>\n\n                                {expandedSections.history ? <ChevronUp size={18} /> : <ChevronDown size={18} />}\n\n                            </div>\n\n\n                            <Collapse isOpen={expandedSections.history}>\n                                <div className=\"pb-3 px-3 pt-1 \">\n                                    <div className=\"d-flex align-items-center justify-content-center pb-2 \">\n                                        <div className=\"btn-group btn-group-sm filter-buttons \" onClick={(e) => e.stopPropagation()}></div>\n                                        <Button\n                                            color={historyFilter === 'all' ? 'primary' : 'light'}\n                                            size=\"sm\"\n                                            onClick={() => handleFilterChange('all')}\n                                            className=\"mx-1\"\n                                        >\n                                            All Changes\n                                        </Button>\n                                        <Button\n                                            color={historyFilter === 'status' ? 'primary' : 'light'}\n                                            size=\"sm\"\n                                            onClick={() => handleFilterChange('status')}\n                                            className=\"mx-1\"\n                                        >\n                                            Status\n                                        </Button>\n                                        <Button\n                                            color={historyFilter === 'options' ? 'primary' : 'light'}\n                                            size=\"sm\"\n                                            onClick={() => handleFilterChange('options')}\n                                            className=\"mx-1\"\n                                        >\n                                            Options\n                                        </Button>\n                                        <Button\n                                            color={historyFilter === 'printed' ? 'primary' : 'light'}\n                                            size=\"sm\"\n                                            onClick={() => handleFilterChange('printed')}\n                                            className=\"mx-1\"\n                                        >\n                                            Printed\n                                        </Button>\n                                        <Button\n                                            color={historyFilter === 'exported' ? 'primary' : 'light'}\n                                            size=\"sm\"\n                                            onClick={() => handleFilterChange('exported')}\n                                            className=\"mx-1\"\n                                        >\n                                            Exported\n                                        </Button>\n\n                                    </div>\n                                    {filteredHistories && filteredHistories.length > 0 ? (\n                                        <div className=\"timeline\">\n                                            {filteredHistories.map((history, index) => (\n                                                <div key={index} className=\"timeline-item mb-4\">\n                                                    <div className=\"timeline-point\"></div>\n                                                    <div className=\"timeline-content\">\n                                                        <div className=\"d-flex justify-content-between align-items-start mb-1\">\n                                                            <div className=\"d-flex align-items-center\">\n                                                                <span className=\"timeline-icon mr-2\">\n                                                                    {getActionIcon(history.action)}\n                                                                </span>\n                                                                <h6 className=\"mb-0 text-capitalize\">{history.action.replace(/_/g, ' ')}</h6>\n                                                            </div>\n                                                            <small className=\"text-muted\">{formatDateTime(history.created_at)}</small>\n                                                        </div>\n                                                        <p className=\"mb-1 text-muted\">\n                                                            <User size={14} className=\"mr-1\" />\n                                                            {history.user ? `By: ${history.user.name}` : 'System Action'}\n                                                        </p>\n                                                        {history.notes && (\n                                                            <div className=\"mb-2 p-2 bg-light rounded\">\n                                                                <strong>Note:</strong> {history.notes}\n                                                            </div>\n                                                        )}\n                                                        <div className=\"changes-container mt-2 p-2 bg-light rounded\">\n                                                            {renderHistoryDetails(history)}\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            ))}\n                                        </div>\n                                    ) : (\n                                        <div className=\"text-center p-3\">\n                                            <p className=\"text-muted\">No order history available</p>\n                                        </div>\n                                    )}\n                                </div>\n                            </Collapse>\n                        </CardBody>\n                    </Card>\n\n                    {/* Products Section */}\n                    <Card className=\"mb-4 section-card\">\n                        <CardBody className=\"p-0\">\n                            <div\n                                className=\"d-flex justify-content-between align-items-center p-3 section-header\"\n                                onClick={() => toggleSection('products')}\n                            >\n                                <h5 className=\"mb-0 d-flex align-items-center\">\n                                    <ShoppingCart size={18} className=\"mr-2\" /> Products\n                                </h5>\n                                {expandedSections.products ? <ChevronUp size={18} /> : <ChevronDown size={18} />}\n                            </div>\n                            <Collapse isOpen={expandedSections.products}>\n                                <div className=\"p-3\">\n                                    {orderInfo.products && orderInfo.products.length > 0 ? (\n                                        <div className=\"table-responsive\">\n                                            <table className=\"table table-striped\">\n                                                <thead>\n                                                <tr>\n                                                    <th>Product</th>\n                                                    <th>SKU</th>\n                                                    <th>Quantity</th>\n                                                    <th>Price</th>\n                                                    <th>Total</th>\n                                                </tr>\n                                                </thead>\n                                                <tbody>\n                                                {orderInfo.products.map((product, index) => (\n                                                    <tr key={index}>\n                                                        <td>{product.name}</td>\n                                                        <td>{product.sku}</td>\n                                                        <td>{product.quantity}</td>\n                                                        <td>{formatValue('price', product.price)}</td>\n                                                        <td>{formatValue('total', product.price * product.quantity)}</td>\n                                                    </tr>\n                                                ))}\n                                                </tbody>\n                                            </table>\n                                        </div>\n                                    ) : (\n                                        <div className=\"text-center p-3\">\n                                            <p className=\"text-muted\">No products in this order</p>\n                                        </div>\n                                    )}\n                                </div>\n                            </Collapse>\n                        </CardBody>\n                    </Card>\n                </CardBody>\n            </Card>\n\n            <style jsx>{`\n                .order-details-card {\n                    border: none;\n                    border-radius: 12px;\n                    box-shadow: 0 4px 20px rgba(0,0,0,0.08);\n                }\n                \n                .back-button {\n                    border-radius: 8px;\n                    padding: 8px 16px;\n                    font-weight: 500;\n                }\n                \n                .action-buttons .btn {\n                    border-radius: 8px;\n                    padding: 8px 16px;\n                    font-weight: 500;\n                }\n                \n                .section-card {\n                    border: none;\n                    border-radius: 10px;\n                    box-shadow: 0 2px 10px rgba(0,0,0,0.05);\n                }\n                \n                .section-header {\n                    cursor: pointer;\n                    background-color: #f8f9fa;\n                    border-radius: 10px 10px 0 0;\n                    transition: background-color 0.2s ease;\n                }\n                \n                .section-header:hover {\n                    background-color: #e9ecef;\n                }\n                \n                .info-item {\n                    padding: 8px 0;\n                    border-bottom: 1px solid #f1f1f1;\n                }\n                \n                .timeline {\n                    position: relative;\n                    padding-left: 30px;\n                }\n\n                .timeline-item {\n                    position: relative;\n                    margin-bottom: 20px;\n                }\n\n                .timeline-point {\n                    position: absolute;\n                    left: -30px;\n                    top: 5px;\n                    width: 12px;\n                    height: 12px;\n                    border-radius: 50%;\n                    background-color: #133695;\n                }\n\n                .timeline-content {\n                    padding: 10px;\n                    border-left: 2px solid #133695;\n                    margin-left: 10px;\n                }\n                \n                .timeline-icon {\n                    color: #133695;\n                }\n                \n                .change-item {\n                    font-size: 0.9rem;\n                }\n                \n                .changes-container {\n                    border-left: 3px solid #133695;\n                }\n                \n                @media (max-width: 768px) {\n                    .timeline {\n                        padding-left: 20px;\n                    }\n                    \n                    .timeline-point {\n                        left: -20px;\n                        width: 10px;\n                        height: 10px;\n                    }\n                }\n            `}</style>\n        </Fragment>\n    )\n}\n\nexport default OrderDetails\n"],"sourceRoot":""}
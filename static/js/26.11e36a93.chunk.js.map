{"version":3,"sources":["@core/components/datatable/DatatableTitle.js","@core/components/datatable/index.js","@core/components/datatable/DatatableSearch.js","data/use-user.js","data/use-stock-adjustment.js","data/use-data.js","data/use-stock-adjustment-datatable.js"],"names":["DatatableTitle","title","className","Datatable","useDatatable","columns","isSticky","add","actions","conditions","dateRange","filterBar","hasSearch","header","footer","initialOrder","props","useState","currentPage","setCurrentPage","rowsPerPage","setRowsPerPage","order","setOrder","searchValue","setSearchValue","pageInputValue","setPageInputValue","pageInputRef","useRef","isInputFocused","setIsInputFocused","page","limit","search","data","total","mutates","loading","useEffect","current","focus","push","name","allowOverflow","width","cell","row","handleFilter","q","handlePageInput","e","value","target","replace","goToPage","pageNumber","parseInt","totalPages","Math","ceil","handleKeyPress","key","preventDefault","Header","sm","initialSearchValue","Ripple","tag","Link","to","color","style","overflowY","maxHeight","noHeader","sortIcon","size","onSort","column","dir","sortField","selector","pagination","paginationServer","paginationComponent","count","for","type","id","onChange","handlePerPage","innerRef","onKeyPress","onFocus","onBlur","marginRight","placeholder","onClick","disabled","previousLabel","nextLabel","breakLabel","pageCount","marginPagesDisplayed","pageRangeDisplayed","activeClassName","forcePage","onPageChange","selected","handlePagination","pageClassName","nextLinkClassName","nextClassName","previousClassName","previousLinkClassName","pageLinkClassName","breakClassName","breakLinkClassName","containerClassName","Array","isArray","progressPending","progressComponent","persistTableHead","DatatableSearch","url","api","create","params","apiCalls","update","delete","autocomplete","a","axios","get","autocompleteUserForTaxExempt","autocompleteCashier","autocompleteTaxExempt","changePassword","post","verificationEmail","useModel","model","result","datatable","useEmployeeDatatable","fetcher","then","res","approve","notes","reject","reason","getPending","getMyRequests","getAllRequests","isAdmin","isCurrentUserAdmin","endpoint","cleanedParams","status","getHistory","getStatistics","bulkApprove","ids","bulkReject","productHistory","productId","useStockAdjustmentHistory","filters","URLSearchParams","append","user_id","start_date","end_date","toString","useSWR","revalidateOnFocus","dedupingInterval","mutate","error","items","put","models","revalidateOnReconnect","refreshWhenOffline","refreshWhenHidden","refreshInterval","base","JSON","stringify","datatableWithData","from","table","useStockAdjustmentDatatable","filterByCurrentUser","currentUserId","setData","setTotal","setLoading","mutateTrigger","setMutateTrigger","fetchData","startDate","endDate","Object","keys","forEach","undefined","stockAdjustmentApi","console","showError","response","message","refetch","prev"],"mappings":"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","file":"static/js/26.11e36a93.chunk.js","sourcesContent":["import { CardHeader, CardTitle } from 'reactstrap'\n\nexport default function DatatableTitle({ title = '' }) {\n    return (\n        <>\n            {\n                title &&\n                <CardHeader className='py-1'>\n                    <CardTitle>{ title }</CardTitle>\n                </CardHeader>\n            }\n        </>\n    )\n}\n","// ** States\nimport { Fragment, useState, useRef, useEffect } from 'react'\nimport ReactPaginate from 'react-paginate'\nimport { Button, Card, CardHeader, CardTitle, Col, Input, Label, Row, Spinner } from 'reactstrap'\nimport { Link } from 'react-router-dom'\nimport DataTable from 'react-data-table-component'\nimport { ChevronDown } from 'react-feather'\n// ** Styles\nimport DatatableSearch from './DatatableSearch'\n// ** Styles\nimport '@styles/react/libs/tables/react-dataTable-component.scss'\nimport DatatableTitle from './DatatableTitle'\n\nexport default function Datatable({\n                                      useDatatable,\n                                      columns,\n                                      isSticky = false,\n                                      add,\n                                      actions,\n                                      conditions,\n                                      dateRange,\n                                      filterBar,\n                                      hasSearch = true,\n                                      title = '',\n                                      header,\n                                      footer = true,\n                                      initialOrder = {},\n                                      ...props\n                                  }) {\n\n    const [currentPage, setCurrentPage] = useState(0)\n    const [rowsPerPage, setRowsPerPage] = useState(10)\n    const [order, setOrder] = useState(initialOrder)\n    const [searchValue, setSearchValue] = useState('')\n    const [pageInputValue, setPageInputValue] = useState('')\n    const pageInputRef = useRef(null)\n    const [isInputFocused, setIsInputFocused] = useState(false)\n\n    const { data, total, mutates, loading } = useDatatable({\n        page: currentPage,\n        limit: rowsPerPage,\n        search: searchValue,\n        order,\n        conditions,\n        dateRange\n    })\n\n    // Keep input focused after re-renders\n    useEffect(() => {\n        if (isInputFocused && pageInputRef.current) {\n            pageInputRef.current.focus()\n        }\n    })\n\n    // Update input value when currentPage changes\n    useEffect(() => {\n        setPageInputValue('')\n    }, [currentPage])\n\n    if (actions) {\n        columns.push({\n            name: 'Actions',\n            allowOverflow: true,\n            width: '200px',\n            cell: (row) => actions(row, mutates)\n        })\n    }\n\n    // ** Function to handle filter\n    const handleFilter = q => {\n        setCurrentPage(0)\n        setSearchValue(q)\n    }\n\n    // ** Function to handle Pagination and get data\n    const handlePagination = page => setCurrentPage(page.selected)\n\n    // ** Function to handle per page\n    const handlePerPage = e => {\n        setCurrentPage(0)\n        setRowsPerPage(parseInt(e.target.value))\n    }\n\n    // ** Function to handle per page\n    const handleSort = (column, dir) => {\n        setOrder({ column: column?.sortField || column.selector, dir })\n    }\n\n    // ** Function to handle direct page navigation\n    const handlePageInput = (e) => {\n        // Only allow numbers\n        const value = e.target.value.replace(/[^0-9]/g, '')\n        setPageInputValue(value)\n    }\n\n    // ** Function to navigate to the specified page\n    const goToPage = () => {\n        if (!pageInputValue) return\n\n        const pageNumber = parseInt(pageInputValue, 10)\n        const totalPages = Math.ceil(total / rowsPerPage)\n\n        if (pageNumber < 1 || pageNumber > totalPages) {\n            // Invalid page number, reset input\n            setPageInputValue('')\n            return\n        }\n\n        // Convert to zero-based index for ReactPaginate\n        setCurrentPage(pageNumber - 1)\n    }\n\n    // ** Function to handle Enter key press\n    const handleKeyPress = (e) => {\n        if (e.key === 'Enter') {\n            e.preventDefault()\n            goToPage()\n        }\n    }\n\n    // ** Custom Pagination\n    const Footer = () => {\n        const count = Math.ceil((total / rowsPerPage))\n\n        if (!footer) return <></>\n\n        return (\n            <>\n                <hr className='my-0' />\n                <div className=\"d-flex justify-content-between align-items-center flex-wrap p-1\">\n                    <div className=\"d-flex align-items-center\">\n                        <div className=\"d-flex align-items-center\">\n                            <Label for='sort-select' className='mb-0 mr-1'>Show</Label>\n                            <Input\n                                className='dataTable-select'\n                                type='select'\n                                id='sort-select'\n                                value={rowsPerPage}\n                                onChange={e => handlePerPage(e)}\n                                style={{ width: '80px' }}\n                            >\n                                <option value={10}>10</option>\n                                <option value={25}>25</option>\n                                <option value={50}>50</option>\n                                <option value={100}>100</option>\n                            </Input>\n                            <Label for='sort-select' className='mb-0 ml-1'>entries</Label>\n                        </div>\n\n                        {/* Page input field */}\n                        <div className=\"d-flex align-items-center ml-2\">\n                            <Label for='page-input' className='mb-0 mr-1'>Go to page:</Label>\n                            <Input\n                                innerRef={pageInputRef}\n                                type='text'\n                                id='page-input'\n                                value={pageInputValue}\n                                onChange={handlePageInput}\n                                onKeyPress={handleKeyPress}\n                                onFocus={() => setIsInputFocused(true)}\n                                onBlur={() => setIsInputFocused(false)}\n                                style={{ width: '60px', marginRight: '8px' }}\n                                placeholder='Page #'\n                            />\n                            <Button\n                                color='primary'\n                                size='sm'\n                                onClick={goToPage}\n                                disabled={!pageInputValue}\n                            >\n                                Go\n                            </Button>\n                        </div>\n                    </div>\n\n                    <div className=\"d-flex align-items-center mt-1 mt-sm-0\">\n                        <div className=\"d-flex align-items-center mr-2\">\n              <span className=\"text-muted\">\n                {total > 0 ? `Page ${currentPage + 1} of ${count}` : 'No pages'}\n              </span>\n                        </div>\n                        <ReactPaginate\n                            previousLabel={''}\n                            nextLabel={''}\n                            breakLabel='...'\n                            pageCount={count || 1}\n                            marginPagesDisplayed={2}\n                            pageRangeDisplayed={2}\n                            activeClassName='active'\n                            forcePage={currentPage}\n                            onPageChange={page => handlePagination(page)}\n                            pageClassName={'page-item'}\n                            nextLinkClassName={'page-link'}\n                            nextClassName={'page-item next'}\n                            previousClassName={'page-item prev'}\n                            previousLinkClassName={'page-link'}\n                            pageLinkClassName={'page-link'}\n                            breakClassName='page-item'\n                            breakLinkClassName='page-link'\n                            containerClassName={\n                                'pagination react-paginate separated-pagination pagination-sm justify-content-end'\n                            }\n                        />\n                    </div>\n                </div>\n            </>\n        )\n    }\n\n    // ** Table data to render\n    const dataToRender = () => {\n        if (!data || !Array.isArray(data)) return []\n        return data\n    }\n\n    const Header = () => (\n        <Row className='mx-0 mt-1 mb-50'>\n            {\n                hasSearch &&\n                <Col className='d-flex align-items-center' sm='4'>\n                    <DatatableSearch\n                        handleFilter={handleFilter}\n                        initialSearchValue={searchValue}\n                    />\n                </Col>\n            }\n            <Col className='d-flex align-items-center justify-content-sm-end justify-content-start mt-1 mt-sm-0' sm='8'>\n                {\n                    filterBar\n                }\n                {\n                    add &&\n                    <Button.Ripple tag={Link} to={add} color='primary ml-1'>\n                        Add Record\n                    </Button.Ripple>\n                }\n            </Col>\n        </Row>\n    )\n\n    return (\n        <Fragment>\n            <Card>\n                <DatatableTitle title={title} />\n                {header ? header : <Header />}\n                <DataTable\n                    style={isSticky ? { overflowY: 'scroll', maxHeight: '700px' } : {}}\n                    noHeader\n                    className='react-dataTable'\n                    columns={columns}\n                    sortIcon={<ChevronDown size={10} />}\n                    onSort={handleSort}\n                    pagination\n                    paginationServer\n                    paginationComponent={Footer}\n                    data={dataToRender()}\n                    progressPending={loading}\n                    progressComponent={\n                        <Spinner color='primary' className=\"my-3\" />\n                    }\n                    persistTableHead={true}\n                    {...props}\n                />\n            </Card>\n        </Fragment>\n    )\n}\n","// ** States\nimport { useState } from 'react'\nimport { Input, Label } from 'reactstrap'\n// ** Styles\nimport '@styles/react/libs/tables/react-dataTable-component.scss'\n\nconst DatatableSearch = ({ handleFilter, initialSearchValue }) => {\n\n    const [searchValue, setSearchValue] = useState(initialSearchValue || '')\n    const [timer, setTimer] = useState()\n\n    const onChange = (e) => {\n        // if (timer) clearTimeout(timer)\n        setSearchValue(e.target.value)\n        // setTimer(\n        //     setTimeout(() => {\n        //         handleFilter(e.target.value)\n        //     }, 1000)\n        // )\n    }\n\n    const onBlur = (e) => {\n        handleFilter(e.target.value)\n    }\n    \n    const onKeyPress = (e) => {\n        if (e.key === 'Enter') {\n            handleFilter(e.target.value)\n        }\n    }\n\n    return (\n        <>\n            <Label className='mr-1' for='search-input'>\n                Search\n            </Label>\n            <Input\n                className='dataTable-filter mr-50'\n                type='text'\n                id='search-input'\n                value={searchValue}\n                onChange={onChange}\n                onBlur={onBlur}\n                onKeyPress={onKeyPress}\n            />\n        </>\n    )\n}\n\nexport default DatatableSearch","import useSWR from 'swr'\nimport axios from '../utility/axiosIsntance'\nimport { datatable, model, api as apiCalls } from \"./use-data\"\n\nconst fetcher = (url) => axios.get(url).then(res => res.data?.data)\n\nconst url = 'user'\n\nexport const api = {\n    create: params => apiCalls.create(url, params),\n    update: (id, params) => apiCalls.update(url, id, params),\n    delete: id => apiCalls.delete(url, id),\n    autocomplete: async (q) => {\n        const { data } = await axios.get(`${url}/autocomplete?q=${q}`)\n        return data?.data\n    },\n    autocompleteUserForTaxExempt: async (q) => {\n        const { data } = await axios.get(`${url}/autocompleteUserForTaxExempt?q=${q}`)\n        return data?.data\n    },\n    autocompleteCashier: async (q) => {\n        const { data } = await axios.get(`${url}/autocompletecashier?q=${q}`)\n        return data?.data\n    },\n    autocompleteTaxExempt: async (q) => {\n        const { data } = await axios.get(`${url}/autocompleteTaxExempt?q=${q}`)\n        return data?.data\n    },\n    changePassword: async (id, params) => {\n        const { data } = await axios.post(`${url}/${id}/change-password`, params)\n        return data?.data\n    },\n    verificationEmail: async (id) => {\n        const { data } = await axios.post(`${url}/${id}/verification-email`)\n        return data?.data\n    }\n}\n\nexport function useModel(id) {\n    return model(url, id)\n}\n\nexport function useDatatable(params) {\n    const result = datatable(url, `${url}/datatable`, params)\n\n    result.mutates = {\n        ...result.mutates,\n        verificationEmail: api.verificationEmail\n    }\n\n    return result\n}\n\nexport function useEmployeeDatatable(params) {\n    const result = datatable(url, `${url}/employee`, params)\n\n    result.mutates = {\n        ...result.mutates,\n        verificationEmail: api.verificationEmail\n    }\n\n    return result\n}\n\n","// src/data/use-stock-adjustment.js\nimport useSWR from 'swr'\nimport axios from '../utility/axiosIsntance'\nimport { getCurrentUser, isCurrentUserAdmin } from './use-auth'\n\nconst fetcher = (url) => axios.get(url).then(res => res.data?.data)\n\nexport const api = {\n    create: async (params) => {\n        const { data } = await axios.post('stock-adjustments', params)\n        return data?.data\n    },\n\n    approve: async (id, notes = '') => {\n        const { data } = await axios.post(`stock-adjustments/${id}/approve`, { notes })\n        return data?.data\n    },\n\n    reject: async (id, reason) => {\n        const { data } = await axios.post(`stock-adjustments/${id}/reject`, { reason })\n        return data?.data\n    },\n\n    getPending: async (params = {}) => {\n        const { data } = await axios.get('stock-adjustments', { params })\n        return data?.data\n    },\n\n    getMyRequests: async (params = {}) => {\n        const { data } = await axios.get('stock-adjustments/my-requests', { params })\n        return data?.data\n    },\n\n    getAllRequests: async (params = {}) => {\n        const isAdmin = isCurrentUserAdmin()\n        const endpoint = isAdmin ? 'stock-adjustments/all-requests' : 'stock-adjustments/my-requests'\n\n        // Remove 'all' from status if present (backend handles 'all' as show all)\n        const cleanedParams = { ...params }\n        if (cleanedParams.status === 'all') {\n            delete cleanedParams.status\n        }\n\n        const { data } = await axios.get(endpoint, { params: cleanedParams })\n        return data?.data\n    },\n\n    getHistory: async (params = {}) => {\n        // Remove 'all' from status if present\n        const cleanedParams = { ...params }\n        if (cleanedParams.status === 'all') {\n            delete cleanedParams.status\n        }\n\n        const { data } = await axios.get('stock-adjustments/datatable', { params: cleanedParams })\n        return data?.data\n    },\n\n    getStatistics: async (params = {}) => {\n        const { data } = await axios.get('stock-adjustments/statistics', { params })\n        return data?.data\n    },\n\n    bulkApprove: async (ids, notes = '') => {\n        const { data } = await axios.post('stock-adjustments/bulk-approve', { ids, notes })\n        return data?.data\n    },\n\n    bulkReject: async (ids, reason) => {\n        const { data } = await axios.post('stock-adjustments/bulk-reject', { ids, reason })\n        return data?.data\n    },\n\n    productHistory: async (productId, params = {}) => {\n        const { data } = await axios.get(`stock-adjustments/product/${productId}/history`, { params })\n        return data?.data\n    }\n}\n\nexport function useStockAdjustment() {\n    const isAdmin = isCurrentUserAdmin()\n\n    // Determine endpoint based on user role\n    const endpoint = isAdmin ? 'stock-adjustments/all-requests' : 'stock-adjustments/my-requests'\n\n    const { data: adjustmentData, mutate: mutateAdjustments, error: adjustmentsError } = useSWR(\n        endpoint,\n        fetcher,\n        {\n            revalidateOnFocus: false,\n            dedupingInterval: 60000\n        }\n    )\n\n    const { data: myRequestsData, mutate: mutateMyRequests, error: myRequestsError } = useSWR(\n        'stock-adjustments/my-requests',\n        fetcher,\n        {\n            revalidateOnFocus: false,\n            dedupingInterval: 60000\n        }\n    )\n\n    const loading = (!adjustmentData && !adjustmentsError) || (!myRequestsData && !myRequestsError)\n    const error = adjustmentsError || myRequestsError\n\n    return {\n        loading,\n        error,\n        adjustments: adjustmentData?.items || [],\n        myRequests: myRequestsData?.items || [],\n        isAdmin,\n\n        createRequest: async (params) => {\n            const result = await api.create(params)\n            await Promise.all([mutateAdjustments(), mutateMyRequests()])\n            return result\n        },\n\n        approveRequest: async (id, notes = '') => {\n            const result = await api.approve(id, notes)\n            await Promise.all([mutateAdjustments(), mutateMyRequests()])\n            return result\n        },\n\n        rejectRequest: async (id, reason) => {\n            const result = await api.reject(id, reason)\n            await Promise.all([mutateAdjustments(), mutateMyRequests()])\n            return result\n        }\n    }\n}\n\nexport function useAllRequests({ page = 1, limit = 20, search = '', filters = {} } = {}) {\n    const isAdmin = isCurrentUserAdmin()\n\n    // For admin users, use all-requests endpoint\n    const endpoint = isAdmin ? 'stock-adjustments/all-requests' : 'stock-adjustments/my-requests'\n\n    // Build query params\n    const params = new URLSearchParams()\n    params.append('page', page)\n    params.append('limit', limit)\n    if (search) params.append('search', search)\n\n    // Add filters - skip 'all' status (backend will return all)\n    if (filters.status && filters.status !== 'all') {\n        params.append('status', filters.status)\n    }\n    if (filters.user_id) {\n        params.append('user_id', filters.user_id)\n    }\n    if (filters.start_date) {\n        params.append('start_date', filters.start_date)\n    }\n    if (filters.end_date) {\n        params.append('end_date', filters.end_date)\n    }\n\n    const url = `${endpoint}?${params.toString()}`\n\n    const { data, mutate, error } = useSWR(url, fetcher, {\n        revalidateOnFocus: false,\n        dedupingInterval: 30000\n    })\n\n    const loading = !data && !error\n\n    return {\n        loading,\n        error,\n        isAdmin,\n        data: data?.items || [],\n        total: data?.total || 0,\n        mutate\n    }\n}\n\nexport function useStockAdjustmentHistory({ page = 1, limit = 20, search = '', filters = {} } = {}) {\n    const params = new URLSearchParams()\n    params.append('page', page)\n    params.append('limit', limit)\n    if (search) params.append('search', search)\n\n    // Skip 'all' status\n    if (filters.status && filters.status !== 'all') {\n        params.append('status', filters.status)\n    }\n    if (filters.user_id) {\n        params.append('user_id', filters.user_id)\n    }\n    if (filters.start_date) {\n        params.append('start_date', filters.start_date)\n    }\n    if (filters.end_date) {\n        params.append('end_date', filters.end_date)\n    }\n\n    const url = `stock-adjustments/datatable?${params.toString()}`\n\n    const { data, mutate, error } = useSWR(url, fetcher, {\n        revalidateOnFocus: false,\n        dedupingInterval: 30000\n    })\n\n    const loading = !data && !error\n\n    return {\n        loading,\n        error,\n        data: data?.items || [],\n        total: data?.total || 0,\n        mutate\n    }\n}","import useSWR from 'swr'\nimport axios from '../utility/axiosIsntance'\n\nconst fetcher = (url) => axios.get(url).then(res => res.data?.data)\n\nexport const api = {\n\n    create: async (url, params) => {\n        const { data } = await axios.post(url, params)\n        return data?.data\n    },\n\n    update: async (url, id, params) => {\n        const { data } = await axios.put(`${url}/${id}`, params)\n        return data?.data\n    },\n\n    delete: async (url, id) => {\n        await axios.delete(`${url}/${id}`)\n    }\n}\n\nexport function model(url, id) {\n\n    const { data, mutate, error } = useSWR(`${url}/${id}`, fetcher)\n\n    const loading = !data && !error\n\n    return {\n        loading,\n        error,\n        data,\n        mutate,\n        update: async (params) => {\n            await api.update(url, id, params)\n            await mutate()\n        }\n    }\n}\n\n\nexport function models(url) {\n\n    const { data, mutate, error } = useSWR(url, fetcher, {\n        revalidateOnFocus: false,\n        revalidateOnReconnect: false,\n        refreshWhenOffline: false,\n        refreshWhenHidden: false,\n        refreshInterval: 0\n    })\n\n    const loading = !data && !error\n\n    return {\n        loading,\n        error,\n        data: data || [],\n        mutate,\n        create: async (params) => api.create(params)\n    }\n}\n\n\nexport function datatable(base, endpoint, { page, limit, search, order = {}, conditions = {} }) {\n\n    const url = `${endpoint}?page=${page}&limit=${limit}&search=${search}&order=${JSON.stringify(order)}&conditions=${JSON.stringify(conditions)}`\n\n    const { data, mutate, error } = useSWR(url, fetcher)\n\n    const loading = !data && !error\n\n    return {\n        loading,\n        error,\n        data: data?.items || [],\n        total: data?.total || 0,\n        mutate,\n        mutates: {\n            delete: async (id) => {\n                await api.delete(base, id)\n                await mutate(url)\n            }\n        }\n    }\n\n}\nexport function datatableWithData(base, endpoint, { page, limit, search, order = {}, conditions = {}, from, to }) {\n\n    const url = `${endpoint}?page=${page}&limit=${limit}&from=${from}&to=${to}&search=${search}&order=${JSON.stringify(order)}&conditions=${JSON.stringify(conditions)}`\n\n    const { data, mutate, error } = useSWR(url, fetcher)\n\n    const loading = !data && !error\n\n    return {\n        loading,\n        error,\n        data: data?.items || [],\n        total: data?.total || 0,\n        mutate,\n        mutates: {\n            delete: async (id) => {\n                await api.delete(base, id)\n                await mutate(url)\n            }\n        }\n    }\n\n}\n\nexport function table(endpoint, { conditions }) {\n\n    const url = `${endpoint}?conditions=${JSON.stringify(conditions)}`\n\n    const { data, mutate, error } = useSWR(url, fetcher)\n\n    const loading = !data && !error\n\n    return {\n        loading,\n        error,\n        data: data?.items || [],\n        total: data?.total || 0,\n        mutate\n    }\n\n}\n","import { useState, useEffect } from 'react'\nimport { api as stockAdjustmentApi } from './use-stock-adjustment'\nimport { showError } from '../utility/Utils'\n\nexport const useStockAdjustmentDatatable = ({\n                                                page,\n                                                limit,\n                                                search,\n                                                order,\n                                                conditions,\n                                                dateRange,\n                                                // New parameter to filter by current user if not admin\n                                                filterByCurrentUser = false,\n                                                currentUserId = null\n                                            }) => {\n    const [data, setData] = useState([])\n    const [total, setTotal] = useState(0)\n    const [loading, setLoading] = useState(false)\n    const [mutateTrigger, setMutateTrigger] = useState(0)\n\n    const fetchData = async () => {\n        try {\n            setLoading(true)\n\n            const params = {\n                page: page + 1,\n                limit,\n                search: search || '',\n                start_date: dateRange?.startDate || '',\n                end_date: dateRange?.endDate || ''\n            }\n\n            // Handle status filter\n            if (conditions?.status && conditions.status !== 'all') {\n                params.status = conditions.status\n            }\n\n            // Handle user filter\n            if (conditions?.user_id) {\n                params.user_id = conditions.user_id\n            }\n\n            // Filter by current user if needed (for non-admin users in Request page)\n            if (filterByCurrentUser && currentUserId) {\n                params.user_id = currentUserId\n            }\n\n            // Remove empty params\n            Object.keys(params).forEach(key => {\n                if (params[key] === '' || params[key] === null || params[key] === undefined) {\n                    delete params[key]\n                }\n            })\n\n            const result = await stockAdjustmentApi.getAllRequests(params)\n\n            setData(result?.items || [])\n            setTotal(result?.total || 0)\n        } catch (error) {\n            console.error('Error loading adjustments:', error)\n            showError(`Failed to load adjustments: ${error.response?.data?.message || error.message}`)\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    useEffect(() => {\n        fetchData()\n    }, [page, limit, search, order, conditions, dateRange, mutateTrigger, filterByCurrentUser, currentUserId])\n\n    const mutates = {\n        refetch: () => {\n            setMutateTrigger(prev => prev + 1)\n        }\n    }\n\n    return {\n        data,\n        total,\n        mutates,\n        loading\n    }\n}\n"],"sourceRoot":""}